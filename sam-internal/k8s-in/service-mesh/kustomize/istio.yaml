apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    release: RELEASE-NAME
  name: istio-sidecar-injector
webhooks:
- clientConfig:
    caBundle: ""
    service:
      name: istio-sidecar-injector
      namespace: mesh-control-plane
      path: /inject
  failurePolicy: Fail
  name: sidecar-injector.istio.io
  namespaceSelector:
    matchLabels:
      istio-injection: enabled
  rules:
  - apiGroups:
    - ""
    apiVersions:
    - v1
    operations:
    - CREATE
    resources:
    - pods
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: istio-init
    istio: init
  name: istio-init-service-account
  namespace: mesh-control-plane
---
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: pilot
    chart: pilot
    heritage: Tiller
    release: RELEASE-NAME
  name: istio-pilot-service-account
  namespace: mesh-control-plane
---
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector-service-account
  namespace: mesh-control-plane
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  name: istio-ingressgateway-sds
  namespace: core-on-sam-sp2
rules:
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - watch
  - list
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: istio-init
    istio: init
  name: istio-init-mesh-control-plane
rules:
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - create
  - get
  - list
  - watch
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: pilot
    chart: pilot
    heritage: Tiller
    release: RELEASE-NAME
  name: istio-pilot-mesh-control-plane
rules:
- apiGroups:
  - config.istio.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - rbac.istio.io
  resources:
  - '*'
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - security.istio.io
  resources:
  - '*'
  verbs:
  - get
  - watch
  - list
- apiGroups:
  - networking.istio.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - authentication.istio.io
  resources:
  - '*'
  verbs:
  - '*'
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - '*'
- apiGroups:
  - extensions
  resources:
  - ingresses
  - ingresses/status
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - get
  - list
  - watch
  - update
- apiGroups:
  - ""
  resources:
  - endpoints
  - pods
  - services
  - namespaces
  - nodes
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - get
  - watch
  - list
  - update
  - delete
- apiGroups:
  - certificates.k8s.io
  resources:
  - certificatesigningrequests
  - certificatesigningrequests/approval
  - certificatesigningrequests/status
  verbs:
  - update
  - create
  - get
  - delete
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector-mesh-control-plane
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  name: istio-ingressgateway-sds
  namespace: core-on-sam-sp2
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: istio-ingressgateway-sds
subjects:
- kind: ServiceAccount
  name: istio-ingressgateway-service-account
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: istio-init
    istio: init
  name: istio-init-admin-role-binding-mesh-control-plane
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istio-init-mesh-control-plane
subjects:
- kind: ServiceAccount
  name: istio-init-service-account
  namespace: mesh-control-plane
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: pilot
    chart: pilot
    heritage: Tiller
    release: RELEASE-NAME
  name: istio-pilot-mesh-control-plane
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istio-pilot-mesh-control-plane
subjects:
- kind: ServiceAccount
  name: istio-pilot-service-account
  namespace: mesh-control-plane
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector-admin-role-binding-mesh-control-plane
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: istio-sidecar-injector-mesh-control-plane
subjects:
- kind: ServiceAccount
  name: istio-sidecar-injector-service-account
  namespace: mesh-control-plane
---
apiVersion: v1
data:
  crd-all.gen.yaml: |-
    # DO NOT EDIT - Generated by Cue OpenAPI generator based on Istio APIs.
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: mixer
        chart: istio
        heritage: Tiller
        istio: core
        package: istio.io.mixer
        release: istio
      name: attributemanifests.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - policy-istio-io
        kind: attributemanifest
        plural: attributemanifests
        singular: attributemanifest
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Describes the rules used to configure Mixer''s policy and
                telemetry features. See more details at: https://istio.io/docs/reference/config/policy-and-telemetry/istio.policy.v1beta1.html'
              properties:
                attributes:
                  additionalProperties:
                    properties:
                      description:
                        description: A human-readable description of the attribute's purpose.
                        format: string
                        type: string
                      valueType:
                        description: The type of data carried by this attribute.
                        enum:
                        - VALUE_TYPE_UNSPECIFIED
                        - STRING
                        - INT64
                        - DOUBLE
                        - BOOL
                        - TIMESTAMP
                        - IP_ADDRESS
                        - EMAIL_ADDRESS
                        - URI
                        - DNS_NAME
                        - DURATION
                        - STRING_MAP
                        type: string
                    type: object
                  description: The set of attributes this Istio component will be responsible
                    for producing at runtime.
                  type: object
                name:
                  description: Name of the component producing these attributes.
                  format: string
                  type: string
                revision:
                  description: The revision of this document.
                  format: string
                  type: string
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        heritage: Tiller
        istio: security
        release: istio
      name: authorizationpolicies.security.istio.io
    spec:
      group: security.istio.io
      names:
        categories:
        - istio-io
        - security-istio-io
        kind: AuthorizationPolicy
        plural: authorizationpolicies
        singular: authorizationpolicy
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration for access control on workloads. See more details
                at: https://istio.io/docs/reference/config/security/authorization-policy.html'
              properties:
                rules:
                  description: Optional.
                  items:
                    properties:
                      from:
                        description: Optional.
                        items:
                          properties:
                            source:
                              description: Source specifies the source of a request.
                              properties:
                                ipBlocks:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                namespaces:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                principals:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                requestPrincipals:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                              type: object
                          type: object
                        type: array
                      to:
                        description: Optional.
                        items:
                          properties:
                            operation:
                              description: Operation specifies the operation of a request.
                              properties:
                                hosts:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                methods:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                paths:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                                ports:
                                  description: Optional.
                                  items:
                                    format: string
                                    type: string
                                  type: array
                              type: object
                          type: object
                        type: array
                      when:
                        description: Optional.
                        items:
                          properties:
                            key:
                              description: The name of an Istio attribute.
                              format: string
                              type: string
                            values:
                              description: The allowed values for the attribute.
                              items:
                                format: string
                                type: string
                              type: array
                          type: object
                        type: array
                    type: object
                  type: array
                selector:
                  description: Optional.
                  properties:
                    matchLabels:
                      additionalProperties:
                        format: string
                        type: string
                      type: object
                  type: object
              type: object
          type: object
      versions:
      - name: v1beta1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        heritage: Tiller
        istio: rbac
        release: istio
      name: clusterrbacconfigs.rbac.istio.io
    spec:
      group: rbac.istio.io
      names:
        categories:
        - istio-io
        - rbac-istio-io
        kind: ClusterRbacConfig
        plural: clusterrbacconfigs
        singular: clusterrbacconfig
      scope: Cluster
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration for Role Based Access Control. See more details
                at: https://istio.io/docs/reference/config/security/istio.rbac.v1alpha1.html'
              properties:
                enforcementMode:
                  enum:
                  - ENFORCED
                  - PERMISSIVE
                  type: string
                exclusion:
                  description: A list of services or namespaces that should not be enforced
                    by Istio RBAC policies.
                  properties:
                    namespaces:
                      description: A list of namespaces.
                      items:
                        format: string
                        type: string
                      type: array
                    services:
                      description: A list of services.
                      items:
                        format: string
                        type: string
                      type: array
                  type: object
                inclusion:
                  description: A list of services or namespaces that should be enforced
                    by Istio RBAC policies.
                  properties:
                    namespaces:
                      description: A list of namespaces.
                      items:
                        format: string
                        type: string
                      type: array
                    services:
                      description: A list of services.
                      items:
                        format: string
                        type: string
                      type: array
                  type: object
                mode:
                  description: Istio RBAC mode.
                  enum:
                  - "OFF"
                  - "ON"
                  - ON_WITH_INCLUSION
                  - ON_WITH_EXCLUSION
                  type: string
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: destinationrules.networking.istio.io
    spec:
      additionalPrinterColumns:
      - JSONPath: .spec.host
        description: The name of a service from the service registry
        name: Host
        type: string
      - JSONPath: .metadata.creationTimestamp
        description: |-
          CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          Populated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
        name: Age
        type: date
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: DestinationRule
        listKind: DestinationRuleList
        plural: destinationrules
        shortNames:
        - dr
        singular: destinationrule
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration affecting load balancing, outlier detection,
                etc. See more details at: https://istio.io/docs/reference/config/networking/destination-rule.html'
              properties:
                exportTo:
                  description: A list of namespaces to which this destination rule is
                    exported.
                  items:
                    format: string
                    type: string
                  type: array
                host:
                  description: The name of a service from the service registry.
                  format: string
                  type: string
                subsets:
                  items:
                    properties:
                      labels:
                        additionalProperties:
                          format: string
                          type: string
                        type: object
                      name:
                        description: Name of the subset.
                        format: string
                        type: string
                      trafficPolicy:
                        description: Traffic policies that apply to this subset.
                        properties:
                          connectionPool:
                            properties:
                              http:
                                description: HTTP connection pool settings.
                                properties:
                                  h2UpgradePolicy:
                                    description: Specify if http1.1 connection should
                                      be upgraded to http2 for the associated destination.
                                    enum:
                                    - DEFAULT
                                    - DO_NOT_UPGRADE
                                    - UPGRADE
                                    type: string
                                  http1MaxPendingRequests:
                                    description: Maximum number of pending HTTP requests
                                      to a destination.
                                    format: int32
                                    type: integer
                                  http2MaxRequests:
                                    description: Maximum number of requests to a backend.
                                    format: int32
                                    type: integer
                                  idleTimeout:
                                    description: The idle timeout for upstream connection
                                      pool connections.
                                    type: string
                                  maxRequestsPerConnection:
                                    description: Maximum number of requests per connection
                                      to a backend.
                                    format: int32
                                    type: integer
                                  maxRetries:
                                    format: int32
                                    type: integer
                                type: object
                              tcp:
                                description: Settings common to both HTTP and TCP upstream
                                  connections.
                                properties:
                                  connectTimeout:
                                    description: TCP connection timeout.
                                    type: string
                                  maxConnections:
                                    description: Maximum number of HTTP1 /TCP connections
                                      to a destination host.
                                    format: int32
                                    type: integer
                                  tcpKeepalive:
                                    description: If set then set SO_KEEPALIVE on the socket
                                      to enable TCP Keepalives.
                                    properties:
                                      interval:
                                        description: The time duration between keep-alive
                                          probes.
                                        type: string
                                      probes:
                                        type: integer
                                      time:
                                        type: string
                                    type: object
                                type: object
                            type: object
                          loadBalancer:
                            description: Settings controlling the load balancer algorithms.
                            oneOf:
                            - required:
                              - simple
                            - properties:
                                consistentHash:
                                  oneOf:
                                  - required:
                                    - httpHeaderName
                                  - required:
                                    - httpCookie
                                  - required:
                                    - useSourceIp
                              required:
                              - consistentHash
                            properties:
                              consistentHash:
                                properties:
                                  httpCookie:
                                    description: Hash based on HTTP cookie.
                                    properties:
                                      name:
                                        description: Name of the cookie.
                                        format: string
                                        type: string
                                      path:
                                        description: Path to set for the cookie.
                                        format: string
                                        type: string
                                      ttl:
                                        description: Lifetime of the cookie.
                                        type: string
                                    type: object
                                  httpHeaderName:
                                    description: Hash based on a specific HTTP header.
                                    format: string
                                    type: string
                                  minimumRingSize:
                                    type: integer
                                  useSourceIp:
                                    description: Hash based on the source IP address.
                                    type: boolean
                                type: object
                              localityLbSetting:
                                properties:
                                  distribute:
                                    description: 'Optional: only one of distribute or
                                      failover can be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating locality, '/' separated,
                                            e.g.
                                          format: string
                                          type: string
                                        to:
                                          additionalProperties:
                                            type: integer
                                          description: Map of upstream localities to traffic
                                            distribution weights.
                                          type: object
                                      type: object
                                    type: array
                                  failover:
                                    description: 'Optional: only failover or distribute
                                      can be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating region.
                                          format: string
                                          type: string
                                        to:
                                          format: string
                                          type: string
                                      type: object
                                    type: array
                                type: object
                              simple:
                                enum:
                                - ROUND_ROBIN
                                - LEAST_CONN
                                - RANDOM
                                - PASSTHROUGH
                                type: string
                            type: object
                          outlierDetection:
                            properties:
                              baseEjectionTime:
                                description: Minimum ejection duration.
                                type: string
                              consecutiveErrors:
                                format: int32
                                type: integer
                              interval:
                                description: Time interval between ejection sweep analysis.
                                type: string
                              maxEjectionPercent:
                                format: int32
                                type: integer
                              minHealthPercent:
                                format: int32
                                type: integer
                            type: object
                          portLevelSettings:
                            description: Traffic policies specific to individual ports.
                            items:
                              properties:
                                connectionPool:
                                  properties:
                                    http:
                                      description: HTTP connection pool settings.
                                      properties:
                                        h2UpgradePolicy:
                                          description: Specify if http1.1 connection should
                                            be upgraded to http2 for the associated destination.
                                          enum:
                                          - DEFAULT
                                          - DO_NOT_UPGRADE
                                          - UPGRADE
                                          type: string
                                        http1MaxPendingRequests:
                                          description: Maximum number of pending HTTP
                                            requests to a destination.
                                          format: int32
                                          type: integer
                                        http2MaxRequests:
                                          description: Maximum number of requests to a
                                            backend.
                                          format: int32
                                          type: integer
                                        idleTimeout:
                                          description: The idle timeout for upstream connection
                                            pool connections.
                                          type: string
                                        maxRequestsPerConnection:
                                          description: Maximum number of requests per
                                            connection to a backend.
                                          format: int32
                                          type: integer
                                        maxRetries:
                                          format: int32
                                          type: integer
                                      type: object
                                    tcp:
                                      description: Settings common to both HTTP and TCP
                                        upstream connections.
                                      properties:
                                        connectTimeout:
                                          description: TCP connection timeout.
                                          type: string
                                        maxConnections:
                                          description: Maximum number of HTTP1 /TCP connections
                                            to a destination host.
                                          format: int32
                                          type: integer
                                        tcpKeepalive:
                                          description: If set then set SO_KEEPALIVE on
                                            the socket to enable TCP Keepalives.
                                          properties:
                                            interval:
                                              description: The time duration between keep-alive
                                                probes.
                                              type: string
                                            probes:
                                              type: integer
                                            time:
                                              type: string
                                          type: object
                                      type: object
                                  type: object
                                loadBalancer:
                                  description: Settings controlling the load balancer
                                    algorithms.
                                  oneOf:
                                  - required:
                                    - simple
                                  - properties:
                                      consistentHash:
                                        oneOf:
                                        - required:
                                          - httpHeaderName
                                        - required:
                                          - httpCookie
                                        - required:
                                          - useSourceIp
                                    required:
                                    - consistentHash
                                  properties:
                                    consistentHash:
                                      properties:
                                        httpCookie:
                                          description: Hash based on HTTP cookie.
                                          properties:
                                            name:
                                              description: Name of the cookie.
                                              format: string
                                              type: string
                                            path:
                                              description: Path to set for the cookie.
                                              format: string
                                              type: string
                                            ttl:
                                              description: Lifetime of the cookie.
                                              type: string
                                          type: object
                                        httpHeaderName:
                                          description: Hash based on a specific HTTP header.
                                          format: string
                                          type: string
                                        minimumRingSize:
                                          type: integer
                                        useSourceIp:
                                          description: Hash based on the source IP address.
                                          type: boolean
                                      type: object
                                    localityLbSetting:
                                      properties:
                                        distribute:
                                          description: 'Optional: only one of distribute
                                            or failover can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating locality, '/'
                                                  separated, e.g.
                                                format: string
                                                type: string
                                              to:
                                                additionalProperties:
                                                  type: integer
                                                description: Map of upstream localities
                                                  to traffic distribution weights.
                                                type: object
                                            type: object
                                          type: array
                                        failover:
                                          description: 'Optional: only failover or distribute
                                            can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating region.
                                                format: string
                                                type: string
                                              to:
                                                format: string
                                                type: string
                                            type: object
                                          type: array
                                      type: object
                                    simple:
                                      enum:
                                      - ROUND_ROBIN
                                      - LEAST_CONN
                                      - RANDOM
                                      - PASSTHROUGH
                                      type: string
                                  type: object
                                outlierDetection:
                                  properties:
                                    baseEjectionTime:
                                      description: Minimum ejection duration.
                                      type: string
                                    consecutiveErrors:
                                      format: int32
                                      type: integer
                                    interval:
                                      description: Time interval between ejection sweep
                                        analysis.
                                      type: string
                                    maxEjectionPercent:
                                      format: int32
                                      type: integer
                                    minHealthPercent:
                                      format: int32
                                      type: integer
                                  type: object
                                port:
                                  properties:
                                    number:
                                      type: integer
                                  type: object
                                tls:
                                  description: TLS related settings for connections to
                                    the upstream service.
                                  properties:
                                    caCertificates:
                                      format: string
                                      type: string
                                    clientCertificate:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    mode:
                                      enum:
                                      - DISABLE
                                      - SIMPLE
                                      - MUTUAL
                                      - ISTIO_MUTUAL
                                      type: string
                                    privateKey:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    sni:
                                      description: SNI string to present to the server
                                        during TLS handshake.
                                      format: string
                                      type: string
                                    subjectAltNames:
                                      items:
                                        format: string
                                        type: string
                                      type: array
                                  type: object
                              type: object
                            type: array
                          tls:
                            description: TLS related settings for connections to the upstream
                              service.
                            properties:
                              caCertificates:
                                format: string
                                type: string
                              clientCertificate:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              mode:
                                enum:
                                - DISABLE
                                - SIMPLE
                                - MUTUAL
                                - ISTIO_MUTUAL
                                type: string
                              privateKey:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              sni:
                                description: SNI string to present to the server during
                                  TLS handshake.
                                format: string
                                type: string
                              subjectAltNames:
                                items:
                                  format: string
                                  type: string
                                type: array
                            type: object
                        type: object
                    type: object
                  type: array
                trafficPolicy:
                  properties:
                    connectionPool:
                      properties:
                        http:
                          description: HTTP connection pool settings.
                          properties:
                            h2UpgradePolicy:
                              description: Specify if http1.1 connection should be upgraded
                                to http2 for the associated destination.
                              enum:
                              - DEFAULT
                              - DO_NOT_UPGRADE
                              - UPGRADE
                              type: string
                            http1MaxPendingRequests:
                              description: Maximum number of pending HTTP requests to
                                a destination.
                              format: int32
                              type: integer
                            http2MaxRequests:
                              description: Maximum number of requests to a backend.
                              format: int32
                              type: integer
                            idleTimeout:
                              description: The idle timeout for upstream connection pool
                                connections.
                              type: string
                            maxRequestsPerConnection:
                              description: Maximum number of requests per connection to
                                a backend.
                              format: int32
                              type: integer
                            maxRetries:
                              format: int32
                              type: integer
                          type: object
                        tcp:
                          description: Settings common to both HTTP and TCP upstream connections.
                          properties:
                            connectTimeout:
                              description: TCP connection timeout.
                              type: string
                            maxConnections:
                              description: Maximum number of HTTP1 /TCP connections to
                                a destination host.
                              format: int32
                              type: integer
                            tcpKeepalive:
                              description: If set then set SO_KEEPALIVE on the socket
                                to enable TCP Keepalives.
                              properties:
                                interval:
                                  description: The time duration between keep-alive probes.
                                  type: string
                                probes:
                                  type: integer
                                time:
                                  type: string
                              type: object
                          type: object
                      type: object
                    loadBalancer:
                      description: Settings controlling the load balancer algorithms.
                      oneOf:
                      - required:
                        - simple
                      - properties:
                          consistentHash:
                            oneOf:
                            - required:
                              - httpHeaderName
                            - required:
                              - httpCookie
                            - required:
                              - useSourceIp
                        required:
                        - consistentHash
                      properties:
                        consistentHash:
                          properties:
                            httpCookie:
                              description: Hash based on HTTP cookie.
                              properties:
                                name:
                                  description: Name of the cookie.
                                  format: string
                                  type: string
                                path:
                                  description: Path to set for the cookie.
                                  format: string
                                  type: string
                                ttl:
                                  description: Lifetime of the cookie.
                                  type: string
                              type: object
                            httpHeaderName:
                              description: Hash based on a specific HTTP header.
                              format: string
                              type: string
                            minimumRingSize:
                              type: integer
                            useSourceIp:
                              description: Hash based on the source IP address.
                              type: boolean
                          type: object
                        localityLbSetting:
                          properties:
                            distribute:
                              description: 'Optional: only one of distribute or failover
                                can be set.'
                              items:
                                properties:
                                  from:
                                    description: Originating locality, '/' separated,
                                      e.g.
                                    format: string
                                    type: string
                                  to:
                                    additionalProperties:
                                      type: integer
                                    description: Map of upstream localities to traffic
                                      distribution weights.
                                    type: object
                                type: object
                              type: array
                            failover:
                              description: 'Optional: only failover or distribute can
                                be set.'
                              items:
                                properties:
                                  from:
                                    description: Originating region.
                                    format: string
                                    type: string
                                  to:
                                    format: string
                                    type: string
                                type: object
                              type: array
                          type: object
                        simple:
                          enum:
                          - ROUND_ROBIN
                          - LEAST_CONN
                          - RANDOM
                          - PASSTHROUGH
                          type: string
                      type: object
                    outlierDetection:
                      properties:
                        baseEjectionTime:
                          description: Minimum ejection duration.
                          type: string
                        consecutiveErrors:
                          format: int32
                          type: integer
                        interval:
                          description: Time interval between ejection sweep analysis.
                          type: string
                        maxEjectionPercent:
                          format: int32
                          type: integer
                        minHealthPercent:
                          format: int32
                          type: integer
                      type: object
                    portLevelSettings:
                      description: Traffic policies specific to individual ports.
                      items:
                        properties:
                          connectionPool:
                            properties:
                              http:
                                description: HTTP connection pool settings.
                                properties:
                                  h2UpgradePolicy:
                                    description: Specify if http1.1 connection should
                                      be upgraded to http2 for the associated destination.
                                    enum:
                                    - DEFAULT
                                    - DO_NOT_UPGRADE
                                    - UPGRADE
                                    type: string
                                  http1MaxPendingRequests:
                                    description: Maximum number of pending HTTP requests
                                      to a destination.
                                    format: int32
                                    type: integer
                                  http2MaxRequests:
                                    description: Maximum number of requests to a backend.
                                    format: int32
                                    type: integer
                                  idleTimeout:
                                    description: The idle timeout for upstream connection
                                      pool connections.
                                    type: string
                                  maxRequestsPerConnection:
                                    description: Maximum number of requests per connection
                                      to a backend.
                                    format: int32
                                    type: integer
                                  maxRetries:
                                    format: int32
                                    type: integer
                                type: object
                              tcp:
                                description: Settings common to both HTTP and TCP upstream
                                  connections.
                                properties:
                                  connectTimeout:
                                    description: TCP connection timeout.
                                    type: string
                                  maxConnections:
                                    description: Maximum number of HTTP1 /TCP connections
                                      to a destination host.
                                    format: int32
                                    type: integer
                                  tcpKeepalive:
                                    description: If set then set SO_KEEPALIVE on the socket
                                      to enable TCP Keepalives.
                                    properties:
                                      interval:
                                        description: The time duration between keep-alive
                                          probes.
                                        type: string
                                      probes:
                                        type: integer
                                      time:
                                        type: string
                                    type: object
                                type: object
                            type: object
                          loadBalancer:
                            description: Settings controlling the load balancer algorithms.
                            oneOf:
                            - required:
                              - simple
                            - properties:
                                consistentHash:
                                  oneOf:
                                  - required:
                                    - httpHeaderName
                                  - required:
                                    - httpCookie
                                  - required:
                                    - useSourceIp
                              required:
                              - consistentHash
                            properties:
                              consistentHash:
                                properties:
                                  httpCookie:
                                    description: Hash based on HTTP cookie.
                                    properties:
                                      name:
                                        description: Name of the cookie.
                                        format: string
                                        type: string
                                      path:
                                        description: Path to set for the cookie.
                                        format: string
                                        type: string
                                      ttl:
                                        description: Lifetime of the cookie.
                                        type: string
                                    type: object
                                  httpHeaderName:
                                    description: Hash based on a specific HTTP header.
                                    format: string
                                    type: string
                                  minimumRingSize:
                                    type: integer
                                  useSourceIp:
                                    description: Hash based on the source IP address.
                                    type: boolean
                                type: object
                              localityLbSetting:
                                properties:
                                  distribute:
                                    description: 'Optional: only one of distribute or
                                      failover can be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating locality, '/' separated,
                                            e.g.
                                          format: string
                                          type: string
                                        to:
                                          additionalProperties:
                                            type: integer
                                          description: Map of upstream localities to traffic
                                            distribution weights.
                                          type: object
                                      type: object
                                    type: array
                                  failover:
                                    description: 'Optional: only failover or distribute
                                      can be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating region.
                                          format: string
                                          type: string
                                        to:
                                          format: string
                                          type: string
                                      type: object
                                    type: array
                                type: object
                              simple:
                                enum:
                                - ROUND_ROBIN
                                - LEAST_CONN
                                - RANDOM
                                - PASSTHROUGH
                                type: string
                            type: object
                          outlierDetection:
                            properties:
                              baseEjectionTime:
                                description: Minimum ejection duration.
                                type: string
                              consecutiveErrors:
                                format: int32
                                type: integer
                              interval:
                                description: Time interval between ejection sweep analysis.
                                type: string
                              maxEjectionPercent:
                                format: int32
                                type: integer
                              minHealthPercent:
                                format: int32
                                type: integer
                            type: object
                          port:
                            properties:
                              number:
                                type: integer
                            type: object
                          tls:
                            description: TLS related settings for connections to the upstream
                              service.
                            properties:
                              caCertificates:
                                format: string
                                type: string
                              clientCertificate:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              mode:
                                enum:
                                - DISABLE
                                - SIMPLE
                                - MUTUAL
                                - ISTIO_MUTUAL
                                type: string
                              privateKey:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              sni:
                                description: SNI string to present to the server during
                                  TLS handshake.
                                format: string
                                type: string
                              subjectAltNames:
                                items:
                                  format: string
                                  type: string
                                type: array
                            type: object
                        type: object
                      type: array
                    tls:
                      description: TLS related settings for connections to the upstream
                        service.
                      properties:
                        caCertificates:
                          format: string
                          type: string
                        clientCertificate:
                          description: REQUIRED if mode is `MUTUAL`.
                          format: string
                          type: string
                        mode:
                          enum:
                          - DISABLE
                          - SIMPLE
                          - MUTUAL
                          - ISTIO_MUTUAL
                          type: string
                        privateKey:
                          description: REQUIRED if mode is `MUTUAL`.
                          format: string
                          type: string
                        sni:
                          description: SNI string to present to the server during TLS
                            handshake.
                          format: string
                          type: string
                        subjectAltNames:
                          items:
                            format: string
                            type: string
                          type: array
                      type: object
                  type: object
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: envoyfilters.networking.istio.io
    spec:
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: EnvoyFilter
        plural: envoyfilters
        singular: envoyfilter
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Customizing Envoy configuration generated by Istio. See more
                details at: https://istio.io/docs/reference/config/networking/envoy-filter.html'
              properties:
                configPatches:
                  description: One or more patches with match conditions.
                  items:
                    properties:
                      applyTo:
                        enum:
                        - INVALID
                        - LISTENER
                        - FILTER_CHAIN
                        - NETWORK_FILTER
                        - HTTP_FILTER
                        - ROUTE_CONFIGURATION
                        - VIRTUAL_HOST
                        - HTTP_ROUTE
                        - CLUSTER
                        type: string
                      match:
                        description: Match on listener/route configuration/cluster.
                        oneOf:
                        - required:
                          - listener
                        - required:
                          - routeConfiguration
                        - required:
                          - cluster
                        properties:
                          cluster:
                            description: Match on envoy cluster attributes.
                            properties:
                              name:
                                description: The exact name of the cluster to match.
                                format: string
                                type: string
                              portNumber:
                                description: The service port for which this cluster was
                                  generated.
                                type: integer
                              service:
                                description: The fully qualified service name for this
                                  cluster.
                                format: string
                                type: string
                              subset:
                                description: The subset associated with the service.
                                format: string
                                type: string
                            type: object
                          context:
                            description: The specific config generation context to match
                              on.
                            enum:
                            - ANY
                            - SIDECAR_INBOUND
                            - SIDECAR_OUTBOUND
                            - GATEWAY
                            type: string
                          listener:
                            description: Match on envoy listener attributes.
                            properties:
                              filterChain:
                                description: Match a specific filter chain in a listener.
                                properties:
                                  applicationProtocols:
                                    description: Applies only to sidecars.
                                    format: string
                                    type: string
                                  filter:
                                    description: The name of a specific filter to apply
                                      the patch to.
                                    properties:
                                      name:
                                        description: The filter name to match on.
                                        format: string
                                        type: string
                                      subFilter:
                                        properties:
                                          name:
                                            description: The filter name to match on.
                                            format: string
                                            type: string
                                        type: object
                                    type: object
                                  name:
                                    description: The name assigned to the filter chain.
                                    format: string
                                    type: string
                                  sni:
                                    description: The SNI value used by a filter chain's
                                      match condition.
                                    format: string
                                    type: string
                                  transportProtocol:
                                    description: Applies only to SIDECAR_INBOUND context.
                                    format: string
                                    type: string
                                type: object
                              name:
                                description: Match a specific listener by its name.
                                format: string
                                type: string
                              portName:
                                format: string
                                type: string
                              portNumber:
                                type: integer
                            type: object
                          proxy:
                            description: Match on properties associated with a proxy.
                            properties:
                              metadata:
                                additionalProperties:
                                  format: string
                                  type: string
                                type: object
                              proxyVersion:
                                format: string
                                type: string
                            type: object
                          routeConfiguration:
                            description: Match on envoy HTTP route configuration attributes.
                            properties:
                              gateway:
                                format: string
                                type: string
                              name:
                                description: Route configuration name to match on.
                                format: string
                                type: string
                              portName:
                                description: Applicable only for GATEWAY context.
                                format: string
                                type: string
                              portNumber:
                                type: integer
                              vhost:
                                properties:
                                  name:
                                    format: string
                                    type: string
                                  route:
                                    description: Match a specific route within the virtual
                                      host.
                                    properties:
                                      action:
                                        description: Match a route with specific action
                                          type.
                                        enum:
                                        - ANY
                                        - ROUTE
                                        - REDIRECT
                                        - DIRECT_RESPONSE
                                        type: string
                                      name:
                                        format: string
                                        type: string
                                    type: object
                                type: object
                            type: object
                        type: object
                      patch:
                        description: The patch to apply along with the operation.
                        properties:
                          operation:
                            description: Determines how the patch should be applied.
                            enum:
                            - INVALID
                            - MERGE
                            - ADD
                            - REMOVE
                            - INSERT_BEFORE
                            - INSERT_AFTER
                            type: string
                          value:
                            description: The JSON config of the object being patched.
                            type: object
                        type: object
                    type: object
                  type: array
                filters:
                  items:
                    properties:
                      filterConfig:
                        type: object
                      filterName:
                        description: The name of the filter to instantiate.
                        format: string
                        type: string
                      filterType:
                        description: The type of filter to instantiate.
                        enum:
                        - INVALID
                        - HTTP
                        - NETWORK
                        type: string
                      insertPosition:
                        description: Insert position in the filter chain.
                        properties:
                          index:
                            description: Position of this filter in the filter chain.
                            enum:
                            - FIRST
                            - LAST
                            - BEFORE
                            - AFTER
                            type: string
                          relativeTo:
                            format: string
                            type: string
                        type: object
                      listenerMatch:
                        properties:
                          address:
                            description: One or more IP addresses to which the listener
                              is bound.
                            items:
                              format: string
                              type: string
                            type: array
                          listenerProtocol:
                            description: Selects a class of listeners for the same protocol.
                            enum:
                            - ALL
                            - HTTP
                            - TCP
                            type: string
                          listenerType:
                            description: Inbound vs outbound sidecar listener or gateway
                              listener.
                            enum:
                            - ANY
                            - SIDECAR_INBOUND
                            - SIDECAR_OUTBOUND
                            - GATEWAY
                            type: string
                          portNamePrefix:
                            format: string
                            type: string
                          portNumber:
                            type: integer
                        type: object
                    type: object
                  type: array
                workloadLabels:
                  additionalProperties:
                    format: string
                    type: string
                  description: Deprecated.
                  type: object
                workloadSelector:
                  properties:
                    labels:
                      additionalProperties:
                        format: string
                        type: string
                      type: object
                  type: object
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: gateways.networking.istio.io
    spec:
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: Gateway
        plural: gateways
        shortNames:
        - gw
        singular: gateway
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration affecting edge load balancer. See more details
                at: https://istio.io/docs/reference/config/networking/gateway.html'
              properties:
                selector:
                  additionalProperties:
                    format: string
                    type: string
                  type: object
                servers:
                  description: A list of server specifications.
                  items:
                    properties:
                      bind:
                        format: string
                        type: string
                      defaultEndpoint:
                        format: string
                        type: string
                      hosts:
                        description: One or more hosts exposed by this gateway.
                        items:
                          format: string
                          type: string
                        type: array
                      port:
                        properties:
                          name:
                            description: Label assigned to the port.
                            format: string
                            type: string
                          number:
                            description: A valid non-negative integer port number.
                            type: integer
                          protocol:
                            description: The protocol exposed on the port.
                            format: string
                            type: string
                        type: object
                      tls:
                        description: Set of TLS related options that govern the server's
                          behavior.
                        properties:
                          caCertificates:
                            description: REQUIRED if mode is `MUTUAL`.
                            format: string
                            type: string
                          cipherSuites:
                            description: 'Optional: If specified, only support the specified
                              cipher list.'
                            items:
                              format: string
                              type: string
                            type: array
                          credentialName:
                            format: string
                            type: string
                          httpsRedirect:
                            type: boolean
                          maxProtocolVersion:
                            description: 'Optional: Maximum TLS protocol version.'
                            enum:
                            - TLS_AUTO
                            - TLSV1_0
                            - TLSV1_1
                            - TLSV1_2
                            - TLSV1_3
                            type: string
                          minProtocolVersion:
                            description: 'Optional: Minimum TLS protocol version.'
                            enum:
                            - TLS_AUTO
                            - TLSV1_0
                            - TLSV1_1
                            - TLSV1_2
                            - TLSV1_3
                            type: string
                          mode:
                            enum:
                            - PASSTHROUGH
                            - SIMPLE
                            - MUTUAL
                            - AUTO_PASSTHROUGH
                            - ISTIO_MUTUAL
                            type: string
                          privateKey:
                            description: REQUIRED if mode is `SIMPLE` or `MUTUAL`.
                            format: string
                            type: string
                          serverCertificate:
                            description: REQUIRED if mode is `SIMPLE` or `MUTUAL`.
                            format: string
                            type: string
                          subjectAltNames:
                            items:
                              format: string
                              type: string
                            type: array
                          verifyCertificateHash:
                            items:
                              format: string
                              type: string
                            type: array
                          verifyCertificateSpki:
                            items:
                              format: string
                              type: string
                            type: array
                        type: object
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-mixer
        chart: istio
        heritage: Tiller
        release: istio
      name: httpapispecbindings.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - apim-istio-io
        kind: HTTPAPISpecBinding
        plural: httpapispecbindings
        singular: httpapispecbinding
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                api_specs:
                  items:
                    properties:
                      name:
                        description: The short name of the HTTPAPISpec.
                        format: string
                        type: string
                      namespace:
                        description: Optional namespace of the HTTPAPISpec.
                        format: string
                        type: string
                    type: object
                  type: array
                apiSpecs:
                  items:
                    properties:
                      name:
                        description: The short name of the HTTPAPISpec.
                        format: string
                        type: string
                      namespace:
                        description: Optional namespace of the HTTPAPISpec.
                        format: string
                        type: string
                    type: object
                  type: array
                services:
                  description: One or more services to map the listed HTTPAPISpec onto.
                  items:
                    properties:
                      domain:
                        description: Domain suffix used to construct the service FQDN
                          in implementations that support such specification.
                        format: string
                        type: string
                      labels:
                        additionalProperties:
                          format: string
                          type: string
                        description: Optional one or more labels that uniquely identify
                          the service version.
                        type: object
                      name:
                        description: The short name of the service such as "foo".
                        format: string
                        type: string
                      namespace:
                        description: Optional namespace of the service.
                        format: string
                        type: string
                      service:
                        description: The service FQDN.
                        format: string
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-mixer
        chart: istio
        heritage: Tiller
        release: istio
      name: httpapispecs.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - apim-istio-io
        kind: HTTPAPISpec
        plural: httpapispecs
        singular: httpapispec
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                api_keys:
                  items:
                    oneOf:
                    - required:
                      - query
                    - required:
                      - header
                    - required:
                      - cookie
                    properties:
                      cookie:
                        format: string
                        type: string
                      header:
                        description: API key is sent in a request header.
                        format: string
                        type: string
                      query:
                        description: API Key is sent as a query parameter.
                        format: string
                        type: string
                    type: object
                  type: array
                apiKeys:
                  items:
                    oneOf:
                    - required:
                      - query
                    - required:
                      - header
                    - required:
                      - cookie
                    properties:
                      cookie:
                        format: string
                        type: string
                      header:
                        description: API key is sent in a request header.
                        format: string
                        type: string
                      query:
                        description: API Key is sent as a query parameter.
                        format: string
                        type: string
                    type: object
                  type: array
                attributes:
                  properties:
                    attributes:
                      additionalProperties:
                        oneOf:
                        - required:
                          - stringValue
                        - required:
                          - int64Value
                        - required:
                          - doubleValue
                        - required:
                          - boolValue
                        - required:
                          - bytesValue
                        - required:
                          - timestampValue
                        - required:
                          - durationValue
                        - required:
                          - stringMapValue
                        properties:
                          boolValue:
                            type: boolean
                          bytesValue:
                            format: binary
                            type: string
                          doubleValue:
                            format: double
                            type: number
                          durationValue:
                            type: string
                          int64Value:
                            format: int64
                            type: integer
                          stringMapValue:
                            properties:
                              entries:
                                additionalProperties:
                                  format: string
                                  type: string
                                description: Holds a set of name/value pairs.
                                type: object
                            type: object
                          stringValue:
                            format: string
                            type: string
                          timestampValue:
                            format: dateTime
                            type: string
                        type: object
                      description: A map of attribute name to its value.
                      type: object
                  type: object
                patterns:
                  description: List of HTTP patterns to match.
                  items:
                    oneOf:
                    - required:
                      - uriTemplate
                    - required:
                      - regex
                    properties:
                      attributes:
                        properties:
                          attributes:
                            additionalProperties:
                              oneOf:
                              - required:
                                - stringValue
                              - required:
                                - int64Value
                              - required:
                                - doubleValue
                              - required:
                                - boolValue
                              - required:
                                - bytesValue
                              - required:
                                - timestampValue
                              - required:
                                - durationValue
                              - required:
                                - stringMapValue
                              properties:
                                boolValue:
                                  type: boolean
                                bytesValue:
                                  format: binary
                                  type: string
                                doubleValue:
                                  format: double
                                  type: number
                                durationValue:
                                  type: string
                                int64Value:
                                  format: int64
                                  type: integer
                                stringMapValue:
                                  properties:
                                    entries:
                                      additionalProperties:
                                        format: string
                                        type: string
                                      description: Holds a set of name/value pairs.
                                      type: object
                                  type: object
                                stringValue:
                                  format: string
                                  type: string
                                timestampValue:
                                  format: dateTime
                                  type: string
                              type: object
                            description: A map of attribute name to its value.
                            type: object
                        type: object
                      httpMethod:
                        format: string
                        type: string
                      regex:
                        format: string
                        type: string
                      uriTemplate:
                        format: string
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-citadel
        chart: istio
        heritage: Tiller
        release: istio
      name: meshpolicies.authentication.istio.io
    spec:
      group: authentication.istio.io
      names:
        categories:
        - istio-io
        - authentication-istio-io
        kind: MeshPolicy
        listKind: MeshPolicyList
        plural: meshpolicies
        singular: meshpolicy
      scope: Cluster
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Authentication policy for Istio services. See more details
                at: https://istio.io/docs/reference/config/security/istio.authentication.v1alpha1.html'
              properties:
                originIsOptional:
                  type: boolean
                origins:
                  description: List of authentication methods that can be used for origin
                    authentication.
                  items:
                    properties:
                      jwt:
                        description: Jwt params for the method.
                        properties:
                          audiences:
                            items:
                              format: string
                              type: string
                            type: array
                          issuer:
                            description: Identifies the issuer that issued the JWT.
                            format: string
                            type: string
                          jwks:
                            description: JSON Web Key Set of public keys to validate signature
                              of the JWT.
                            format: string
                            type: string
                          jwks_uri:
                            format: string
                            type: string
                          jwksUri:
                            format: string
                            type: string
                          jwt_headers:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtHeaders:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtParams:
                            description: JWT is sent in a query parameter.
                            items:
                              format: string
                              type: string
                            type: array
                          trigger_rules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                          triggerRules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                        type: object
                    type: object
                  type: array
                peerIsOptional:
                  type: boolean
                peers:
                  description: List of authentication methods that can be used for peer
                    authentication.
                  items:
                    oneOf:
                    - required:
                      - mtls
                    - required:
                      - jwt
                    properties:
                      jwt:
                        properties:
                          audiences:
                            items:
                              format: string
                              type: string
                            type: array
                          issuer:
                            description: Identifies the issuer that issued the JWT.
                            format: string
                            type: string
                          jwks:
                            description: JSON Web Key Set of public keys to validate signature
                              of the JWT.
                            format: string
                            type: string
                          jwks_uri:
                            format: string
                            type: string
                          jwksUri:
                            format: string
                            type: string
                          jwt_headers:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtHeaders:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtParams:
                            description: JWT is sent in a query parameter.
                            items:
                              format: string
                              type: string
                            type: array
                          trigger_rules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                          triggerRules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                        type: object
                      mtls:
                        description: Set if mTLS is used.
                        properties:
                          allowTls:
                            description: WILL BE DEPRECATED, if set, will translates to
                              `TLS_PERMISSIVE` mode.
                            type: boolean
                          mode:
                            description: Defines the mode of mTLS authentication.
                            enum:
                            - STRICT
                            - PERMISSIVE
                            type: string
                        type: object
                    type: object
                  type: array
                principalBinding:
                  description: Define whether peer or origin identity should be use for
                    principal.
                  enum:
                  - USE_PEER
                  - USE_ORIGIN
                  type: string
                targets:
                  description: List rules to select workloads that the policy should be
                    applied on.
                  items:
                    properties:
                      name:
                        description: The name must be a short name from the service registry.
                        format: string
                        type: string
                      ports:
                        description: Specifies the ports.
                        items:
                          oneOf:
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              format: string
                              type: string
                            number:
                              type: integer
                          type: object
                        type: array
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-citadel
        chart: istio
        heritage: Tiller
        release: istio
      name: policies.authentication.istio.io
    spec:
      group: authentication.istio.io
      names:
        categories:
        - istio-io
        - authentication-istio-io
        kind: Policy
        plural: policies
        singular: policy
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Authentication policy for Istio services. See more details
                at: https://istio.io/docs/reference/config/security/istio.authentication.v1alpha1.html'
              properties:
                originIsOptional:
                  type: boolean
                origins:
                  description: List of authentication methods that can be used for origin
                    authentication.
                  items:
                    properties:
                      jwt:
                        description: Jwt params for the method.
                        properties:
                          audiences:
                            items:
                              format: string
                              type: string
                            type: array
                          issuer:
                            description: Identifies the issuer that issued the JWT.
                            format: string
                            type: string
                          jwks:
                            description: JSON Web Key Set of public keys to validate signature
                              of the JWT.
                            format: string
                            type: string
                          jwks_uri:
                            format: string
                            type: string
                          jwksUri:
                            format: string
                            type: string
                          jwt_headers:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtHeaders:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtParams:
                            description: JWT is sent in a query parameter.
                            items:
                              format: string
                              type: string
                            type: array
                          trigger_rules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                          triggerRules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                        type: object
                    type: object
                  type: array
                peerIsOptional:
                  type: boolean
                peers:
                  description: List of authentication methods that can be used for peer
                    authentication.
                  items:
                    oneOf:
                    - required:
                      - mtls
                    - required:
                      - jwt
                    properties:
                      jwt:
                        properties:
                          audiences:
                            items:
                              format: string
                              type: string
                            type: array
                          issuer:
                            description: Identifies the issuer that issued the JWT.
                            format: string
                            type: string
                          jwks:
                            description: JSON Web Key Set of public keys to validate signature
                              of the JWT.
                            format: string
                            type: string
                          jwks_uri:
                            format: string
                            type: string
                          jwksUri:
                            format: string
                            type: string
                          jwt_headers:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtHeaders:
                            description: JWT is sent in a request header.
                            items:
                              format: string
                              type: string
                            type: array
                          jwtParams:
                            description: JWT is sent in a query parameter.
                            items:
                              format: string
                              type: string
                            type: array
                          trigger_rules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                          triggerRules:
                            items:
                              properties:
                                excluded_paths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                excludedPaths:
                                  description: List of paths to be excluded from the request.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                included_paths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                                includedPaths:
                                  description: List of paths that the request must include.
                                  items:
                                    oneOf:
                                    - required:
                                      - exact
                                    - required:
                                      - prefix
                                    - required:
                                      - suffix
                                    - required:
                                      - regex
                                    properties:
                                      exact:
                                        description: exact string match.
                                        format: string
                                        type: string
                                      prefix:
                                        description: prefix-based match.
                                        format: string
                                        type: string
                                      regex:
                                        description: ECMAscript style regex-based match
                                          as defined by [EDCA-262](http://en.cppreference.com/w/cpp/regex/ecmascript).
                                        format: string
                                        type: string
                                      suffix:
                                        description: suffix-based match.
                                        format: string
                                        type: string
                                    type: object
                                  type: array
                              type: object
                            type: array
                        type: object
                      mtls:
                        description: Set if mTLS is used.
                        properties:
                          allowTls:
                            description: WILL BE DEPRECATED, if set, will translates to
                              `TLS_PERMISSIVE` mode.
                            type: boolean
                          mode:
                            description: Defines the mode of mTLS authentication.
                            enum:
                            - STRICT
                            - PERMISSIVE
                            type: string
                        type: object
                    type: object
                  type: array
                principalBinding:
                  description: Define whether peer or origin identity should be use for
                    principal.
                  enum:
                  - USE_PEER
                  - USE_ORIGIN
                  type: string
                targets:
                  description: List rules to select workloads that the policy should be
                    applied on.
                  items:
                    properties:
                      name:
                        description: The name must be a short name from the service registry.
                        format: string
                        type: string
                      ports:
                        description: Specifies the ports.
                        items:
                          oneOf:
                          - required:
                            - number
                          - required:
                            - name
                          properties:
                            name:
                              format: string
                              type: string
                            number:
                              type: integer
                          type: object
                        type: array
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-mixer
        chart: istio
        heritage: Tiller
        release: istio
      name: quotaspecbindings.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - apim-istio-io
        kind: QuotaSpecBinding
        plural: quotaspecbindings
        singular: quotaspecbinding
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              properties:
                quotaSpecs:
                  items:
                    properties:
                      name:
                        description: The short name of the QuotaSpec.
                        format: string
                        type: string
                      namespace:
                        description: Optional namespace of the QuotaSpec.
                        format: string
                        type: string
                    type: object
                  type: array
                services:
                  description: One or more services to map the listed QuotaSpec onto.
                  items:
                    properties:
                      domain:
                        description: Domain suffix used to construct the service FQDN
                          in implementations that support such specification.
                        format: string
                        type: string
                      labels:
                        additionalProperties:
                          format: string
                          type: string
                        description: Optional one or more labels that uniquely identify
                          the service version.
                        type: object
                      name:
                        description: The short name of the service such as "foo".
                        format: string
                        type: string
                      namespace:
                        description: Optional namespace of the service.
                        format: string
                        type: string
                      service:
                        description: The service FQDN.
                        format: string
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-mixer
        chart: istio
        heritage: Tiller
        release: istio
      name: quotaspecs.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - apim-istio-io
        kind: QuotaSpec
        plural: quotaspecs
        singular: quotaspec
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: Determines the quotas used for individual requests.
              properties:
                rules:
                  description: A list of Quota rules.
                  items:
                    properties:
                      match:
                        description: If empty, match all request.
                        items:
                          properties:
                            clause:
                              additionalProperties:
                                oneOf:
                                - required:
                                  - exact
                                - required:
                                  - prefix
                                - required:
                                  - regex
                                properties:
                                  exact:
                                    format: string
                                    type: string
                                  prefix:
                                    format: string
                                    type: string
                                  regex:
                                    format: string
                                    type: string
                                type: object
                              description: Map of attribute names to StringMatch type.
                              type: object
                          type: object
                        type: array
                      quotas:
                        description: The list of quotas to charge.
                        items:
                          properties:
                            charge:
                              format: int32
                              type: integer
                            quota:
                              format: string
                              type: string
                          type: object
                        type: array
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: mixer
        chart: istio
        heritage: Tiller
        istio: rbac
        package: istio.io.mixer
        release: istio
      name: rbacconfigs.rbac.istio.io
    spec:
      group: rbac.istio.io
      names:
        categories:
        - istio-io
        - rbac-istio-io
        kind: RbacConfig
        plural: rbacconfigs
        singular: rbacconfig
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration for Role Based Access Control. See more details
                at: https://istio.io/docs/reference/config/security/istio.rbac.v1alpha1.html'
              properties:
                enforcementMode:
                  enum:
                  - ENFORCED
                  - PERMISSIVE
                  type: string
                exclusion:
                  description: A list of services or namespaces that should not be enforced
                    by Istio RBAC policies.
                  properties:
                    namespaces:
                      description: A list of namespaces.
                      items:
                        format: string
                        type: string
                      type: array
                    services:
                      description: A list of services.
                      items:
                        format: string
                        type: string
                      type: array
                  type: object
                inclusion:
                  description: A list of services or namespaces that should be enforced
                    by Istio RBAC policies.
                  properties:
                    namespaces:
                      description: A list of namespaces.
                      items:
                        format: string
                        type: string
                      type: array
                    services:
                      description: A list of services.
                      items:
                        format: string
                        type: string
                      type: array
                  type: object
                mode:
                  description: Istio RBAC mode.
                  enum:
                  - "OFF"
                  - "ON"
                  - ON_WITH_INCLUSION
                  - ON_WITH_EXCLUSION
                  type: string
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: mixer
        chart: istio
        heritage: Tiller
        istio: core
        package: istio.io.mixer
        release: istio
      name: rules.config.istio.io
    spec:
      group: config.istio.io
      names:
        categories:
        - istio-io
        - policy-istio-io
        kind: rule
        plural: rules
        singular: rule
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Describes the rules used to configure Mixer''s policy and
                telemetry features. See more details at: https://istio.io/docs/reference/config/policy-and-telemetry/istio.policy.v1beta1.html'
              properties:
                actions:
                  description: The actions that will be executed when match evaluates
                    to `true`.
                  items:
                    properties:
                      handler:
                        description: Fully qualified name of the handler to invoke.
                        format: string
                        type: string
                      instances:
                        items:
                          format: string
                          type: string
                        type: array
                      name:
                        description: A handle to refer to the results of the action.
                        format: string
                        type: string
                    type: object
                  type: array
                match:
                  description: Match is an attribute based predicate.
                  format: string
                  type: string
                requestHeaderOperations:
                  items:
                    properties:
                      name:
                        description: Header name literal value.
                        format: string
                        type: string
                      operation:
                        description: Header operation type.
                        enum:
                        - REPLACE
                        - REMOVE
                        - APPEND
                        type: string
                      values:
                        description: Header value expressions.
                        items:
                          format: string
                          type: string
                        type: array
                    type: object
                  type: array
                responseHeaderOperations:
                  items:
                    properties:
                      name:
                        description: Header name literal value.
                        format: string
                        type: string
                      operation:
                        description: Header operation type.
                        enum:
                        - REPLACE
                        - REMOVE
                        - APPEND
                        type: string
                      values:
                        description: Header value expressions.
                        items:
                          format: string
                          type: string
                        type: array
                    type: object
                  type: array
                sampling:
                  properties:
                    random:
                      description: Provides filtering of actions based on random selection
                        per request.
                      properties:
                        attributeExpression:
                          description: Specifies an attribute expression to use to override
                            the numerator in the `percent_sampled` field.
                          format: string
                          type: string
                        percentSampled:
                          description: The default sampling rate, expressed as a percentage.
                          properties:
                            denominator:
                              description: Specifies the denominator.
                              enum:
                              - HUNDRED
                              - TEN_THOUSAND
                              type: string
                            numerator:
                              description: Specifies the numerator.
                              type: integer
                          type: object
                        useIndependentRandomness:
                          description: By default sampling will be based on the value
                            of the request header `x-request-id`.
                          type: boolean
                      type: object
                    rateLimit:
                      properties:
                        maxUnsampledEntries:
                          description: Number of entries to allow during the `sampling_duration`
                            before sampling is enforced.
                          format: int64
                          type: integer
                        samplingDuration:
                          description: Window in which to enforce the sampling rate.
                          type: string
                        samplingRate:
                          description: The rate at which to sample entries once the unsampled
                            limit has been reached.
                          format: int64
                          type: integer
                      type: object
                  type: object
              type: object
          type: object
      versions:
      - name: v1alpha2
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: serviceentries.networking.istio.io
    spec:
      additionalPrinterColumns:
      - JSONPath: .spec.hosts
        description: The hosts associated with the ServiceEntry
        name: Hosts
        type: string
      - JSONPath: .spec.location
        description: Whether the service is external to the mesh or part of the mesh (MESH_EXTERNAL
          or MESH_INTERNAL)
        name: Location
        type: string
      - JSONPath: .spec.resolution
        description: Service discovery mode for the hosts (NONE, STATIC, or DNS)
        name: Resolution
        type: string
      - JSONPath: .metadata.creationTimestamp
        description: |-
          CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          Populated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
        name: Age
        type: date
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: ServiceEntry
        listKind: ServiceEntryList
        plural: serviceentries
        shortNames:
        - se
        singular: serviceentry
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration affecting service registry. See more details
                at: https://istio.io/docs/reference/config/networking/service-entry.html'
              properties:
                addresses:
                  description: The virtual IP addresses associated with the service.
                  items:
                    format: string
                    type: string
                  type: array
                endpoints:
                  description: One or more endpoints associated with the service.
                  items:
                    properties:
                      address:
                        format: string
                        type: string
                      labels:
                        additionalProperties:
                          format: string
                          type: string
                        description: One or more labels associated with the endpoint.
                        type: object
                      locality:
                        description: The locality associated with the endpoint.
                        format: string
                        type: string
                      network:
                        format: string
                        type: string
                      ports:
                        additionalProperties:
                          type: integer
                        description: Set of ports associated with the endpoint.
                        type: object
                      weight:
                        description: The load balancing weight associated with the endpoint.
                        type: integer
                    type: object
                  type: array
                exportTo:
                  description: A list of namespaces to which this service is exported.
                  items:
                    format: string
                    type: string
                  type: array
                hosts:
                  description: The hosts associated with the ServiceEntry.
                  items:
                    format: string
                    type: string
                  type: array
                location:
                  enum:
                  - MESH_EXTERNAL
                  - MESH_INTERNAL
                  type: string
                ports:
                  description: The ports associated with the external service.
                  items:
                    properties:
                      name:
                        description: Label assigned to the port.
                        format: string
                        type: string
                      number:
                        description: A valid non-negative integer port number.
                        type: integer
                      protocol:
                        description: The protocol exposed on the port.
                        format: string
                        type: string
                    type: object
                  type: array
                resolution:
                  description: Service discovery mode for the hosts.
                  enum:
                  - NONE
                  - STATIC
                  - DNS
                  type: string
                subjectAltNames:
                  items:
                    format: string
                    type: string
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: mixer
        chart: istio
        heritage: Tiller
        istio: rbac
        package: istio.io.mixer
        release: istio
      name: servicerolebindings.rbac.istio.io
    spec:
      additionalPrinterColumns:
      - JSONPath: .spec.roleRef.name
        description: The name of the ServiceRole object being referenced
        name: Reference
        type: string
      - JSONPath: .metadata.creationTimestamp
        description: |-
          CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          Populated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
        name: Age
        type: date
      group: rbac.istio.io
      names:
        categories:
        - istio-io
        - rbac-istio-io
        kind: ServiceRoleBinding
        plural: servicerolebindings
        singular: servicerolebinding
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration for Role Based Access Control. See more details
                at: https://istio.io/docs/reference/config/security/istio.rbac.v1alpha1.html'
              properties:
                actions:
                  items:
                    properties:
                      constraints:
                        description: Optional.
                        items:
                          properties:
                            key:
                              description: Key of the constraint.
                              format: string
                              type: string
                            values:
                              description: List of valid values for the constraint.
                              items:
                                format: string
                                type: string
                              type: array
                          type: object
                        type: array
                      hosts:
                        items:
                          format: string
                          type: string
                        type: array
                      methods:
                        description: Optional.
                        items:
                          format: string
                          type: string
                        type: array
                      notHosts:
                        items:
                          format: string
                          type: string
                        type: array
                      notMethods:
                        items:
                          format: string
                          type: string
                        type: array
                      notPaths:
                        items:
                          format: string
                          type: string
                        type: array
                      notPorts:
                        items:
                          format: int32
                          type: integer
                        type: array
                      paths:
                        description: Optional.
                        items:
                          format: string
                          type: string
                        type: array
                      ports:
                        items:
                          format: int32
                          type: integer
                        type: array
                      services:
                        description: A list of service names.
                        items:
                          format: string
                          type: string
                        type: array
                    type: object
                  type: array
                mode:
                  enum:
                  - ENFORCED
                  - PERMISSIVE
                  type: string
                role:
                  format: string
                  type: string
                roleRef:
                  description: Reference to the ServiceRole object.
                  properties:
                    kind:
                      description: The type of the role being referenced.
                      format: string
                      type: string
                    name:
                      description: The name of the ServiceRole object being referenced.
                      format: string
                      type: string
                  type: object
                subjects:
                  description: List of subjects that are assigned the ServiceRole object.
                  items:
                    properties:
                      group:
                        format: string
                        type: string
                      groups:
                        items:
                          format: string
                          type: string
                        type: array
                      ips:
                        items:
                          format: string
                          type: string
                        type: array
                      names:
                        items:
                          format: string
                          type: string
                        type: array
                      namespaces:
                        items:
                          format: string
                          type: string
                        type: array
                      notGroups:
                        items:
                          format: string
                          type: string
                        type: array
                      notIps:
                        items:
                          format: string
                          type: string
                        type: array
                      notNames:
                        items:
                          format: string
                          type: string
                        type: array
                      notNamespaces:
                        items:
                          format: string
                          type: string
                        type: array
                      properties:
                        additionalProperties:
                          format: string
                          type: string
                        description: Optional.
                        type: object
                      user:
                        description: Optional.
                        format: string
                        type: string
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: mixer
        chart: istio
        heritage: Tiller
        istio: rbac
        package: istio.io.mixer
        release: istio
      name: serviceroles.rbac.istio.io
    spec:
      group: rbac.istio.io
      names:
        categories:
        - istio-io
        - rbac-istio-io
        kind: ServiceRole
        plural: serviceroles
        singular: servicerole
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration for Role Based Access Control. See more details
                at: https://istio.io/docs/reference/config/security/istio.rbac.v1alpha1.html'
              properties:
                rules:
                  description: The set of access rules (permissions) that the role has.
                  items:
                    properties:
                      constraints:
                        description: Optional.
                        items:
                          properties:
                            key:
                              description: Key of the constraint.
                              format: string
                              type: string
                            values:
                              description: List of valid values for the constraint.
                              items:
                                format: string
                                type: string
                              type: array
                          type: object
                        type: array
                      hosts:
                        items:
                          format: string
                          type: string
                        type: array
                      methods:
                        description: Optional.
                        items:
                          format: string
                          type: string
                        type: array
                      notHosts:
                        items:
                          format: string
                          type: string
                        type: array
                      notMethods:
                        items:
                          format: string
                          type: string
                        type: array
                      notPaths:
                        items:
                          format: string
                          type: string
                        type: array
                      notPorts:
                        items:
                          format: int32
                          type: integer
                        type: array
                      paths:
                        description: Optional.
                        items:
                          format: string
                          type: string
                        type: array
                      ports:
                        items:
                          format: int32
                          type: integer
                        type: array
                      services:
                        description: A list of service names.
                        items:
                          format: string
                          type: string
                        type: array
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha1
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: sidecars.networking.istio.io
    spec:
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: Sidecar
        plural: sidecars
        singular: sidecar
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration affecting network reachability of a sidecar.
                See more details at: https://istio.io/docs/reference/config/networking/sidecar.html'
              properties:
                egress:
                  items:
                    properties:
                      bind:
                        format: string
                        type: string
                      captureMode:
                        enum:
                        - DEFAULT
                        - IPTABLES
                        - NONE
                        type: string
                      hosts:
                        items:
                          format: string
                          type: string
                        type: array
                      port:
                        description: The port associated with the listener.
                        properties:
                          name:
                            description: Label assigned to the port.
                            format: string
                            type: string
                          number:
                            description: A valid non-negative integer port number.
                            type: integer
                          protocol:
                            description: The protocol exposed on the port.
                            format: string
                            type: string
                        type: object
                    type: object
                  type: array
                ingress:
                  items:
                    properties:
                      bind:
                        description: The IP to which the listener should be bound.
                        format: string
                        type: string
                      captureMode:
                        enum:
                        - DEFAULT
                        - IPTABLES
                        - NONE
                        type: string
                      defaultEndpoint:
                        format: string
                        type: string
                      port:
                        description: The port associated with the listener.
                        properties:
                          name:
                            description: Label assigned to the port.
                            format: string
                            type: string
                          number:
                            description: A valid non-negative integer port number.
                            type: integer
                          protocol:
                            description: The protocol exposed on the port.
                            format: string
                            type: string
                        type: object
                    type: object
                  type: array
                outboundTrafficPolicy:
                  description: This allows to configure the outbound traffic policy.
                  properties:
                    mode:
                      enum:
                      - REGISTRY_ONLY
                      - ALLOW_ANY
                      type: string
                  type: object
                workloadSelector:
                  properties:
                    labels:
                      additionalProperties:
                        format: string
                        type: string
                      type: object
                  type: object
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
    apiVersion: apiextensions.k8s.io/v1beta1
    kind: CustomResourceDefinition
    metadata:
      annotations:
        "helm.sh/resource-policy": keep
      creationTimestamp: null
      labels:
        app: istio-pilot
        chart: istio
        heritage: Tiller
        release: istio
      name: virtualservices.networking.istio.io
    spec:
      additionalPrinterColumns:
      - JSONPath: .spec.gateways
        description: The names of gateways and sidecars that should apply these routes
        name: Gateways
        type: string
      - JSONPath: .spec.hosts
        description: The destination hosts to which traffic is being sent
        name: Hosts
        type: string
      - JSONPath: .metadata.creationTimestamp
        description: |-
          CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.
          Populated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata
        name: Age
        type: date
      group: networking.istio.io
      names:
        categories:
        - istio-io
        - networking-istio-io
        kind: VirtualService
        listKind: VirtualServiceList
        plural: virtualservices
        shortNames:
        - vs
        singular: virtualservice
      scope: Namespaced
      subresources:
        status: {}
      validation:
        openAPIV3Schema:
          properties:
            spec:
              description: 'Configuration affecting label/content routing, sni routing,
                etc. See more details at: https://istio.io/docs/reference/config/networking/virtual-service.html'
              properties:
                exportTo:
                  description: A list of namespaces to which this virtual service is exported.
                  items:
                    format: string
                    type: string
                  type: array
                gateways:
                  description: The names of gateways and sidecars that should apply these
                    routes.
                  items:
                    format: string
                    type: string
                  type: array
                hosts:
                  description: The destination hosts to which traffic is being sent.
                  items:
                    format: string
                    type: string
                  type: array
                http:
                  description: An ordered list of route rules for HTTP traffic.
                  items:
                    properties:
                      appendHeaders:
                        additionalProperties:
                          format: string
                          type: string
                        type: object
                      appendRequestHeaders:
                        additionalProperties:
                          format: string
                          type: string
                        type: object
                      appendResponseHeaders:
                        additionalProperties:
                          format: string
                          type: string
                        type: object
                      corsPolicy:
                        description: Cross-Origin Resource Sharing policy (CORS).
                        properties:
                          allowCredentials:
                            nullable: true
                            type: boolean
                          allowHeaders:
                            items:
                              format: string
                              type: string
                            type: array
                          allowMethods:
                            description: List of HTTP methods allowed to access the resource.
                            items:
                              format: string
                              type: string
                            type: array
                          allowOrigin:
                            description: The list of origins that are allowed to perform
                              CORS requests.
                            items:
                              format: string
                              type: string
                            type: array
                          exposeHeaders:
                            items:
                              format: string
                              type: string
                            type: array
                          maxAge:
                            type: string
                        type: object
                      fault:
                        description: Fault injection policy to apply on HTTP traffic at
                          the client side.
                        properties:
                          abort:
                            oneOf:
                            - properties:
                                percent: {}
                              required:
                              - httpStatus
                            - properties:
                                percent: {}
                              required:
                              - grpcStatus
                            - properties:
                                percent: {}
                              required:
                              - http2Error
                            properties:
                              grpcStatus:
                                format: string
                                type: string
                              http2Error:
                                format: string
                                type: string
                              httpStatus:
                                description: HTTP status code to use to abort the Http
                                  request.
                                format: int32
                                type: integer
                              percent:
                                description: Percentage of requests to be aborted with
                                  the error code provided (0-100).
                                format: int32
                                type: integer
                              percentage:
                                description: Percentage of requests to be aborted with
                                  the error code provided.
                                properties:
                                  value:
                                    format: double
                                    type: number
                                type: object
                            type: object
                          delay:
                            oneOf:
                            - properties:
                                percent: {}
                              required:
                              - fixedDelay
                            - properties:
                                percent: {}
                              required:
                              - exponentialDelay
                            properties:
                              exponentialDelay:
                                type: string
                              fixedDelay:
                                description: Add a fixed delay before forwarding the request.
                                type: string
                              percent:
                                description: Percentage of requests on which the delay
                                  will be injected (0-100).
                                format: int32
                                type: integer
                              percentage:
                                description: Percentage of requests on which the delay
                                  will be injected.
                                properties:
                                  value:
                                    format: double
                                    type: number
                                type: object
                            type: object
                        type: object
                      headers:
                        properties:
                          request:
                            properties:
                              add:
                                additionalProperties:
                                  format: string
                                  type: string
                                type: object
                              remove:
                                items:
                                  format: string
                                  type: string
                                type: array
                              set:
                                additionalProperties:
                                  format: string
                                  type: string
                                type: object
                            type: object
                          response:
                            properties:
                              add:
                                additionalProperties:
                                  format: string
                                  type: string
                                type: object
                              remove:
                                items:
                                  format: string
                                  type: string
                                type: array
                              set:
                                additionalProperties:
                                  format: string
                                  type: string
                                type: object
                            type: object
                        type: object
                      match:
                        items:
                          properties:
                            authority:
                              oneOf:
                              - required:
                                - exact
                              - required:
                                - prefix
                              - required:
                                - regex
                              properties:
                                exact:
                                  format: string
                                  type: string
                                prefix:
                                  format: string
                                  type: string
                                regex:
                                  format: string
                                  type: string
                              type: object
                            gateways:
                              items:
                                format: string
                                type: string
                              type: array
                            headers:
                              additionalProperties:
                                oneOf:
                                - required:
                                  - exact
                                - required:
                                  - prefix
                                - required:
                                  - regex
                                properties:
                                  exact:
                                    format: string
                                    type: string
                                  prefix:
                                    format: string
                                    type: string
                                  regex:
                                    format: string
                                    type: string
                                type: object
                              type: object
                            ignoreUriCase:
                              description: Flag to specify whether the URI matching should
                                be case-insensitive.
                              type: boolean
                            method:
                              oneOf:
                              - required:
                                - exact
                              - required:
                                - prefix
                              - required:
                                - regex
                              properties:
                                exact:
                                  format: string
                                  type: string
                                prefix:
                                  format: string
                                  type: string
                                regex:
                                  format: string
                                  type: string
                              type: object
                            name:
                              description: The name assigned to a match.
                              format: string
                              type: string
                            port:
                              description: Specifies the ports on the host that is being
                                addressed.
                              type: integer
                            queryParams:
                              additionalProperties:
                                oneOf:
                                - required:
                                  - exact
                                - required:
                                  - prefix
                                - required:
                                  - regex
                                properties:
                                  exact:
                                    format: string
                                    type: string
                                  prefix:
                                    format: string
                                    type: string
                                  regex:
                                    format: string
                                    type: string
                                type: object
                              description: Query parameters for matching.
                              type: object
                            scheme:
                              oneOf:
                              - required:
                                - exact
                              - required:
                                - prefix
                              - required:
                                - regex
                              properties:
                                exact:
                                  format: string
                                  type: string
                                prefix:
                                  format: string
                                  type: string
                                regex:
                                  format: string
                                  type: string
                              type: object
                            sourceLabels:
                              additionalProperties:
                                format: string
                                type: string
                              type: object
                            uri:
                              oneOf:
                              - required:
                                - exact
                              - required:
                                - prefix
                              - required:
                                - regex
                              properties:
                                exact:
                                  format: string
                                  type: string
                                prefix:
                                  format: string
                                  type: string
                                regex:
                                  format: string
                                  type: string
                              type: object
                          type: object
                        type: array
                      mirror:
                        properties:
                          host:
                            description: The name of a service from the service registry.
                            format: string
                            type: string
                          port:
                            description: Specifies the port on the host that is being
                              addressed.
                            properties:
                              number:
                                type: integer
                            type: object
                          subset:
                            description: The name of a subset within the service.
                            format: string
                            type: string
                        type: object
                      mirror_percent:
                        description: Percentage of the traffic to be mirrored by the `mirror`
                          field.
                        nullable: true
                        type: integer
                      mirrorPercent:
                        description: Percentage of the traffic to be mirrored by the `mirror`
                          field.
                        nullable: true
                        type: integer
                      name:
                        description: The name assigned to the route for debugging purposes.
                        format: string
                        type: string
                      redirect:
                        description: A http rule can either redirect or forward (default)
                          traffic.
                        properties:
                          authority:
                            format: string
                            type: string
                          redirectCode:
                            type: integer
                          uri:
                            format: string
                            type: string
                        type: object
                      removeRequestHeaders:
                        items:
                          format: string
                          type: string
                        type: array
                      removeResponseHeaders:
                        items:
                          format: string
                          type: string
                        type: array
                      retries:
                        description: Retry policy for HTTP requests.
                        properties:
                          attempts:
                            description: Number of retries for a given request.
                            format: int32
                            type: integer
                          perTryTimeout:
                            description: Timeout per retry attempt for a given request.
                            type: string
                          retryOn:
                            description: Specifies the conditions under which retry takes
                              place.
                            format: string
                            type: string
                        type: object
                      rewrite:
                        description: Rewrite HTTP URIs and Authority headers.
                        properties:
                          authority:
                            description: rewrite the Authority/Host header with this value.
                            format: string
                            type: string
                          uri:
                            format: string
                            type: string
                        type: object
                      route:
                        description: A http rule can either redirect or forward (default)
                          traffic.
                        items:
                          properties:
                            appendRequestHeaders:
                              additionalProperties:
                                format: string
                                type: string
                              description: Use of `append_request_headers` is deprecated.
                              type: object
                            appendResponseHeaders:
                              additionalProperties:
                                format: string
                                type: string
                              description: Use of `append_response_headers` is deprecated.
                              type: object
                            destination:
                              properties:
                                host:
                                  description: The name of a service from the service
                                    registry.
                                  format: string
                                  type: string
                                port:
                                  description: Specifies the port on the host that is
                                    being addressed.
                                  properties:
                                    number:
                                      type: integer
                                  type: object
                                subset:
                                  description: The name of a subset within the service.
                                  format: string
                                  type: string
                              type: object
                            headers:
                              properties:
                                request:
                                  properties:
                                    add:
                                      additionalProperties:
                                        format: string
                                        type: string
                                      type: object
                                    remove:
                                      items:
                                        format: string
                                        type: string
                                      type: array
                                    set:
                                      additionalProperties:
                                        format: string
                                        type: string
                                      type: object
                                  type: object
                                response:
                                  properties:
                                    add:
                                      additionalProperties:
                                        format: string
                                        type: string
                                      type: object
                                    remove:
                                      items:
                                        format: string
                                        type: string
                                      type: array
                                    set:
                                      additionalProperties:
                                        format: string
                                        type: string
                                      type: object
                                  type: object
                              type: object
                            removeRequestHeaders:
                              description: Use of `remove_request_headers` is deprecated.
                              items:
                                format: string
                                type: string
                              type: array
                            removeResponseHeaders:
                              description: Use of `remove_response_header` is deprecated.
                              items:
                                format: string
                                type: string
                              type: array
                            weight:
                              format: int32
                              type: integer
                          type: object
                        type: array
                      timeout:
                        description: Timeout for HTTP requests.
                        type: string
                      websocketUpgrade:
                        description: Deprecated.
                        type: boolean
                    type: object
                  type: array
                tcp:
                  description: An ordered list of route rules for opaque TCP traffic.
                  items:
                    properties:
                      match:
                        items:
                          properties:
                            destinationSubnets:
                              description: IPv4 or IPv6 ip addresses of destination with
                                optional subnet.
                              items:
                                format: string
                                type: string
                              type: array
                            gateways:
                              description: Names of gateways where the rule should be
                                applied to.
                              items:
                                format: string
                                type: string
                              type: array
                            port:
                              description: Specifies the port on the host that is being
                                addressed.
                              type: integer
                            sourceLabels:
                              additionalProperties:
                                format: string
                                type: string
                              type: object
                            sourceSubnet:
                              description: IPv4 or IPv6 ip address of source with optional
                                subnet.
                              format: string
                              type: string
                          type: object
                        type: array
                      route:
                        description: The destination to which the connection should be
                          forwarded to.
                        items:
                          properties:
                            destination:
                              properties:
                                host:
                                  description: The name of a service from the service
                                    registry.
                                  format: string
                                  type: string
                                port:
                                  description: Specifies the port on the host that is
                                    being addressed.
                                  properties:
                                    number:
                                      type: integer
                                  type: object
                                subset:
                                  description: The name of a subset within the service.
                                  format: string
                                  type: string
                              type: object
                            weight:
                              format: int32
                              type: integer
                          type: object
                        type: array
                    type: object
                  type: array
                tls:
                  items:
                    properties:
                      match:
                        items:
                          properties:
                            destinationSubnets:
                              description: IPv4 or IPv6 ip addresses of destination with
                                optional subnet.
                              items:
                                format: string
                                type: string
                              type: array
                            gateways:
                              description: Names of gateways where the rule should be
                                applied to.
                              items:
                                format: string
                                type: string
                              type: array
                            port:
                              description: Specifies the port on the host that is being
                                addressed.
                              type: integer
                            sniHosts:
                              description: SNI (server name indicator) to match on.
                              items:
                                format: string
                                type: string
                              type: array
                            sourceLabels:
                              additionalProperties:
                                format: string
                                type: string
                              type: object
                            sourceSubnet:
                              description: IPv4 or IPv6 ip address of source with optional
                                subnet.
                              format: string
                              type: string
                          type: object
                        type: array
                      route:
                        description: The destination to which the connection should be
                          forwarded to.
                        items:
                          properties:
                            destination:
                              properties:
                                host:
                                  description: The name of a service from the service
                                    registry.
                                  format: string
                                  type: string
                                port:
                                  description: Specifies the port on the host that is
                                    being addressed.
                                  properties:
                                    number:
                                      type: integer
                                  type: object
                                subset:
                                  description: The name of a subset within the service.
                                  format: string
                                  type: string
                              type: object
                            weight:
                              format: int32
                              type: integer
                          type: object
                        type: array
                    type: object
                  type: array
              type: object
          type: object
      versions:
      - name: v1alpha3
        served: true
        storage: true

    ---
kind: ConfigMap
metadata:
  name: istio-crd-all
  namespace: mesh-control-plane
---
apiVersion: v1
data:
  crd-mixer.yaml: |-
    kind: CustomResourceDefinition
    apiVersion: apiextensions.k8s.io/v1beta1
    metadata:
      name: adapters.config.istio.io
      labels:
        app: mixer
        package: adapter
        istio: mixer-adapter
        chart: istio
        heritage: Tiller
        release: istio
      annotations:
        "helm.sh/resource-policy": keep
    spec:
      group: config.istio.io
      names:
        kind: adapter
        plural: adapters
        singular: adapter
        categories:
        - istio-io
        - policy-istio-io
      scope: Namespaced
      subresources:
        status: {}
      versions:
        - name: v1alpha2
          served: true
          storage: true
    ---
    kind: CustomResourceDefinition
    apiVersion: apiextensions.k8s.io/v1beta1
    metadata:
      name: instances.config.istio.io
      labels:
        app: mixer
        package: instance
        istio: mixer-instance
        chart: istio
        heritage: Tiller
        release: istio
      annotations:
        "helm.sh/resource-policy": keep
    spec:
      group: config.istio.io
      names:
        kind: instance
        plural: instances
        singular: instance
        categories:
        - istio-io
        - policy-istio-io
      scope: Namespaced
      subresources:
        status: {}
      versions:
        - name: v1alpha2
          served: true
          storage: true
    ---
    kind: CustomResourceDefinition
    apiVersion: apiextensions.k8s.io/v1beta1
    metadata:
      name: templates.config.istio.io
      labels:
        app: mixer
        package: template
        istio: mixer-template
        chart: istio
        heritage: Tiller
        release: istio
      annotations:
        "helm.sh/resource-policy": keep
    spec:
      group: config.istio.io
      names:
        kind: template
        plural: templates
        singular: template
        categories:
        - istio-io
        - policy-istio-io
      scope: Namespaced
      subresources:
        status: {}
      versions:
        - name: v1alpha2
          served: true
          storage: true
    ---
    kind: CustomResourceDefinition
    apiVersion: apiextensions.k8s.io/v1beta1
    metadata:
      name: handlers.config.istio.io
      labels:
        app: mixer
        package: handler
        istio: mixer-handler
        chart: istio
        heritage: Tiller
        release: istio
      annotations:
        "helm.sh/resource-policy": keep
    spec:
      group: config.istio.io
      names:
        kind: handler
        plural: handlers
        singular: handler
        categories:
        - istio-io
        - policy-istio-io
      scope: Namespaced
      subresources:
        status: {}
      versions:
        - name: v1alpha2
          served: true
          storage: true
    ---
kind: ConfigMap
metadata:
  name: istio-crd-mixer
  namespace: mesh-control-plane
---
apiVersion: v1
data:
  config: |-
    policy: disabled
    alwaysInjectSelector:
      []
    neverInjectSelector:
      []
    template: |-
      rewriteAppHTTPProbe: {{ valueOrDefault .Values.sidecarInjectorWebhook.rewriteAppHTTPProbe false }}
      {{- if or (not .Values.istio_cni.enabled) .Values.global.proxy.enableCoreDump }}
      initContainers:
      {{ if ne (annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode) `NONE` }}
      {{- if not .Values.istio_cni.enabled }}
      - name: istio-init
      {{- if contains "/" .Values.global.proxy_init.image }}
        image: "{{ .Values.global.proxy_init.image }}"
      {{- else }}
        image: "{{ .Values.global.hub }}/{{ .Values.global.proxy_init.image }}:{{ .Values.global.tag }}"
      {{- end }}
        command:
        - "istio-iptables"
        - "-p"
        - "15002"
        - "-z"
        - "15006"
        - "-u"
        - 1337
        - "-m"
        - "{{ annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode }}"
        - "-i"
        - "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeOutboundIPRanges` .Values.global.proxy.includeIPRanges }}"
        - "-x"
        - "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundIPRanges` .Values.global.proxy.excludeIPRanges }}"
        - "-b"
        - "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` `*` }}"
        - "-d"
        - "{{ excludeInboundPort (annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort) (annotation .ObjectMeta `traffic.sidecar.istio.io/excludeInboundPorts` .Values.global.proxy.excludeInboundPorts) }}"
        {{ if or (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/excludeOutboundPorts`) (ne .Values.global.proxy.excludeOutboundPorts "") -}}
        - "-o"
        - "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundPorts` .Values.global.proxy.excludeOutboundPorts }}"
        {{ end -}}
        {{ if (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces`) -}}
        - "-k"
        - "{{ index .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces` }}"
        {{ end -}}
        env:
        - name: DISABLE_REDIRECTION_ON_LOCAL_LOOPBACK
          value: "1"
        imagePullPolicy: "{{ .Values.global.imagePullPolicy }}"
        resources:
          requests:
            cpu: 10m
            memory: 10Mi
          limits:
            cpu: 100m
            memory: 50Mi
        securityContext:
          runAsUser: 0
          runAsNonRoot: false
          capabilities:
            add:
            - NET_ADMIN
          {{- if .Values.global.proxy.privileged }}
          privileged: true
          {{- end }}
        restartPolicy: Always
      {{- end }}
      {{  end -}}
      {{- if eq .Values.global.proxy.enableCoreDump true }}
      - name: enable-core-dump
        args:
        - -c
        - sysctl -w kernel.core_pattern=/var/lib/istio/core.proxy && ulimit -c unlimited
        command:
          - /bin/sh
        image: {{ $.Values.global.proxy.enableCoreDumpImage }}
        imagePullPolicy: IfNotPresent
        resources: {}
        securityContext:
          runAsUser: 0
          runAsNonRoot: false
          privileged: true
      {{ end }}
      {{- end }}
      containers:
      - name: istio-proxy
      {{- if contains "/" (annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.proxy.image) }}
        image: "{{ annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.proxy.image }}"
      {{- else }}
        image: "{{ annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.hub }}/{{ .Values.global.proxy.image }}:{{ .Values.global.tag }}"
      {{- end }}
        ports:
        - containerPort: 15090
          protocol: TCP
          name: http-envoy-prom
        args:
        - proxy
        - sidecar
        - --domain
        - $(POD_NAMESPACE).svc.{{ .Values.global.proxy.clusterDomain }}
        - --configPath
        - "{{ .ProxyConfig.ConfigPath }}"
        - --binaryPath
        - "{{ .ProxyConfig.BinaryPath }}"
        - --serviceCluster
        {{ if ne "" (index .ObjectMeta.Labels "app") -}}
        - "{{ index .ObjectMeta.Labels `app` }}.$(POD_NAMESPACE)"
        {{ else -}}
        - "{{ valueOrDefault .DeploymentMeta.Name `istio-proxy` }}.{{ valueOrDefault .DeploymentMeta.Namespace `default` }}"
        {{ end -}}
        - --drainDuration
        - "{{ formatDuration .ProxyConfig.DrainDuration }}"
        - --parentShutdownDuration
        - "{{ formatDuration .ProxyConfig.ParentShutdownDuration }}"
        - --discoveryAddress
        - "{{ annotation .ObjectMeta `sidecar.istio.io/discoveryAddress` .ProxyConfig.DiscoveryAddress }}"
      {{- if eq .Values.global.proxy.tracer "lightstep" }}
        - --lightstepAddress
        - "{{ .ProxyConfig.GetTracing.GetLightstep.GetAddress }}"
        - --lightstepAccessToken
        - "{{ .ProxyConfig.GetTracing.GetLightstep.GetAccessToken }}"
        - --lightstepSecure={{ .ProxyConfig.GetTracing.GetLightstep.GetSecure }}
        - --lightstepCacertPath
        - "{{ .ProxyConfig.GetTracing.GetLightstep.GetCacertPath }}"
      {{- else if eq .Values.global.proxy.tracer "zipkin" }}
        - --zipkinAddress
        - "{{ .ProxyConfig.GetTracing.GetZipkin.GetAddress }}"
      {{- else if eq .Values.global.proxy.tracer "datadog" }}
        - --datadogAgentAddress
        - "{{ .ProxyConfig.GetTracing.GetDatadog.GetAddress }}"
      {{- end }}
      {{- if .Values.global.proxy.logLevel }}
        - --proxyLogLevel={{ .Values.global.proxy.logLevel }}
      {{- end}}
      {{- if .Values.global.proxy.componentLogLevel }}
        - --proxyComponentLogLevel={{ .Values.global.proxy.componentLogLevel }}
      {{- end}}
        - --dnsRefreshRate
        - {{ .Values.global.proxy.dnsRefreshRate }}
        - --connectTimeout
        - "{{ formatDuration .ProxyConfig.ConnectTimeout }}"
      {{- if .Values.global.proxy.envoyStatsd.enabled }}
        - --statsdUdpAddress
        - "{{ .ProxyConfig.StatsdUdpAddress }}"
      {{- end }}
      {{- if .Values.global.proxy.envoyMetricsService.enabled }}
        - --envoyMetricsService
        - '{{ protoToJSON .ProxyConfig.EnvoyMetricsService }}'
      {{- end }}
      {{- if .Values.global.proxy.envoyAccessLogService.enabled }}
        - --envoyAccessLogService
        - '{{ protoToJSON .ProxyConfig.EnvoyAccessLogService }}'
      {{- end }}
        - --proxyAdminPort
        - "{{ .ProxyConfig.ProxyAdminPort }}"
        {{ if gt .ProxyConfig.Concurrency 0 -}}
        - --concurrency
        - "{{ .ProxyConfig.Concurrency }}"
        {{ end -}}
        - --controlPlaneAuthPolicy
        - "{{ annotation .ObjectMeta `sidecar.istio.io/controlPlaneAuthPolicy` .ProxyConfig.ControlPlaneAuthPolicy }}"
      {{- if (ne (annotation .ObjectMeta "status.sidecar.istio.io/port" (valueOrDefault .Values.global.proxy.statusPort 0 )) `0`) }}
        - --statusPort
        - "{{ annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort }}"
      {{- end }}
      {{- if .Values.global.trustDomain }}
        - --trust-domain={{ .Values.global.trustDomain }}
      {{- end }}
        - --controlPlaneBootstrap=false
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_POD_PORTS
          value: |-
            [
            {{- range $index1, $c := .Spec.Containers }}
              {{- range $index2, $p := $c.Ports }}
                {{if or (ne $index1 0) (ne $index2 0)}},{{end}}{{ structToJSON $p }}
              {{- end}}
            {{- end}}
            ]
        - name: ISTIO_META_CLUSTER_ID
          value: "{{ valueOrDefault .Values.global.multiCluster.clusterName `Kubernetes` }}"
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: INSTANCE_IP
          valueFrom:
            fieldRef:
              fieldPath: status.podIP
        - name: SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              fieldPath: spec.serviceAccountName
        {{- if .Values.global.mtls.auto }}
        - name: ISTIO_AUTO_MTLS_ENABLED
          value: "true"
        {{- end }}
      {{- if eq .Values.global.proxy.tracer "datadog" }}
        - name: HOST_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
      {{- if isset .ObjectMeta.Annotations `apm.datadoghq.com/env` }}
      {{- range $key, $value := fromJSON (index .ObjectMeta.Annotations `apm.datadoghq.com/env`) }}
        - name: {{ $key }}
          value: "{{ $value }}"
      {{- end }}
      {{- end }}
      {{- end }}
        - name: ISTIO_META_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_CONFIG_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: SDS_ENABLED
          value: {{ $.Values.global.sds.enabled }}
        - name: ISTIO_META_INTERCEPTION_MODE
          value: "{{ or (index .ObjectMeta.Annotations `sidecar.istio.io/interceptionMode`) .ProxyConfig.InterceptionMode.String }}"
        - name: ISTIO_META_INCLUDE_INBOUND_PORTS
          value: "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` (applicationPorts .Spec.Containers) }}"
        {{- if .Values.global.network }}
        - name: ISTIO_META_NETWORK
          value: "{{ .Values.global.network }}"
        {{- end }}
        {{ if .ObjectMeta.Annotations }}
        - name: ISTIO_METAJSON_ANNOTATIONS
          value: |
                 {{ toJSON .ObjectMeta.Annotations }}
        {{ end }}
        {{ if .ObjectMeta.Labels }}
        - name: ISTIO_METAJSON_LABELS
          value: |
                 {{ toJSON .ObjectMeta.Labels }}
        {{ end }}
        {{- if .DeploymentMeta.Name }}
        - name: ISTIO_META_WORKLOAD_NAME
          value: {{ .DeploymentMeta.Name }}
        {{ end }}
        {{- if and .TypeMeta.APIVersion .DeploymentMeta.Name }}
        - name: ISTIO_META_OWNER
          value: kubernetes://apis/{{ .TypeMeta.APIVersion }}/namespaces/{{ valueOrDefault .DeploymentMeta.Namespace `default` }}/{{ toLower .TypeMeta.Kind}}s/{{ .DeploymentMeta.Name }}
         {{- end}}
        {{- if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}
        - name: ISTIO_BOOTSTRAP_OVERRIDE
          value: "/etc/istio/custom-bootstrap/custom_bootstrap.json"
        {{- end }}
        {{- if .Values.global.sds.customTokenDirectory }}
        - name: ISTIO_META_SDS_TOKEN_PATH
          value: "{{ .Values.global.sds.customTokenDirectory -}}/sdstoken"
        {{- end }}
        {{- if .Values.global.meshID }}
        - name: ISTIO_META_MESH_ID
          value: "{{ .Values.global.meshID }}"
        {{- else if .Values.global.trustDomain }}
        - name: ISTIO_META_MESH_ID
          value: "{{ .Values.global.trustDomain }}"
        {{- end }}
        {{- if eq .Values.global.proxy.tracer "stackdriver" }}
        - name: STACKDRIVER_TRACING_ENABLED
          value: "true"
        - name: STACKDRIVER_TRACING_DEBUG
          value: "{{ .ProxyConfig.GetTracing.GetStackdriver.GetDebug }}"
        {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAnnotations }}
        - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_ANNOTATIONS
          value: "{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAnnotations }}"
        {{- end }}
        {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAttributes }}
        - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_ATTRIBUTES
          value: "{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAttributes }}"
        {{- end }}
        {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfMessageEvents }}
        - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_MESSAGE_EVENTS
          value: "{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfMessageEvents }}"
        {{- end }}
        {{- end }}
        ###
        # Start metadata fields used by switchboard for building metric tags.
        ###
        - name: ISTIO_META_hostname
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_namespace
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: ISTIO_META_kubernetes_cluster_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.labels['cluster']
        ###
        # End metadata fields used by switchboard for building metric tags.
        ###
        ###
        # Start metadata fields for configuring sidecar metrics.
        ###
        # We currently want to include all envoy metrics, so the inclusion list includes all known prefixes.
        - name: ISTIO_METAJSON_METRICS_INCLUSIONS
          value: "{\"sidecar.istio.io/statsInclusionPrefixes\": \"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\"}"
        ###
        # End metadata fields for configuring sidecar metrics.
        ###
        ###
        # Start metadata fields for configuring cert paths.
        ###
        - name: ISTIO_META_TLS_CLIENT_CERT_CHAIN
          value: /client-certs/client/certificates/client.pem
        - name: ISTIO_META_TLS_CLIENT_KEY
          value: /client-certs/client/keys/client-key.pem
        - name: ISTIO_META_TLS_CLIENT_ROOT_CERT
          value: /client-certs/ca.pem
        - name: ISTIO_META_TLS_SERVER_CERT_CHAIN
          value: /server-certs/server/certificates/server.pem
        - name: ISTIO_META_TLS_SERVER_KEY
          value: /server-certs/server/keys/server-key.pem
        - name: ISTIO_META_TLS_SERVER_ROOT_CERT
          value: /server-certs/ca.pem
        ###
        # End metadata fields for configuring cert paths.
        ###
        imagePullPolicy: {{ .Values.global.imagePullPolicy }}
        {{ if ne (annotation .ObjectMeta `status.sidecar.istio.io/port` (valueOrDefault .Values.global.proxy.statusPort 0 )) `0` }}
        readinessProbe:
          httpGet:
            path: /healthz/ready
            port: {{ annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort }}
          initialDelaySeconds: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/initialDelaySeconds` .Values.global.proxy.readinessInitialDelaySeconds }}
          periodSeconds: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/periodSeconds` .Values.global.proxy.readinessPeriodSeconds }}
          failureThreshold: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/failureThreshold` .Values.global.proxy.readinessFailureThreshold }}
        {{ end -}}
        securityContext:
          {{- if .Values.global.proxy.privileged }}
          privileged: true
          {{- end }}
          {{- if ne .Values.global.proxy.enableCoreDump true }}
          readOnlyRootFilesystem: true
          {{- end }}
          {{ if eq (annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode) `TPROXY` -}}
          capabilities:
            add:
            - NET_ADMIN
          runAsGroup: 1337
          {{ else -}}
          {{ if .Values.global.sds.enabled }}
          runAsGroup: 1337
          {{- end }}
          runAsUser: 1337
          {{- end }}
        resources:
          {{ if or (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU`) (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory`) -}}
          requests:
            {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU`) -}}
            cpu: "{{ index .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU` }}"
            {{ end}}
            {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory`) -}}
            memory: "{{ index .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory` }}"
            {{ end }}
        {{ else -}}
      {{- if .Values.global.proxy.resources }}
          {{ toYaml .Values.global.proxy.resources | indent 4 }}
      {{- end }}
        {{  end -}}
        volumeMounts:
        {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}
        - mountPath: /etc/istio/custom-bootstrap
          name: custom-bootstrap-volume
        {{- end }}
        - mountPath: /etc/istio/proxy
          name: istio-envoy
        {{- if .Values.global.sds.enabled }}
        - mountPath: /var/run/sds
          name: sds-uds-path
          readOnly: true
        - mountPath: /var/run/secrets/tokens
          name: istio-token
        {{- if .Values.global.sds.customTokenDirectory }}
        - mountPath: "{{ .Values.global.sds.customTokenDirectory -}}"
          name: custom-sds-token
          readOnly: true
        {{- end }}
        {{- else }}
        - mountPath: /client-certs
          name: tls-client-cert
        - mountPath: /server-certs
          name: tls-server-cert
        {{- end }}
        {{- if and (eq .Values.global.proxy.tracer "lightstep") .Values.global.tracer.lightstep.cacertPath }}
        - mountPath: {{ directory .ProxyConfig.GetTracing.GetLightstep.GetCacertPath }}
          name: lightstep-certs
          readOnly: true
        {{- end }}
          {{- if isset .ObjectMeta.Annotations `sidecar.istio.io/userVolumeMount` }}
          {{ range $index, $value := fromJSON (index .ObjectMeta.Annotations `sidecar.istio.io/userVolumeMount`) }}
        - name: "{{  $index }}"
          {{ toYaml $value | indent 4 }}
          {{ end }}
          {{- end }}
      volumes:
      {{- if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}
      - name: custom-bootstrap-volume
        configMap:
          name: {{ annotation .ObjectMeta `sidecar.istio.io/bootstrapOverride` "" }}
      {{- end }}
      - emptyDir:
          medium: Memory
        name: istio-envoy
      {{- if .Values.global.sds.enabled }}
      - name: sds-uds-path
        hostPath:
          path: /var/run/sds
      - name: istio-token
        projected:
          sources:
            - serviceAccountToken:
                path: istio-token
                expirationSeconds: 43200
                audience: {{ .Values.global.sds.token.aud }}
      {{- if .Values.global.sds.customTokenDirectory }}
      - name: custom-sds-token
        secret:
          secretName: sdstokensecret
      {{- end }}
      {{- else }}
        {{- if isset .ObjectMeta.Annotations `sidecar.istio.io/userVolume` }}
        {{range $index, $value := fromJSON (index .ObjectMeta.Annotations `sidecar.istio.io/userVolume`) }}
      - name: "{{ $index }}"
        {{ toYaml $value | indent 2 }}
        {{ end }}
        {{ end }}
      {{- end }}
      {{- if and (eq .Values.global.proxy.tracer "lightstep") .Values.global.tracer.lightstep.cacertPath }}
      - name: lightstep-certs
        secret:
          optional: true
          secretName: lightstep.cacert
      {{- end }}
      {{- if .Values.global.podDNSSearchNamespaces }}
      dnsConfig:
        searches:
          {{- range .Values.global.podDNSSearchNamespaces }}
          - {{ render . }}
          {{- end }}
      {{- end }}
      podRedirectAnnot:
         sidecar.istio.io/interceptionMode: "{{ annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode }}"
         traffic.sidecar.istio.io/includeOutboundIPRanges: "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeOutboundIPRanges` .Values.global.proxy.includeIPRanges }}"
         traffic.sidecar.istio.io/excludeOutboundIPRanges: "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundIPRanges` .Values.global.proxy.excludeIPRanges }}"
         traffic.sidecar.istio.io/includeInboundPorts: "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` (includeInboundPorts .Spec.Containers) }}"
         traffic.sidecar.istio.io/excludeInboundPorts: "{{ excludeInboundPort (annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort) (annotation .ObjectMeta `traffic.sidecar.istio.io/excludeInboundPorts` .Values.global.proxy.excludeInboundPorts) }}"
      {{ if or (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/excludeOutboundPorts`) (ne .Values.global.proxy.excludeOutboundPorts "") }}
         traffic.sidecar.istio.io/excludeOutboundPorts: "{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundPorts` .Values.global.proxy.excludeOutboundPorts }}"
      {{- end }}
         traffic.sidecar.istio.io/kubevirtInterfaces: "{{ index .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces` }}"
  values: '{"automountServiceAccountToken":true,"certmanager":{"enabled":false},"createServiceAccount":true,"galley":{"enabled":false},"gateways":{"enabled":true,"global":{"arch":{"amd64":2,"ppc64le":2,"s390x":2},"certificates":[],"configValidation":false,"controlPlaneSecurityEnabled":true,"customCertificates":{"ca":{"certPath":"cacerts.pem","mountPath":"/etc/identity/ca","volumeName":"ca"},"client":{"certPath":"certificates/client.pem","keyPath":"keys/client-key.pem","mountPath":"/etc/identity/client","volumeName":"clientcert"},"enabled":true,"server":{"certPath":"certificates/server.pem","keyPath":"keys/server-key.pem","mountPath":"/etc/identity/server","volumeName":"servercert"}},"defaultNodeSelector":{},"defaultPodDisruptionBudget":{"enabled":false},"defaultResources":{"requests":{"cpu":"10m"}},"defaultTolerations":[],"disablePolicyChecks":true,"enableHelmTest":false,"enableTracing":false,"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging","imagePullPolicy":"IfNotPresent","imagePullSecrets":null,"istioNamespace":"mesh-control-plane","k8sIngress":{"enableHttps":false,"enabled":false,"gatewayName":"ingressgateway"},"localityLbSetting":{"enabled":true},"logging":{"level":"default:warn"},"meshExpansion":{"enabled":false,"useILB":false},"meshID":"","meshNetworks":{},"metricsScraper":{"enabled":true,"funnel":{"host":"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net","port":7442},"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper","resources":{"limits":{"cpu":"2000m","memory":"2048Mi"},"requests":{"cpu":"100m","memory":"512Mi"}},"tag":"4749a2d1bcb74c2325daf80e4bb0ba80724316f9"},"monitoringPort":15014,"mtls":{"auto":true,"enabled":false},"multiCluster":{"clusterName":"","enabled":false},"network":"","oneNamespace":false,"operatorManageWebhooks":false,"outboundTrafficPolicy":{"mode":"ALLOW_ANY"},"policyCheckFailOpen":false,"priorityClassName":"","proxy":{"accessLogEncoding":"TEXT","accessLogFile":"/dev/stdout","accessLogFormat":"","adminPort":15373,"autoInject":"disabled","clusterDomain":"cluster.local","componentLogLevel":"","concurrency":0,"dnsRefreshRate":"300s","enableCoreDump":false,"enableCoreDumpImage":"ubuntu:xenial","env":{"ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem"},"envoyAccessLogService":{"enabled":false,"host":null,"port":null,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":null,"clientCertificate":null,"mode":"DISABLE","privateKey":null,"sni":null,"subjectAltNames":[]}},"envoyMetricsService":{"enabled":true,"host":"metrics-service.service-mesh","port":15001,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":"/etc/identity/ca/cacerts.pem","clientCertificate":"/etc/identity/client/certificates/client.pem","mode":"MUTUAL","privateKey":"/etc/identity/client/keys/client-key.pem","sni":null,"subjectAltNames":[]}},"envoyStatsd":{"enabled":false,"host":null,"port":null},"excludeIPRanges":"","excludeInboundPorts":"","excludeOutboundPorts":"","image":"proxy","includeIPRanges":"127.1.2.3/32","includeInboundPorts":"*","init":{"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"10m","memory":"10Mi"}}},"kubevirtInterfaces":"","listenPort":15002,"logLevel":"info","privileged":false,"protocolDetectionTimeout":"100ms","readinessFailureThreshold":30,"readinessInitialDelaySeconds":1,"readinessPeriodSeconds":2,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"statusPort":15020,"tracer":"zipkin"},"proxy_init":{"image":"proxy"},"sds":{"enabled":false,"token":{"aud":"istio-ca"},"udsPath":"","useNormalJwt":false,"useTrustworthyJwt":false},"securityContext":{"fsGroup":7447,"runAsNonRoot":true,"runAsUser":7447},"tag":"4560429101a9e635e4fa9e5d5f14feae98c17d20","tracer":{"datadog":{"address":"$(HOST_IP):8126"},"lightstep":{"accessToken":"","address":"","cacertPath":"","secure":true},"stackdriver":{"debug":false,"maxNumberOfAnnotations":200,"maxNumberOfAttributes":200,"maxNumberOfMessageEvents":200},"zipkin":{"address":""}},"trustDomain":"","trustDomainAliases":[],"useMCP":false},"istio-egressgateway":{"autoscaleEnabled":true,"autoscaleMax":5,"autoscaleMin":1,"cpu":{"targetAverageUtilization":80},"enabled":false,"env":{"ISTIO_META_ROUTER_MODE":"standard"},"labels":{"app":"istio-egressgateway","istio":"egressgateway"},"nodeSelector":{},"podAnnotations":{},"podAntiAffinityLabelSelector":[],"podAntiAffinityTermLabelSelector":[],"ports":[{"name":"http2","port":80},{"name":"https","port":443},{"name":"tls","port":15443,"targetPort":15443}],"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","secretVolumes":[{"mountPath":"/etc/istio/egressgateway-certs","name":"egressgateway-certs","secretName":"istio-egressgateway-certs"},{"mountPath":"/etc/istio/egressgateway-ca-certs","name":"egressgateway-ca-certs","secretName":"istio-egressgateway-ca-certs"}],"serviceAnnotations":{},"tolerations":[],"type":"ClusterIP"},"istio-ilbgateway":{"autoscaleEnabled":true,"autoscaleMax":5,"autoscaleMin":1,"cpu":{"targetAverageUtilization":80},"enabled":false,"labels":{"app":"istio-ilbgateway","istio":"ilbgateway"},"loadBalancerIP":"","nodeSelector":{},"podAnnotations":{},"ports":[{"name":"grpc-pilot-mtls","port":15011},{"name":"grpc-pilot","port":15010},{"name":"tcp-citadel-grpc-tls","port":8060,"targetPort":8060},{"name":"tcp-dns","port":5353}],"resources":{"requests":{"cpu":"800m","memory":"512Mi"}},"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","secretVolumes":[{"mountPath":"/etc/istio/ilbgateway-certs","name":"ilbgateway-certs","secretName":"istio-ilbgateway-certs"},{"mountPath":"/etc/istio/ilbgateway-ca-certs","name":"ilbgateway-ca-certs","secretName":"istio-ilbgateway-ca-certs"}],"serviceAnnotations":{"cloud.google.com/load-balancer-type":"internal"},"tolerations":[],"type":"LoadBalancer"},"istio-ingressgateway":{"automountServiceAccountToken":true,"autoscaleEnabled":false,"autoscaleMax":5,"autoscaleMin":1,"cpu":{"targetAverageUtilization":80},"createServiceAccount":true,"enabled":true,"env":{"ESTATE":"updated_by_firebom","ISTIO_BOOTSTRAP":"/var/lib/istio/envoy/envoy_bootstrap_tmpl_sfdc_falcon.json","ISTIO_META_ROUTER_MODE":"standard","ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem","SETTINGS_PATH":"updated_by_firebom","SETTINGS_SUPERPOD":"-"},"externalIPs":[],"labels":{"app":"istio-ingressgateway","istio":"ingressgateway"},"loadBalancerIP":"","loadBalancerSourceRanges":[],"meshExpansionPorts":[{"name":"tcp-pilot-grpc-tls","port":15011,"targetPort":15011},{"name":"tcp-mixer-grpc-tls","port":15004,"targetPort":15004},{"name":"tcp-citadel-grpc-tls","port":8060,"targetPort":8060},{"name":"tcp-dns-tls","port":853,"targetPort":853}],"nodeSelector":{},"podAnnotations":{},"podAntiAffinityLabelSelector":[],"podAntiAffinityTermLabelSelector":[],"ports":[{"name":"https-core-443","port":443},{"name":"https-core-8443","port":8443},{"name":"https-core-8085","port":8085},{"name":"tcp-core-2525","port":2525}],"replicaCount":1,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","sds":{"enabled":false,"image":"node-agent-k8s","resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}}},"secretVolumes":[],"serviceAccountName":"istio-ingressgateway-service-account","serviceAnnotations":{"service.beta.kubernetes.io/aws-load-balancer-type":"nlb"},"tolerations":[],"type":"LoadBalancer"}},"global":{"arch":{"amd64":2,"ppc64le":2,"s390x":2},"certificates":[],"configValidation":false,"controlPlaneSecurityEnabled":true,"customCertificates":{"ca":{"certPath":"cacerts.pem","mountPath":"/etc/identity/ca","volumeName":"ca"},"client":{"certPath":"certificates/client.pem","keyPath":"keys/client-key.pem","mountPath":"/etc/identity/client","volumeName":"clientcert"},"enabled":true,"server":{"certPath":"certificates/server.pem","keyPath":"keys/server-key.pem","mountPath":"/etc/identity/server","volumeName":"servercert"}},"defaultNodeSelector":{},"defaultPodDisruptionBudget":{"enabled":false},"defaultResources":{"requests":{"cpu":"10m"}},"defaultTolerations":[],"disablePolicyChecks":true,"enableHelmTest":false,"enableTracing":false,"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging","imagePullPolicy":"IfNotPresent","imagePullSecrets":null,"istioNamespace":"mesh-control-plane","k8sIngress":{"enableHttps":false,"enabled":false,"gatewayName":"ingressgateway"},"localityLbSetting":{"enabled":true},"logging":{"level":"default:warn"},"meshExpansion":{"enabled":false,"useILB":false},"meshID":"","meshNetworks":{},"metricsScraper":{"enabled":true,"funnel":{"host":"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net","port":7442},"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper","resources":{"limits":{"cpu":"2000m","memory":"2048Mi"},"requests":{"cpu":"100m","memory":"512Mi"}},"tag":"4749a2d1bcb74c2325daf80e4bb0ba80724316f9"},"monitoringPort":15014,"mtls":{"auto":true,"enabled":false},"multiCluster":{"clusterName":"","enabled":false},"network":"","oneNamespace":false,"operatorManageWebhooks":false,"outboundTrafficPolicy":{"mode":"ALLOW_ANY"},"policyCheckFailOpen":false,"priorityClassName":"","proxy":{"accessLogEncoding":"TEXT","accessLogFile":"/dev/stdout","accessLogFormat":"","adminPort":15373,"autoInject":"disabled","clusterDomain":"cluster.local","componentLogLevel":"","concurrency":0,"dnsRefreshRate":"300s","enableCoreDump":false,"enableCoreDumpImage":"ubuntu:xenial","env":{"ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem"},"envoyAccessLogService":{"enabled":false,"host":null,"port":null,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":null,"clientCertificate":null,"mode":"DISABLE","privateKey":null,"sni":null,"subjectAltNames":[]}},"envoyMetricsService":{"enabled":true,"host":"metrics-service.service-mesh","port":15001,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":"/etc/identity/ca/cacerts.pem","clientCertificate":"/etc/identity/client/certificates/client.pem","mode":"MUTUAL","privateKey":"/etc/identity/client/keys/client-key.pem","sni":null,"subjectAltNames":[]}},"envoyStatsd":{"enabled":false,"host":null,"port":null},"excludeIPRanges":"","excludeInboundPorts":"","excludeOutboundPorts":"","image":"proxy","includeIPRanges":"127.1.2.3/32","includeInboundPorts":"*","init":{"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"10m","memory":"10Mi"}}},"kubevirtInterfaces":"","listenPort":15002,"logLevel":"info","privileged":false,"protocolDetectionTimeout":"100ms","readinessFailureThreshold":30,"readinessInitialDelaySeconds":1,"readinessPeriodSeconds":2,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"statusPort":15020,"tracer":"zipkin"},"proxy_init":{"image":"proxy"},"sds":{"enabled":false,"token":{"aud":"istio-ca"},"udsPath":"","useNormalJwt":false,"useTrustworthyJwt":false},"securityContext":{"fsGroup":7447,"runAsNonRoot":true,"runAsUser":7447},"tag":"4560429101a9e635e4fa9e5d5f14feae98c17d20","tracer":{"datadog":{"address":"$(HOST_IP):8126"},"lightstep":{"accessToken":"","address":"","cacertPath":"","secure":true},"stackdriver":{"debug":false,"maxNumberOfAnnotations":200,"maxNumberOfAttributes":200,"maxNumberOfMessageEvents":200},"zipkin":{"address":""}},"trustDomain":"","trustDomainAliases":[],"useMCP":false},"grafana":{"enabled":false},"istio_cni":{"enabled":false},"istiocoredns":{"enabled":false},"kiali":{"enabled":false},"mixer":{"adapters":{"kubernetesenv":{"enabled":true},"prometheus":{"enabled":true,"metricsExpiryDuration":"10m"},"stdio":{"enabled":false,"outputAsJson":true},"useAdapterCRDs":false},"enabled":false,"env":{"GOMAXPROCS":"6"},"global":{"arch":{"amd64":2,"ppc64le":2,"s390x":2},"certificates":[],"configValidation":false,"controlPlaneSecurityEnabled":true,"customCertificates":{"ca":{"certPath":"cacerts.pem","mountPath":"/etc/identity/ca","volumeName":"ca"},"client":{"certPath":"certificates/client.pem","keyPath":"keys/client-key.pem","mountPath":"/etc/identity/client","volumeName":"clientcert"},"enabled":true,"server":{"certPath":"certificates/server.pem","keyPath":"keys/server-key.pem","mountPath":"/etc/identity/server","volumeName":"servercert"}},"defaultNodeSelector":{},"defaultPodDisruptionBudget":{"enabled":false},"defaultResources":{"requests":{"cpu":"10m"}},"defaultTolerations":[],"disablePolicyChecks":true,"enableHelmTest":false,"enableTracing":false,"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging","imagePullPolicy":"IfNotPresent","imagePullSecrets":null,"istioNamespace":"mesh-control-plane","k8sIngress":{"enableHttps":false,"enabled":false,"gatewayName":"ingressgateway"},"localityLbSetting":{"enabled":true},"logging":{"level":"default:warn"},"meshExpansion":{"enabled":false,"useILB":false},"meshID":"","meshNetworks":{},"metricsScraper":{"enabled":true,"funnel":{"host":"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net","port":7442},"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper","resources":{"limits":{"cpu":"2000m","memory":"2048Mi"},"requests":{"cpu":"100m","memory":"512Mi"}},"tag":"4749a2d1bcb74c2325daf80e4bb0ba80724316f9"},"monitoringPort":15014,"mtls":{"auto":true,"enabled":false},"multiCluster":{"clusterName":"","enabled":false},"network":"","oneNamespace":false,"operatorManageWebhooks":false,"outboundTrafficPolicy":{"mode":"ALLOW_ANY"},"policyCheckFailOpen":false,"priorityClassName":"","proxy":{"accessLogEncoding":"TEXT","accessLogFile":"/dev/stdout","accessLogFormat":"","adminPort":15373,"autoInject":"disabled","clusterDomain":"cluster.local","componentLogLevel":"","concurrency":0,"dnsRefreshRate":"300s","enableCoreDump":false,"enableCoreDumpImage":"ubuntu:xenial","env":{"ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem"},"envoyAccessLogService":{"enabled":false,"host":null,"port":null,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":null,"clientCertificate":null,"mode":"DISABLE","privateKey":null,"sni":null,"subjectAltNames":[]}},"envoyMetricsService":{"enabled":true,"host":"metrics-service.service-mesh","port":15001,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":"/etc/identity/ca/cacerts.pem","clientCertificate":"/etc/identity/client/certificates/client.pem","mode":"MUTUAL","privateKey":"/etc/identity/client/keys/client-key.pem","sni":null,"subjectAltNames":[]}},"envoyStatsd":{"enabled":false,"host":null,"port":null},"excludeIPRanges":"","excludeInboundPorts":"","excludeOutboundPorts":"","image":"proxy","includeIPRanges":"127.1.2.3/32","includeInboundPorts":"*","init":{"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"10m","memory":"10Mi"}}},"kubevirtInterfaces":"","listenPort":15002,"logLevel":"info","privileged":false,"protocolDetectionTimeout":"100ms","readinessFailureThreshold":30,"readinessInitialDelaySeconds":1,"readinessPeriodSeconds":2,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"statusPort":15020,"tracer":"zipkin"},"proxy_init":{"image":"proxy"},"sds":{"enabled":false,"token":{"aud":"istio-ca"},"udsPath":"","useNormalJwt":false,"useTrustworthyJwt":false},"securityContext":{"fsGroup":7447,"runAsNonRoot":true,"runAsUser":7447},"tag":"4560429101a9e635e4fa9e5d5f14feae98c17d20","tracer":{"datadog":{"address":"$(HOST_IP):8126"},"lightstep":{"accessToken":"","address":"","cacertPath":"","secure":true},"stackdriver":{"debug":false,"maxNumberOfAnnotations":200,"maxNumberOfAttributes":200,"maxNumberOfMessageEvents":200},"zipkin":{"address":""}},"trustDomain":"","trustDomainAliases":[],"useMCP":false},"image":"mixer","nodeSelector":{},"podAnnotations":{},"podAntiAffinityLabelSelector":[],"podAntiAffinityTermLabelSelector":[],"policy":{"autoscaleEnabled":true,"autoscaleMax":5,"autoscaleMin":1,"cpu":{"targetAverageUtilization":80},"enabled":false,"replicaCount":1,"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%"},"telemetry":{"autoscaleEnabled":true,"autoscaleMax":5,"autoscaleMin":1,"cpu":{"targetAverageUtilization":80},"enabled":false,"loadshedding":{"latencyThreshold":"100ms","mode":"enforce"},"replicaCount":1,"reportBatchMaxEntries":100,"reportBatchMaxTime":"1s","resources":{"limits":{"cpu":"4800m","memory":"4G"},"requests":{"cpu":"1000m","memory":"1G"}},"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","sessionAffinityEnabled":false},"templates":{"useTemplateCRDs":false},"tolerations":[]},"nodeagent":{"enabled":false},"pilot":{"automountServiceAccountToken":true,"autoscaleEnabled":false,"autoscaleMax":5,"autoscaleMin":1,"configSource":{"subscribedResources":null},"cpu":{"targetAverageUtilization":80},"createServiceAccount":true,"enableProtocolSniffingForInbound":true,"enableProtocolSniffingForOutbound":true,"enabled":true,"env":{"ESTATE":"updated_by_firebom","PILOT_ENABLE_REDIS_FILTER":"true","PILOT_PUSH_THROTTLE":100,"PILOT_SIDECAR_USE_REMOTE_ADDRESS":"true","SETTINGS_PATH":"updated_by_firebom","SETTINGS_SUPERPOD":"-"},"global":{"arch":{"amd64":2,"ppc64le":2,"s390x":2},"certificates":[],"configValidation":false,"controlPlaneSecurityEnabled":true,"customCertificates":{"ca":{"certPath":"cacerts.pem","mountPath":"/etc/identity/ca","volumeName":"ca"},"client":{"certPath":"certificates/client.pem","keyPath":"keys/client-key.pem","mountPath":"/etc/identity/client","volumeName":"clientcert"},"enabled":true,"server":{"certPath":"certificates/server.pem","keyPath":"keys/server-key.pem","mountPath":"/etc/identity/server","volumeName":"servercert"}},"defaultNodeSelector":{},"defaultPodDisruptionBudget":{"enabled":false},"defaultResources":{"requests":{"cpu":"10m"}},"defaultTolerations":[],"disablePolicyChecks":true,"enableHelmTest":false,"enableTracing":false,"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging","imagePullPolicy":"IfNotPresent","imagePullSecrets":null,"istioNamespace":"mesh-control-plane","k8sIngress":{"enableHttps":false,"enabled":false,"gatewayName":"ingressgateway"},"localityLbSetting":{"enabled":true},"logging":{"level":"default:warn"},"meshExpansion":{"enabled":false,"useILB":false},"meshID":"","meshNetworks":{},"metricsScraper":{"enabled":true,"funnel":{"host":"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net","port":7442},"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper","resources":{"limits":{"cpu":"2000m","memory":"2048Mi"},"requests":{"cpu":"100m","memory":"512Mi"}},"tag":"4749a2d1bcb74c2325daf80e4bb0ba80724316f9"},"monitoringPort":15014,"mtls":{"auto":true,"enabled":false},"multiCluster":{"clusterName":"","enabled":false},"network":"","oneNamespace":false,"operatorManageWebhooks":false,"outboundTrafficPolicy":{"mode":"ALLOW_ANY"},"policyCheckFailOpen":false,"priorityClassName":"","proxy":{"accessLogEncoding":"TEXT","accessLogFile":"/dev/stdout","accessLogFormat":"","adminPort":15373,"autoInject":"disabled","clusterDomain":"cluster.local","componentLogLevel":"","concurrency":0,"dnsRefreshRate":"300s","enableCoreDump":false,"enableCoreDumpImage":"ubuntu:xenial","env":{"ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem"},"envoyAccessLogService":{"enabled":false,"host":null,"port":null,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":null,"clientCertificate":null,"mode":"DISABLE","privateKey":null,"sni":null,"subjectAltNames":[]}},"envoyMetricsService":{"enabled":true,"host":"metrics-service.service-mesh","port":15001,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":"/etc/identity/ca/cacerts.pem","clientCertificate":"/etc/identity/client/certificates/client.pem","mode":"MUTUAL","privateKey":"/etc/identity/client/keys/client-key.pem","sni":null,"subjectAltNames":[]}},"envoyStatsd":{"enabled":false,"host":null,"port":null},"excludeIPRanges":"","excludeInboundPorts":"","excludeOutboundPorts":"","image":"proxy","includeIPRanges":"127.1.2.3/32","includeInboundPorts":"*","init":{"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"10m","memory":"10Mi"}}},"kubevirtInterfaces":"","listenPort":15002,"logLevel":"info","privileged":false,"protocolDetectionTimeout":"100ms","readinessFailureThreshold":30,"readinessInitialDelaySeconds":1,"readinessPeriodSeconds":2,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"statusPort":15020,"tracer":"zipkin"},"proxy_init":{"image":"proxy"},"sds":{"enabled":false,"token":{"aud":"istio-ca"},"udsPath":"","useNormalJwt":false,"useTrustworthyJwt":false},"securityContext":{"fsGroup":7447,"runAsNonRoot":true,"runAsUser":7447},"tag":"4560429101a9e635e4fa9e5d5f14feae98c17d20","tracer":{"datadog":{"address":"$(HOST_IP):8126"},"lightstep":{"accessToken":"","address":"","cacertPath":"","secure":true},"stackdriver":{"debug":false,"maxNumberOfAnnotations":200,"maxNumberOfAttributes":200,"maxNumberOfMessageEvents":200},"zipkin":{"address":""}},"trustDomain":"","trustDomainAliases":[],"useMCP":false},"image":"pilot","keepaliveMaxServerConnectionAge":"30m","nodeSelector":{},"podAnnotations":{},"podAntiAffinityLabelSelector":[],"podAntiAffinityTermLabelSelector":[],"replicaCount":1,"resources":{"limits":{"cpu":"2000m","memory":"4096Mi"},"requests":{"cpu":"500m","memory":"2048Mi"}},"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","serviceAccountName":"istio-pilot-service-account","sidecar":true,"tolerations":[],"traceSampling":1},"prometheus":{"enabled":false},"security":{"enabled":false},"serviceAccountName":"istio-multi","sidecarInjectorWebhook":{"alwaysInjectSelector":[],"automountServiceAccountToken":true,"createServiceAccount":true,"enableNamespacesByDefault":false,"enabled":true,"env":{"ESTATE":"updated_by_firebom","SETTINGS_PATH":"updated_by_firebom","SETTINGS_SUPERPOD":"-"},"global":{"arch":{"amd64":2,"ppc64le":2,"s390x":2},"certificates":[],"configValidation":false,"controlPlaneSecurityEnabled":true,"customCertificates":{"ca":{"certPath":"cacerts.pem","mountPath":"/etc/identity/ca","volumeName":"ca"},"client":{"certPath":"certificates/client.pem","keyPath":"keys/client-key.pem","mountPath":"/etc/identity/client","volumeName":"clientcert"},"enabled":true,"server":{"certPath":"certificates/server.pem","keyPath":"keys/server-key.pem","mountPath":"/etc/identity/server","volumeName":"servercert"}},"defaultNodeSelector":{},"defaultPodDisruptionBudget":{"enabled":false},"defaultResources":{"requests":{"cpu":"10m"}},"defaultTolerations":[],"disablePolicyChecks":true,"enableHelmTest":false,"enableTracing":false,"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging","imagePullPolicy":"IfNotPresent","imagePullSecrets":null,"istioNamespace":"mesh-control-plane","k8sIngress":{"enableHttps":false,"enabled":false,"gatewayName":"ingressgateway"},"localityLbSetting":{"enabled":true},"logging":{"level":"default:warn"},"meshExpansion":{"enabled":false,"useILB":false},"meshID":"","meshNetworks":{},"metricsScraper":{"enabled":true,"funnel":{"host":"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net","port":7442},"hub":"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper","resources":{"limits":{"cpu":"2000m","memory":"2048Mi"},"requests":{"cpu":"100m","memory":"512Mi"}},"tag":"4749a2d1bcb74c2325daf80e4bb0ba80724316f9"},"monitoringPort":15014,"mtls":{"auto":true,"enabled":false},"multiCluster":{"clusterName":"","enabled":false},"network":"","oneNamespace":false,"operatorManageWebhooks":false,"outboundTrafficPolicy":{"mode":"ALLOW_ANY"},"policyCheckFailOpen":false,"priorityClassName":"","proxy":{"accessLogEncoding":"TEXT","accessLogFile":"/dev/stdout","accessLogFormat":"","adminPort":15373,"autoInject":"disabled","clusterDomain":"cluster.local","componentLogLevel":"","concurrency":0,"dnsRefreshRate":"300s","enableCoreDump":false,"enableCoreDumpImage":"ubuntu:xenial","env":{"ISTIO_META_TLS_CLIENT_CERT_CHAIN":"/etc/identity/client/certificates/client.pem","ISTIO_META_TLS_CLIENT_KEY":"/etc/identity/client/keys/client-key.pem","ISTIO_META_TLS_CLIENT_ROOT_CERT":"/etc/identity/ca/cacerts.pem","ISTIO_META_TLS_SERVER_CERT_CHAIN":"/etc/identity/server/certificates/server.pem","ISTIO_META_TLS_SERVER_KEY":"/etc/identity/server/keys/server-key.pem","ISTIO_META_TLS_SERVER_ROOT_CERT":"/etc/identity/ca/cacerts.pem"},"envoyAccessLogService":{"enabled":false,"host":null,"port":null,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":null,"clientCertificate":null,"mode":"DISABLE","privateKey":null,"sni":null,"subjectAltNames":[]}},"envoyMetricsService":{"enabled":true,"host":"metrics-service.service-mesh","port":15001,"tcpKeepalive":{"interval":"10s","probes":3,"time":"10s"},"tlsSettings":{"caCertificates":"/etc/identity/ca/cacerts.pem","clientCertificate":"/etc/identity/client/certificates/client.pem","mode":"MUTUAL","privateKey":"/etc/identity/client/keys/client-key.pem","sni":null,"subjectAltNames":[]}},"envoyStatsd":{"enabled":false,"host":null,"port":null},"excludeIPRanges":"","excludeInboundPorts":"","excludeOutboundPorts":"","image":"proxy","includeIPRanges":"127.1.2.3/32","includeInboundPorts":"*","init":{"resources":{"limits":{"cpu":"100m","memory":"50Mi"},"requests":{"cpu":"10m","memory":"10Mi"}}},"kubevirtInterfaces":"","listenPort":15002,"logLevel":"info","privileged":false,"protocolDetectionTimeout":"100ms","readinessFailureThreshold":30,"readinessInitialDelaySeconds":1,"readinessPeriodSeconds":2,"resources":{"limits":{"cpu":"2000m","memory":"1024Mi"},"requests":{"cpu":"100m","memory":"128Mi"}},"statusPort":15020,"tracer":"zipkin"},"proxy_init":{"image":"proxy"},"sds":{"enabled":false,"token":{"aud":"istio-ca"},"udsPath":"","useNormalJwt":false,"useTrustworthyJwt":false},"securityContext":{"fsGroup":7447,"runAsNonRoot":true,"runAsUser":7447},"tag":"4560429101a9e635e4fa9e5d5f14feae98c17d20","tracer":{"datadog":{"address":"$(HOST_IP):8126"},"lightstep":{"accessToken":"","address":"","cacertPath":"","secure":true},"stackdriver":{"debug":false,"maxNumberOfAnnotations":200,"maxNumberOfAttributes":200,"maxNumberOfMessageEvents":200},"zipkin":{"address":""}},"trustDomain":"","trustDomainAliases":[],"useMCP":false},"image":"sidecar_injector","injectedAnnotations":{},"neverInjectSelector":[],"nodeSelector":{},"podAnnotations":{},"podAntiAffinityLabelSelector":[],"podAntiAffinityTermLabelSelector":[],"replicaCount":1,"rewriteAppHTTPProbe":false,"rollingMaxSurge":"100%","rollingMaxUnavailable":"25%","serviceAccountName":"istio-sidecar-injector-service-account","tolerations":[]},"tracing":{"enabled":false}}'
kind: ConfigMap
metadata:
  annotations:
    strategy.spinnaker.io/versioned: "false"
  labels:
    app: istio
    chart: istio
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector
  namespace: mesh-control-plane
---
apiVersion: v1
data:
  mesh: |-
    disablePolicyChecks: false
    enableTracing: true
    accessLogFile: "%(accessLogFile)s"
    accessLogFormat: ""
    accessLogEncoding: 'TEXT'
    ingressService: istio-ingressgateway
    protocolDetectionTimeout: 100ms
    dnsRefreshRate: 300s
    sdsUdsPath:
    enableSdsTokenMount: false
    sdsUseK8sSaJwt: false
    trustDomain:
    outboundTrafficPolicy:
      mode: ALLOW_ANY
    rootNamespace: mesh-control-plane
    proxyListenPort: 15002
    # W-6798525: assigned a random available port to proxyHttpPort so that baremetal proxy can listen on 15002 without any conflicts
    proxyHttpPort: 49150
    inboundClusterStatName: "local_service.%%SERVICE_PORT%%"
    outboundClusterStatName: "%%SERVICE%%.%%SERVICE_PORT%%"
    defaultConfig:
      concurrency: 0
      connectTimeout: 10s
      configPath: "/etc/istio/proxy"
      binaryPath: "/usr/local/bin/envoy"
      serviceCluster: istio-proxy
      drainDuration: 45s
      parentShutdownDuration: 1m0s
      interceptionMode: REDIRECT
      proxyAdminPort: 15373
      tracing:
        zipkin:
          address: zipkindirecttls.funnel.svc.mesh.sfdc.net:7442
      envoyMetricsService:
        address: switchboard.service-mesh:15001
        tlsSettings:
          caCertificates: /client-certs/ca.pem
          clientCertificate: /client-certs/client/certificates/client.pem
          mode: MUTUAL
          privateKey: /client-certs/client/keys/client-key.pem
          sni: null
          subjectAltNames: []
        tcpKeepalive:
          interval: 10s
          probes: 3
          time: 10s
      controlPlaneAuthPolicy: MUTUAL_TLS
      discoveryAddress: istio-pilot.mesh-control-plane:15011
  meshNetworks: 'networks: {}'
kind: ConfigMap
metadata:
  annotations:
    strategy.spinnaker.io/versioned: "false"
  labels:
    app: istio
    chart: istio
    heritage: Tiller
    release: RELEASE-NAME
  name: istio
  namespace: mesh-control-plane
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
    slb.sfdc.net/name: istio-ingressgateway
    slb.sfdc.net/portconfigurations: |-
      [
       {
        "lbtype": "dsr",
        "port": 15008,
        "targetport": 15008
       },
       {
        "lbtype": "dsr",
        "port": 15009,
        "targetport": 15009
       },
       {
        "lbtype": "dsr",
        "port": 8085,
        "targetport": 8085
       },
       {
        "lbtype": "dsr",
        "port": 8443,
        "targetport": 8443
       }
      ]
  labels:
    app: istio-ingressgateway
    chart: gateways
    heritage: Tiller
    istio: ingressgateway
    release: RELEASE-NAME
  name: istio-ingressgateway
  namespace: core-on-sam-sp2
spec:
  ports:
  - name: https-coreapp
    port: 8443
  - name: https-istio-coreapp
    port: 8085
  - name: tcp-coreapp
    port: 2525
  selector:
    app: istio-ingressgateway
    istio: ingressgateway
    release: RELEASE-NAME
  type: LoadBalancer
---
apiVersion: v1
kind: Service
metadata:
  annotations:
    slb.sfdc.net/name: istio-pilot
    slb.sfdc.net/portconfigurations: |-
      [
       {
        "lbtype": "dsr",
        "port": 15010,
        "targetport": 15010
       }
      ]
  labels:
    app: pilot
    chart: pilot
    heritage: Tiller
    istio: pilot
    release: RELEASE-NAME
  name: istio-pilot
  namespace: mesh-control-plane
spec:
  ports:
  - name: grpc-xds
    port: 15010
  - name: https-xds
    port: 15011
  - name: http-legacy-discovery
    port: 8080
  - name: http-monitoring
    port: 15014
  selector:
    istio: pilot
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector
  namespace: mesh-control-plane
spec:
  ports:
  - name: sidecar-injector-port
    port: 443
    targetPort: 15009
  - name: http-monitoring
    port: 15014
  selector:
    istio: sidecar-injector
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: istio-ingressgateway
    chart: gateways
    heritage: Tiller
    istio: ingressgateway
    release: RELEASE-NAME
  name: istio-ingressgateway
  namespace: core-on-sam-sp2
spec:
  replicas: 1
  selector:
    matchLabels:
      app: istio-ingressgateway
      istio: ingressgateway
  strategy:
    rollingUpdate:
      maxSurge: 100%
      maxUnavailable: 25%
  template:
    metadata:
      annotations:
        madkub.sam.sfdc.net/allcerts: mcpIstioConfig.ingressGatewayMadkubAnnotations
        sidecar.istio.io/inject: "false"
      labels:
        app: istio-ingressgateway
        chart: gateways
        cluster: mcpIstioConfig.istioEstate
        heritage: Tiller
        istio: ingressgateway
        name: istio-ingressgateway
        release: RELEASE-NAME
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - ppc64le
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - s390x
            weight: 2
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
                - s390x
      automountServiceAccountToken: true
      containers:
      - args:
        - proxy
        - router
        - --domain
        - $(POD_NAMESPACE).svc.cluster.local
        - --proxyLogLevel=info
        - --log_output_level
        - default:info
        - --drainDuration
        - 45s
        - --parentShutdownDuration
        - 1m0s
        - --connectTimeout
        - 10s
        - --serviceCluster
        - istio-ingressgateway
        - --zipkinAddress
        - zipkindirecttls.funnel.svc.mesh.sfdc.net:7442
        - --envoyMetricsService
        - '{"address":"switchboard.service-mesh:15001","tls_settings":{"mode":2,"client_certificate":"/client-certs/client/certificates/client.pem","private_key":"/client-certs/client/keys/client-key.pem","ca_certificates":"/client-certs/ca.pem"},"tcp_keepalive":{"probes":3,"time":"10s","interval":"10s"}}'
        - --proxyAdminPort
        - "15373"
        - --statusPort
        - "15020"
        - --controlPlaneAuthPolicy
        - MUTUAL_TLS
        - --discoveryAddress
        - istio-pilot.mesh-control-plane:15011
        - --controlPlaneBootstrap=false
        env:
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: INSTANCE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: HOST_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              fieldPath: spec.serviceAccountName
        - name: ISTIO_AUTO_MTLS_ENABLED
          value: "true"
        - name: ISTIO_META_POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: ISTIO_META_CONFIG_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: ISTIO_METAJSON_LABELS
          value: |
            {"app":"istio-ingressgateway","chart":"gateways","heritage":"Tiller","istio":"ingressgateway","release":"RELEASE-NAME"}
        - name: ISTIO_META_CLUSTER_ID
          value: Kubernetes
        - name: SDS_ENABLED
          value: "false"
        - name: ISTIO_META_WORKLOAD_NAME
          value: istio-ingressgateway
        - name: ISTIO_META_OWNER
          value: kubernetes://api/apps/v1/namespaces/mesh-control-plane/deployments/istio-ingressgateway
        - name: ESTATE
          value: mcpIstioConfig.casamEstate
        - name: ISTIO_META_superpod
          value: mcpIstioConfig.superpod
        - name: ISTIO_META_settings_path
          value: mcpIstioConfig.ingressGatewaySettingsPath
        - name: ISTIO_META_hostname
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_namespace
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: ISTIO_METAJSON_METRICS_INCLUSIONS
          value: '{"sidecar.istio.io/statsInclusionPrefixes": "access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing"}'
        - name: ISTIO_BOOTSTRAP
          value: /var/lib/istio/envoy/envoy_bootstrap_tmpl_sfdc_falcon.json
        - name: ISTIO_META_ROUTER_MODE
          value: standard
        - name: ISTIO_META_TLS_CLIENT_CERT_CHAIN
          value: /client-certs/client/certificates/client.pem
        - name: ISTIO_META_TLS_CLIENT_KEY
          value: /client-certs/client/keys/client-key.pem
        - name: ISTIO_META_TLS_CLIENT_ROOT_CERT
          value: /client-certs/ca.pem
        - name: ISTIO_META_TLS_SERVER_CERT_CHAIN
          value: /server-certs/server/certificates/server.pem
        - name: ISTIO_META_TLS_SERVER_KEY
          value: /server-certs/server/keys/server-key.pem
        - name: ISTIO_META_TLS_SERVER_ROOT_CERT
          value: /server-certs/ca.pem
        - name: ISTIO_META_kubernetes_cluster_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.labels['cluster']
        - name: SETTINGS_PATH
          value: updated_by_firebom
        - name: SETTINGS_SUPERPOD
          value: '-'
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/proxy:4560429101a9e635e4fa9e5d5f14feae98c17d20
        imagePullPolicy: IfNotPresent
        name: istio-proxy
        ports:
        - containerPort: 8085
        readinessProbe:
          failureThreshold: 30
          httpGet:
            path: /healthz/ready
            port: 15020
            scheme: HTTP
          initialDelaySeconds: 1
          periodSeconds: 2
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 2000m
            memory: 1024Mi
          requests:
            cpu: 100m
            memory: 1024Mi
        securityContext:
          readOnlyRootFilesystem: true
          runAsNonRoot: false
          runAsUser: 1337
        volumeMounts:
        - mountPath: /client-certs
          name: tls-client-cert
        - mountPath: /server-certs
          name: tls-server-cert
        - mountPath: /etc/istio/proxy
          name: istio-envoy
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-client-cert:/client-cert/
        - --cert-folders=tls-server-cert:/server-cert/
        - --token-folder=/tokens/
        - --ca-folder=/maddog-certs/ca
        - --refresher
        - --run-init-for-refresher-mode
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: ESTATE
          value: mcpIstioConfig.casamEstate
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-refresher
        resources: {}
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      initContainers:
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-client-cert:/client-cert/
        - --cert-folders=tls-server-cert:/server-cert/
        - --token-folder=/tokens/
        - --ca-folder=/maddog-certs/ca
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-init
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      - command:
        - bash
        - -c
        - |
          set -ex
          chmod 775 -R /client-cert && chown -R 7447:7447 /client-cert
          chmod 775 -R /server-cert && chown -R 7447:7447 /server-cert
        image: mcpIstioConfig.permissionInitContainer
        imagePullPolicy: Always
        name: permissionsetterinitcontainer
        securityContext:
          runAsNonRoot: false
          runAsUser: 0
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
      nodeSelector:
        pool: mcpIstioConfig.casamEstate
      securityContext:
        fsGroup: 7447
        runAsNonRoot: true
        runAsUser: 7447
      serviceAccountName: istio-ingressgateway-service-account
      volumes:
      - hostPath:
          path: /etc/pki_service
        name: maddog-certs
      - emptyDir:
          medium: Memory
        name: tls-client-cert
      - emptyDir:
          medium: Memory
        name: tls-server-cert
      - emptyDir:
          medium: Memory
        name: tokens
      - emptyDir:
          medium: Memory
        name: istio-envoy
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    checksum/config-volume: f8da08b6b8c170dde721efd680270b2901e750d4aa186ebb6c22bef5b78a43f9
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: pilot
    chart: pilot
    heritage: Tiller
    istio: pilot
    release: RELEASE-NAME
  name: istio-pilot
  namespace: mesh-control-plane
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pilot
      istio: pilot
  strategy:
    rollingUpdate:
      maxSurge: 100%
      maxUnavailable: 25%
  template:
    metadata:
      annotations:
        madkub.sam.sfdc.net/allcerts: mcpIstioConfig.pilotMadkubAnnotations
        sidecar.istio.io/inject: "false"
      labels:
        app: pilot
        chart: pilot
        cluster: mcpIstioConfig.istioEstate
        heritage: Tiller
        istio: pilot
        name: istio-pilot
        release: istio
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - ppc64le
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - s390x
            weight: 2
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
                - s390x
      automountServiceAccountToken: true
      containers:
      - args:
        - discovery
        - --registries=Kubernetes
        - --monitoringAddr=:15014
        - --log_output_level=default:warn
        - --domain
        - cluster.local
        - --keepaliveMaxServerConnectionAge
        - 30m
        - --secureGrpcAddr=
        - --resync
        - 5m
        env:
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        - name: PILOT_SIDECAR_USE_REMOTE_ADDRESS
          value: "true"
        - name: PILOT_ENABLE_REDIS_FILTER
          value: "true"
        - name: PILOT_DEBOUNCE_AFTER
          value: 100ms
        - name: PILOT_DEBOUNCE_MAX
          value: 10s
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: PILOT_PUSH_THROTTLE
          value: "100"
        - name: SETTINGS_PATH
          value: updated_by_firebom
        - name: SETTINGS_SUPERPOD
          value: '-'
        - name: PILOT_TRACE_SAMPLING
          value: "1"
        - name: PILOT_ENABLE_UNSAFE_REGEX
          value: "true"
        - name: PILOT_RESPECT_DNS_TTL
          value: "false"
        - name: PILOT_ENABLE_PROTOCOL_SNIFFING_FOR_OUTBOUND
          value: "true"
        - name: PILOT_ENABLE_PROTOCOL_SNIFFING_FOR_INBOUND
          value: "true"
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/pilot:4560429101a9e635e4fa9e5d5f14feae98c17d20
        imagePullPolicy: IfNotPresent
        name: discovery
        ports:
        - containerPort: 8080
        - containerPort: 15010
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2000m
            memory: 4096Mi
          requests:
            cpu: 500m
            memory: 2048Mi
        volumeMounts:
        - mountPath: /etc/istio/config
          name: config-volume
      - args:
        - proxy
        - --domain
        - $(POD_NAMESPACE).svc.cluster.local
        - --serviceCluster
        - istio-pilot
        - --templateFile
        - /etc/istio/proxy/envoy_pilot.yaml.tmpl
        - --controlPlaneAuthPolicy
        - MUTUAL_TLS
        - --proxyLogLevel=info
        - --log_output_level=default:warn
        - --envoyMetricsService
        - '{"address":"switchboard.service-mesh:15001","tls_settings":{"mode":2,"client_certificate":"/client-certs/client/certificates/client.pem","private_key":"/client-certs/client/keys/client-key.pem","ca_certificates":"/client-certs/ca.pem"},"tcp_keepalive":{"probes":3,"time":"10s","interval":"10s"}}'
        - --proxyAdminPort
        - "15373"
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: INSTANCE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: ISTIO_META_hostname
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_namespace
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: ISTIO_METAJSON_METRICS_INCLUSIONS
          value: '{"sidecar.istio.io/statsInclusionPrefixes": "access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing"}'
        - name: ISTIO_META_TLS_CLIENT_CERT_CHAIN
          value: /client-certs/client/certificates/client.pem
        - name: ISTIO_META_TLS_CLIENT_KEY
          value: /client-certs/client/keys/client-key.pem
        - name: ISTIO_META_TLS_CLIENT_ROOT_CERT
          value: /client-certs/ca.pem
        - name: ISTIO_META_TLS_SERVER_CERT_CHAIN
          value: /server-certs/server/certificates/server.pem
        - name: ISTIO_META_TLS_SERVER_KEY
          value: /server-certs/server/keys/server-key.pem
        - name: ISTIO_META_TLS_SERVER_ROOT_CERT
          value: /server-certs/ca.pem
        - name: ISTIO_META_kubernetes_cluster_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.labels['cluster']
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        - name: KINGDOM
          value: mcpIstioConfig.kingdom
        - name: SDS_ENABLED
          value: "false"
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/proxy:4560429101a9e635e4fa9e5d5f14feae98c17d20
        imagePullPolicy: IfNotPresent
        name: istio-proxy
        ports:
        - containerPort: 15003
        - containerPort: 15005
        - containerPort: 15007
        - containerPort: 15011
        resources:
          limits:
            cpu: 2000m
            memory: 1024Mi
          requests:
            cpu: 100m
            memory: 128Mi
        securityContext:
          runAsUser: 1337
        volumeMounts:
        - mountPath: /client-certs
          name: tls-client-cert
        - mountPath: /server-certs
          name: tls-server-cert
        - $patch: delete
          mountPath: /etc/certs
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-client-cert:/client-cert/
        - --cert-folders=tls-server-cert:/server-cert/
        - --token-folder=/tokens/
        - --ca-folder=/maddog-certs/ca
        - --refresher
        - --run-init-for-refresher-mode
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-refresher
        resources: {}
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      - args:
        - --debug-mode
        - "true"
        - --funnel-address
        - mcpIstioConfig.funnelEndpoint
        - --alt-tags
        - cluster=svccluster
        env:
        - name: FUNCTION_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: PILOT_ENABLE_REDIS_FILTER
          value: "true"
        - name: PILOT_PUSH_THROTTLE
          value: "100"
        - name: PILOT_SIDECAR_USE_REMOTE_ADDRESS
          value: "true"
        - name: SETTINGS_SUPERPOD
          value: mcpIstioConfig.superpod
        - name: SETTINGS_PATH
          value: mcpIstioConfig.pilotSettingsPath
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        image: mcpIstioConfig.metricsScraperImage
        imagePullPolicy: Always
        name: metrics-scraper
        readinessProbe:
          exec:
            command:
            - /bin/true
          initialDelaySeconds: 5
          periodSeconds: 30
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2000m
            memory: 2048Mi
          requests:
            cpu: 100m
            memory: 512Mi
      initContainers:
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-client-cert:/client-cert/
        - --cert-folders=tls-server-cert:/server-cert/
        - --token-folder=/tokens/
        - --ca-folder=/maddog-certs/ca
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-init
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      - command:
        - bash
        - -c
        - |
          set -ex
          chmod 775 -R /client-cert && chown -R 7447:7447 /client-cert
          chmod 775 -R /server-cert && chown -R 7447:7447 /server-cert
        image: mcpIstioConfig.permissionInitContainer
        imagePullPolicy: Always
        name: permissionsetterinitcontainer
        securityContext:
          runAsNonRoot: false
          runAsUser: 0
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
      - args:
        - -p
        - "15002"
        - -z
        - "15006"
        - -u
        - "1337"
        - -m
        - REDIRECT
        - -i
        - 127.1.2.3/32
        - -x
        - ""
        - -b
        - ""
        - -d
        - 15010,15011
        command:
        - istio-iptables
        - -p
        - "15002"
        - -z
        - "15006"
        - -u
        - "1337"
        - -m
        - REDIRECT
        - -i
        - 127.1.2.3/32
        - -x
        - ""
        - -b
        - ""
        - -d
        - 15010,15011
        env:
        - name: DISABLE_REDIRECTION_ON_LOCAL_LOOPBACK
          value: "1"
        image: mcpIstioConfig.proxyImage
        imagePullPolicy: IfNotPresent
        name: istio-init
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
          requests:
            cpu: 10m
            memory: 10Mi
        securityContext:
          capabilities:
            add:
            - NET_ADMIN
          runAsNonRoot: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      nodeSelector:
        pool: mcpIstioConfig.istioEstate
      securityContext:
        fsGroup: 7447
        runAsNonRoot: true
        runAsUser: 7447
      serviceAccountName: istio-pilot-service-account
      volumes:
      - hostPath:
          path: /etc/pki_service
        name: maddog-certs
      - emptyDir:
          medium: Memory
        name: tls-client-cert
      - emptyDir:
          medium: Memory
        name: tls-server-cert
      - emptyDir:
          medium: Memory
        name: tokens
      - configMap:
          name: istio
        name: config-volume
---
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    manifestctl.sam.data.sfdc.net/swagger: disable
  labels:
    app: sidecarInjectorWebhook
    chart: sidecarInjectorWebhook
    heritage: Tiller
    istio: sidecar-injector
    release: RELEASE-NAME
  name: istio-sidecar-injector
  namespace: mesh-control-plane
spec:
  replicas: 1
  selector:
    matchLabels:
      istio: sidecar-injector
  strategy:
    rollingUpdate:
      maxSurge: 100%
      maxUnavailable: 25%
  template:
    metadata:
      annotations:
        madkub.sam.sfdc.net/allcerts: mcpIstioConfig.sidecarInjectorMadkubAnnotations
        sidecar.istio.io/inject: "false"
      labels:
        app: sidecarInjectorWebhook
        chart: sidecarInjectorWebhook
        cluster: mcpIstioConfig.istioEstate
        heritage: Tiller
        istio: sidecar-injector
        name: istio-sidecar-injector
        release: RELEASE-NAME
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - ppc64le
            weight: 2
          - preference:
              matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - s390x
            weight: 2
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
            - matchExpressions:
              - key: beta.kubernetes.io/arch
                operator: In
                values:
                - amd64
                - ppc64le
                - s390x
      automountServiceAccountToken: true
      containers:
      - args:
        - --caCertFile=/server-cert/ca.pem
        - --tlsCertFile=/server-cert/server/certificates/server.pem
        - --tlsKeyFile=/server-cert/server/keys/server-key.pem
        - --injectConfig=/etc/istio/inject/config
        - --meshConfig=/etc/istio/config/mesh
        - --healthCheckInterval=2s
        - --healthCheckFile=/tmp/health
        - --reconcileWebhookConfig=true
        - --port=15009
        - --monitoringPort=8080
        env:
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/sidecar_injector:4560429101a9e635e4fa9e5d5f14feae98c17d20
        imagePullPolicy: IfNotPresent
        livenessProbe:
          exec:
            command:
            - /usr/local/bin/sidecar-injector
            - probe
            - --probe-path=/tmp/health
            - --interval=4s
          initialDelaySeconds: 4
          periodSeconds: 4
        name: sidecar-injector-webhook
        ports:
        - containerPort: 15009
        readinessProbe:
          exec:
            command:
            - /usr/local/bin/sidecar-injector
            - probe
            - --probe-path=/tmp/health
            - --interval=4s
          initialDelaySeconds: 4
          periodSeconds: 4
        resources:
          requests:
            cpu: 10m
        volumeMounts:
        - mountPath: /etc/pki_service
          name: maddog-certs
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /etc/istio/config
          name: config-volume
          readOnly: true
        - mountPath: /etc/istio/inject
          name: inject-config
          readOnly: true
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-server-cert:/server-cert/
        - --cert-folders=tls-client-cert:/client-cert/
        - --token-folder=/tokens/
        - --ca-folder=/maddog-certs/ca
        - --refresher
        - --run-init-for-refresher-mode
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-refresher
        resources: {}
        volumeMounts:
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      - args:
        - --endpoint
        - http://localhost:8080/metrics
        - --debug-mode
        - "true"
        - --funnel-address
        - mcpIstioConfig.funnelEndpoint
        - --alt-tags
        - cluster=svccluster
        env:
        - name: FUNCTION_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: SETTINGS_SUPERPOD
          value: mcpIstioConfig.superpod
        - name: SETTINGS_PATH
          value: -.-.%(kingdom)s.-.istio-sidecar-injector
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        image: mcpIstioConfig.metricsScraperImage
        imagePullPolicy: Always
        name: metrics-scraper
        readinessProbe:
          exec:
            command:
            - /bin/true
          initialDelaySeconds: 5
          periodSeconds: 30
          timeoutSeconds: 5
        resources:
          limits:
            cpu: 2000m
            memory: 2048Mi
          requests:
            cpu: 100m
            memory: 512Mi
      - args:
        - proxy
        - sidecar
        - --domain
        - $(POD_NAMESPACE).svc.cluster.local
        - --log_output_level
        - default:info
        - --configPath
        - /etc/istio/proxy
        - --binaryPath
        - /usr/local/bin/envoy
        - --serviceCluster
        - istio-sidecar-injector.$(POD_NAMESPACE)
        - --drainDuration
        - 45s
        - --parentShutdownDuration
        - 1m0s
        - --discoveryAddress
        - istio-pilot.mesh-control-plane:15011
        - --zipkinAddress
        - zipkindirecttls.funnel.svc.mesh.sfdc.net:7442
        - --proxyLogLevel=info
        - --dnsRefreshRate
        - 300s
        - --connectTimeout
        - 10s
        - --envoyMetricsService
        - '{"address":"switchboard.service-mesh:15001","tls_settings":{"mode":2,"client_certificate":"/client-certs/client/certificates/client.pem","private_key":"/client-certs/client/keys/client-key.pem","ca_certificates":"/client-certs/ca.pem"},"tcp_keepalive":{"probes":3,"time":"10s","interval":"10s"}}'
        - --proxyAdminPort
        - "15373"
        - --controlPlaneAuthPolicy
        - MUTUAL_TLS
        - --statusPort
        - "15020"
        - --controlPlaneBootstrap=false
        env:
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: ISTIO_META_CLUSTER_ID
          value: updated_by_firebom
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: INSTANCE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              fieldPath: spec.serviceAccountName
        - name: ISTIO_AUTO_MTLS_ENABLED
          value: "true"
        - name: HOST_IP
          valueFrom:
            fieldRef:
              fieldPath: status.hostIP
        - name: ISTIO_META_POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: ISTIO_META_CONFIG_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: SDS_ENABLED
          value: "false"
        - name: ISTIO_META_INTERCEPTION_MODE
          value: REDIRECT
        - name: ISTIO_META_hostname
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ISTIO_META_namespace
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: ISTIO_METAJSON_METRICS_INCLUSIONS
          value: '{"sidecar.istio.io/statsInclusionPrefixes": "access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing"}'
        - name: ISTIO_METAJSON_LABELS
          value: '{"settings_path": "-.-.%(kingdom)s.-.istio-sidecar-injector", "superpod":"%(superpod)s"}'
        - name: ISTIO_META_TLS_CLIENT_CERT_CHAIN
          value: /client-certs/client/certificates/client.pem
        - name: ISTIO_META_TLS_CLIENT_KEY
          value: /client-certs/client/keys/client-key.pem
        - name: ISTIO_META_TLS_CLIENT_ROOT_CERT
          value: /client-certs/ca.pem
        - name: ISTIO_META_TLS_SERVER_CERT_CHAIN
          value: /server-certs/server/certificates/server.pem
        - name: ISTIO_META_TLS_SERVER_KEY
          value: /server-certs/server/keys/server-key.pem
        - name: ISTIO_META_TLS_SERVER_ROOT_CERT
          value: /server-certs/ca.pem
        - name: ISTIO_META_kubernetes_cluster_name
          valueFrom:
            fieldRef:
              fieldPath: metadata.labels['cluster']
        - name: ESTATE
          value: mcpIstioConfig.istioEstate
        - name: KINGDOM
          value: mcpIstioConfig.kingdom
        image: mcpIstioConfig.proxyImage
        imagePullPolicy: IfNotPresent
        name: istio-proxy
        ports:
        - containerPort: 15090
          name: http-envoy-prom
          protocol: TCP
        readinessProbe:
          failureThreshold: 30
          httpGet:
            path: /healthz/ready
            port: 15020
            scheme: HTTP
          initialDelaySeconds: 1
          periodSeconds: 2
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: "2"
            memory: 1Gi
          requests:
            cpu: 100m
            memory: 128Mi
        securityContext:
          readOnlyRootFilesystem: true
          runAsUser: 1337
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /client-certs
          name: tls-client-cert
        - mountPath: /server-certs
          name: tls-server-cert
        - mountPath: /etc/istio/proxy
          name: istio-envoy
      initContainers:
      - args:
        - /sam/madkub-client
        - --madkub-endpoint=%(madkubEndpoint)s
        - --maddog-endpoint=%(maddogEndpoint)s
        - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
        - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
        - --cert-folders=tls-server-cert:/server-cert/
        - --cert-folders=tls-client-cert:/client-cert/
        - --token-folder=/tokens/
        - --requested-cert-type=client
        - --ca-folder=/maddog-certs/ca
        env:
        - name: MADKUB_NODENAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: MADKUB_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MADKUB_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: mcpIstioConfig.madkubImage
        imagePullPolicy: IfNotPresent
        name: madkub-init
        volumeMounts:
        - mountPath: /server-cert
          name: tls-server-cert
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /maddog-certs/
          name: maddog-certs
        - mountPath: /tokens
          name: tokens
      - command:
        - bash
        - -c
        - |
          set -ex
          chmod 775 -R /client-cert && chown -R 7447:7447 /client-cert
          chmod 775 -R /server-cert && chown -R 7447:7447 /server-cert
        image: mcpIstioConfig.permissionInitContainer
        imagePullPolicy: Always
        name: permissionsetterinitcontainer
        securityContext:
          runAsNonRoot: false
          runAsUser: 0
        volumeMounts:
        - mountPath: /client-cert
          name: tls-client-cert
        - mountPath: /server-cert
          name: tls-server-cert
      - args:
        - -p
        - "15002"
        - -z
        - "15006"
        - -u
        - "1337"
        - -m
        - REDIRECT
        - -i
        - 127.1.2.3/32
        - -x
        - ""
        - -b
        - ""
        - -d
        - ""
        command:
        - istio-iptables
        - -p
        - "15002"
        - -z
        - "15006"
        - -u
        - "1337"
        - -m
        - REDIRECT
        - -i
        - 127.1.2.3/32
        - -x
        - ""
        - -b
        - ""
        - -d
        - ""
        env:
        - name: DISABLE_REDIRECTION_ON_LOCAL_LOOPBACK
          value: "1"
        image: mcpIstioConfig.proxyImage
        imagePullPolicy: IfNotPresent
        name: istio-init
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
          requests:
            cpu: 10m
            memory: 10Mi
        securityContext:
          capabilities:
            add:
            - NET_ADMIN
          runAsNonRoot: false
          runAsUser: 0
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      nodeSelector:
        master: "true"
      securityContext:
        fsGroup: 7447
        runAsNonRoot: true
        runAsUser: 7447
      serviceAccountName: istio-sidecar-injector-service-account
      volumes:
      - hostPath:
          path: /etc/pki_service
        name: maddog-certs
      - emptyDir:
          medium: Memory
        name: tls-client-cert
      - emptyDir:
          medium: Memory
        name: tls-server-cert
      - emptyDir:
          medium: Memory
        name: tokens
      - emptyDir:
          medium: Memory
        name: istio-envoy
      - configMap:
          name: istio
        name: config-volume
      - configMap:
          items:
          - key: config
            path: config
          - key: values
            path: values
          name: istio-sidecar-injector
        name: inject-config
---
apiVersion: batch/v1
kind: Job
metadata:
  name: istio-init-crd-all-93992746ef0add6bb415af63b83d8284
  namespace: mesh-control-plane
spec:
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: "false"
      labels: null
    spec:
      automountServiceAccountToken: true
      containers:
      - command:
        - kubectl
        - apply
        - -f
        - /etc/istio/crd-all/crd-all.gen.yaml
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/kubectl:93992746ef0add6bb415af63b83d8284d9f38247
        imagePullPolicy: IfNotPresent
        name: istio-init-crd-all
        resources:
          limits:
            cpu: 100m
            memory: 200Mi
          requests:
            cpu: 10m
            memory: 50Mi
        volumeMounts:
        - mountPath: /etc/istio/crd-all
          name: crd-all
          readOnly: true
      restartPolicy: OnFailure
      securityContext:
        fsGroup: 7447
        runAsNonRoot: true
        runAsUser: 7447
      serviceAccountName: istio-init-service-account
      volumes:
      - configMap:
          name: istio-crd-all
        name: crd-all
---
apiVersion: batch/v1
kind: Job
metadata:
  name: istio-init-crd-mixer-93992746ef0add6bb415af63b83d8284
  namespace: mesh-control-plane
spec:
  template:
    metadata:
      annotations:
        sidecar.istio.io/inject: "false"
      labels: null
    spec:
      automountServiceAccountToken: true
      containers:
      - command:
        - kubectl
        - apply
        - -f
        - /etc/istio/crd-mixer/crd-mixer.yaml
        image: 791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/istio-packaging/kubectl:93992746ef0add6bb415af63b83d8284d9f38247
        imagePullPolicy: IfNotPresent
        name: istio-init-crd-mixer
        resources:
          limits:
            cpu: 100m
            memory: 200Mi
          requests:
            cpu: 10m
            memory: 50Mi
        volumeMounts:
        - mountPath: /etc/istio/crd-mixer
          name: crd-mixer
          readOnly: true
      restartPolicy: OnFailure
      securityContext:
        fsGroup: 7447
        runAsNonRoot: true
        runAsUser: 7447
      serviceAccountName: istio-init-service-account
      volumes:
      - configMap:
          name: istio-crd-mixer
        name: crd-mixer
