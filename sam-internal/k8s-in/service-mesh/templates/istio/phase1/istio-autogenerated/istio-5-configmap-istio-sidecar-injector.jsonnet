# Auto-generated file. Do not modify manually. Check README.md.
local mcpIstioConfig = (import "service-mesh/istio-config.jsonnet");
local istioPhases = (import "service-mesh/istio-phases.jsonnet");

if (istioPhases.phaseNum == 1) then
{
  apiVersion: "v1",
  data: {
    config: "policy: disabled\nalwaysInjectSelector:\n  []\nneverInjectSelector:\n  []\ntemplate: |-\n  rewriteAppHTTPProbe: {{ valueOrDefault .Values.sidecarInjectorWebhook.rewriteAppHTTPProbe false }}\n  {{- if or (not .Values.istio_cni.enabled) .Values.global.proxy.enableCoreDump }}\n  initContainers:\n  {{ if ne (annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode) `NONE` }}\n  {{- if not .Values.istio_cni.enabled }}\n  - name: istio-init\n  {{- if contains \"/\" .Values.global.proxy_init.image }}\n    image: \"{{ .Values.global.proxy_init.image }}\"\n  {{- else }}\n    image: \"{{ .Values.global.hub }}/{{ .Values.global.proxy_init.image }}:{{ .Values.global.tag }}\"\n  {{- end }}\n    command:\n    - \"istio-iptables\"\n    - \"-p\"\n    - \"15002\"\n    - \"-z\"\n    - \"15006\"\n    - \"-u\"\n    - 1337\n    - \"-m\"\n    - \"{{ annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode }}\"\n    - \"-i\"\n    - \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeOutboundIPRanges` .Values.global.proxy.includeIPRanges }}\"\n    - \"-x\"\n    - \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundIPRanges` .Values.global.proxy.excludeIPRanges }}\"\n    - \"-b\"\n    - \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` `*` }}\"\n    - \"-d\"\n    - \"{{ excludeInboundPort (annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort) (annotation .ObjectMeta `traffic.sidecar.istio.io/excludeInboundPorts` .Values.global.proxy.excludeInboundPorts) }}\"\n    {{ if or (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/excludeOutboundPorts`) (ne .Values.global.proxy.excludeOutboundPorts \"\") -}}\n    - \"-o\"\n    - \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundPorts` .Values.global.proxy.excludeOutboundPorts }}\"\n    {{ end -}}\n    {{ if (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces`) -}}\n    - \"-k\"\n    - \"{{ index .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces` }}\"\n    {{ end -}}\n    env:\n    - name: DISABLE_REDIRECTION_ON_LOCAL_LOOPBACK\n      value: \"1\"\n    imagePullPolicy: \"{{ .Values.global.imagePullPolicy }}\"\n  {{- if .Values.global.proxy.init.resources }}\n    resources:\n      {{ toYaml .Values.global.proxy.init.resources | indent 4 }}\n  {{- else }}\n    resources: {}\n  {{- end }}\n    securityContext:\n      runAsUser: 0\n      runAsNonRoot: false\n      capabilities:\n        add:\n        - NET_ADMIN\n      {{- if .Values.global.proxy.privileged }}\n      privileged: true\n      {{- end }}\n    restartPolicy: Always\n  {{- end }}\n  {{  end -}}\n  {{- if eq .Values.global.proxy.enableCoreDump true }}\n  - name: enable-core-dump\n    args:\n    - -c\n    - sysctl -w kernel.core_pattern=/var/lib/istio/core.proxy \u0026\u0026 ulimit -c unlimited\n    command:\n      - /bin/sh\n    image: {{ $.Values.global.proxy.enableCoreDumpImage }}\n    imagePullPolicy: IfNotPresent\n    resources: {}\n    securityContext:\n      runAsUser: 0\n      runAsNonRoot: false\n      privileged: true\n  {{ end }}\n  {{- end }}\n  containers:\n  - name: istio-proxy\n  {{- if contains \"/\" (annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.proxy.image) }}\n    image: \"{{ annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.proxy.image }}\"\n  {{- else }}\n    image: \"{{ annotation .ObjectMeta `sidecar.istio.io/proxyImage` .Values.global.hub }}/{{ .Values.global.proxy.image }}:{{ .Values.global.tag }}\"\n  {{- end }}\n    ports:\n    - containerPort: 15090\n      protocol: TCP\n      name: http-envoy-prom\n    args:\n    - proxy\n    - sidecar\n    - --domain\n    - $(POD_NAMESPACE).svc.{{ .Values.global.proxy.clusterDomain }}\n    - --configPath\n    - \"{{ .ProxyConfig.ConfigPath }}\"\n    - --binaryPath\n    - \"{{ .ProxyConfig.BinaryPath }}\"\n    - --serviceCluster\n    {{ if ne \"\" (index .ObjectMeta.Labels \"app\") -}}\n    - \"{{ index .ObjectMeta.Labels `app` }}.$(POD_NAMESPACE)\"\n    {{ else -}}\n    - \"{{ valueOrDefault .DeploymentMeta.Name `istio-proxy` }}.{{ valueOrDefault .DeploymentMeta.Namespace `default` }}\"\n    {{ end -}}\n    - --drainDuration\n    - \"{{ formatDuration .ProxyConfig.DrainDuration }}\"\n    - --parentShutdownDuration\n    - \"{{ formatDuration .ProxyConfig.ParentShutdownDuration }}\"\n    - --discoveryAddress\n    - \"{{ annotation .ObjectMeta `sidecar.istio.io/discoveryAddress` .ProxyConfig.DiscoveryAddress }}\"\n  {{- if eq .Values.global.proxy.tracer \"lightstep\" }}\n    - --lightstepAddress\n    - \"{{ .ProxyConfig.GetTracing.GetLightstep.GetAddress }}\"\n    - --lightstepAccessToken\n    - \"{{ .ProxyConfig.GetTracing.GetLightstep.GetAccessToken }}\"\n    - --lightstepSecure={{ .ProxyConfig.GetTracing.GetLightstep.GetSecure }}\n    - --lightstepCacertPath\n    - \"{{ .ProxyConfig.GetTracing.GetLightstep.GetCacertPath }}\"\n  {{- else if eq .Values.global.proxy.tracer \"zipkin\" }}\n    - --zipkinAddress\n    - \"{{ .ProxyConfig.GetTracing.GetZipkin.GetAddress }}\"\n  {{- else if eq .Values.global.proxy.tracer \"datadog\" }}\n    - --datadogAgentAddress\n    - \"{{ .ProxyConfig.GetTracing.GetDatadog.GetAddress }}\"\n  {{- end }}\n  {{- if .Values.global.proxy.logLevel }}\n    - --proxyLogLevel={{ .Values.global.proxy.logLevel }}\n  {{- end}}\n  {{- if .Values.global.proxy.componentLogLevel }}\n    - --proxyComponentLogLevel={{ .Values.global.proxy.componentLogLevel }}\n  {{- end}}\n    - --dnsRefreshRate\n    - {{ .Values.global.proxy.dnsRefreshRate }}\n    - --connectTimeout\n    - \"{{ formatDuration .ProxyConfig.ConnectTimeout }}\"\n  {{- if .Values.global.proxy.envoyStatsd.enabled }}\n    - --statsdUdpAddress\n    - \"{{ .ProxyConfig.StatsdUdpAddress }}\"\n  {{- end }}\n  {{- if .Values.global.proxy.envoyMetricsService.enabled }}\n    - --envoyMetricsService\n    - '{{ protoToJSON .ProxyConfig.EnvoyMetricsService }}'\n  {{- end }}\n  {{- if .Values.global.proxy.envoyAccessLogService.enabled }}\n    - --envoyAccessLogService\n    - '{{ protoToJSON .ProxyConfig.EnvoyAccessLogService }}'\n  {{- end }}\n    - --proxyAdminPort\n    - \"{{ .ProxyConfig.ProxyAdminPort }}\"\n    {{ if gt .ProxyConfig.Concurrency 0 -}}\n    - --concurrency\n    - \"{{ .ProxyConfig.Concurrency }}\"\n    {{ end -}}\n    - --controlPlaneAuthPolicy\n    - \"{{ annotation .ObjectMeta `sidecar.istio.io/controlPlaneAuthPolicy` .ProxyConfig.ControlPlaneAuthPolicy }}\"\n  {{- if (ne (annotation .ObjectMeta \"status.sidecar.istio.io/port\" (valueOrDefault .Values.global.proxy.statusPort 0 )) `0`) }}\n    - --statusPort\n    - \"{{ annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort }}\"\n  {{- end }}\n  {{- if .Values.global.trustDomain }}\n    - --trust-domain={{ .Values.global.trustDomain }}\n  {{- end }}\n  {{- if .Values.global.proxy.lifecycle }}\n    lifecycle:\n      {{ toYaml .Values.global.proxy.lifecycle | indent 4 }}\n  {{- end }}\n    - --controlPlaneBootstrap=false\n    env:\n    - name: POD_NAME\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.name\n    - name: ISTIO_META_POD_PORTS\n      value: |-\n        [\n        {{- $first := true }}\n        {{- range $index1, $c := .Spec.Containers }}\n          {{- range $index2, $p := $c.Ports }}\n            {{- if (structToJSON $p) }}\n            {{if not $first}},{{end}}{{ structToJSON $p }}\n            {{- $first = false }}\n            {{- end }}\n          {{- end}}\n        {{- end}}\n        ]\n    - name: ISTIO_META_CLUSTER_ID\n      value: \"{{ valueOrDefault .Values.global.multiCluster.clusterName `Kubernetes` }}\"\n    - name: POD_NAMESPACE\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.namespace\n    - name: INSTANCE_IP\n      valueFrom:\n        fieldRef:\n          fieldPath: status.podIP\n    - name: SERVICE_ACCOUNT\n      valueFrom:\n        fieldRef:\n          fieldPath: spec.serviceAccountName\n    {{- if .Values.global.mtls.auto }}\n    - name: ISTIO_AUTO_MTLS_ENABLED\n      value: \"true\"\n    {{- end }}\n  {{- if eq .Values.global.proxy.tracer \"datadog\" }}\n    - name: HOST_IP\n      valueFrom:\n        fieldRef:\n          fieldPath: status.hostIP\n  {{- if isset .ObjectMeta.Annotations `apm.datadoghq.com/env` }}\n  {{- range $key, $value := fromJSON (index .ObjectMeta.Annotations `apm.datadoghq.com/env`) }}\n    - name: {{ $key }}\n      value: \"{{ $value }}\"\n  {{- end }}\n  {{- end }}\n  {{- end }}\n    - name: ISTIO_META_POD_NAME\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.name\n    - name: ISTIO_META_CONFIG_NAMESPACE\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.namespace\n    - name: SDS_ENABLED\n      value: {{ $.Values.global.sds.enabled }}\n    - name: ISTIO_META_INTERCEPTION_MODE\n      value: \"{{ or (index .ObjectMeta.Annotations `sidecar.istio.io/interceptionMode`) .ProxyConfig.InterceptionMode.String }}\"\n    - name: ISTIO_META_INCLUDE_INBOUND_PORTS\n      value: \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` (applicationPorts .Spec.Containers) }}\"\n    {{- if .Values.global.network }}\n    - name: ISTIO_META_NETWORK\n      value: \"{{ .Values.global.network }}\"\n    {{- end }}\n    {{ if .ObjectMeta.Annotations }}\n    - name: ISTIO_METAJSON_ANNOTATIONS\n      value: |\n             {{ toJSON .ObjectMeta.Annotations }}\n    {{ end }}\n    {{ if .ObjectMeta.Labels }}\n    - name: ISTIO_METAJSON_LABELS\n      value: |\n             {{ toJSON .ObjectMeta.Labels }}\n    {{ end }}\n    {{- if .DeploymentMeta.Name }}\n    - name: ISTIO_META_WORKLOAD_NAME\n      value: {{ .DeploymentMeta.Name }}\n    {{ end }}\n    {{- if and .TypeMeta.APIVersion .DeploymentMeta.Name }}\n    - name: ISTIO_META_OWNER\n      value: kubernetes://apis/{{ .TypeMeta.APIVersion }}/namespaces/{{ valueOrDefault .DeploymentMeta.Namespace `default` }}/{{ toLower .TypeMeta.Kind}}s/{{ .DeploymentMeta.Name }}\n     {{- end}}\n    {{- if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}\n    - name: ISTIO_BOOTSTRAP_OVERRIDE\n      value: \"/etc/istio/custom-bootstrap/custom_bootstrap.json\"\n    {{- end }}\n    {{- if .Values.global.sds.customTokenDirectory }}\n    - name: ISTIO_META_SDS_TOKEN_PATH\n      value: \"{{ .Values.global.sds.customTokenDirectory -}}/sdstoken\"\n    {{- end }}\n    {{- if .Values.global.meshID }}\n    - name: ISTIO_META_MESH_ID\n      value: \"{{ .Values.global.meshID }}\"\n    {{- else if .Values.global.trustDomain }}\n    - name: ISTIO_META_MESH_ID\n      value: \"{{ .Values.global.trustDomain }}\"\n    {{- end }}\n    {{- if eq .Values.global.proxy.tracer \"stackdriver\" }}\n    - name: STACKDRIVER_TRACING_ENABLED\n      value: \"true\"\n    - name: STACKDRIVER_TRACING_DEBUG\n      value: \"{{ .ProxyConfig.GetTracing.GetStackdriver.GetDebug }}\"\n    {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAnnotations }}\n    - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_ANNOTATIONS\n      value: \"{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAnnotations }}\"\n    {{- end }}\n    {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAttributes }}\n    - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_ATTRIBUTES\n      value: \"{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfAttributes }}\"\n    {{- end }}\n    {{- if .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfMessageEvents }}\n    - name: STACKDRIVER_TRACING_MAX_NUMBER_OF_MESSAGE_EVENTS\n      value: \"{{ .ProxyConfig.GetTracing.GetStackdriver.GetMaxNumberOfMessageEvents }}\"\n    {{- end }}\n    {{- end }}\n    ###\n    # Start metadata fields used by switchboard for building metric tags.\n    ###\n    - name: ISTIO_META_hostname\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.name\n    - name: ISTIO_META_namespace\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.namespace\n    - name: ISTIO_META_kubernetes_cluster_name\n      valueFrom:\n        fieldRef:\n          fieldPath: metadata.labels['cluster']\n    ###\n    # End metadata fields used by switchboard for building metric tags.\n    ###\n    ###\n    # Start metadata fields for configuring sidecar metrics.\n    ###\n    # We currently want to include all envoy metrics, so the inclusion list includes all known prefixes.\n    - name: ISTIO_METAJSON_METRICS_INCLUSIONS\n      value: \"{\\\"sidecar.istio.io/statsInclusionPrefixes\\\": \\\"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\\\"}\"\n    ###\n    # End metadata fields for configuring sidecar metrics.\n    ###\n    ###\n    # Start metadata fields for configuring cert paths.\n    ###\n    - name: ISTIO_META_TLS_CLIENT_CERT_CHAIN\n      value: /client-certs/client/certificates/client.pem\n    - name: ISTIO_META_TLS_CLIENT_KEY\n      value: /client-certs/client/keys/client-key.pem\n    - name: ISTIO_META_TLS_CLIENT_ROOT_CERT\n      value: /client-certs/ca.pem\n    - name: ISTIO_META_TLS_SERVER_CERT_CHAIN\n      value: /server-certs/server/certificates/server.pem\n    - name: ISTIO_META_TLS_SERVER_KEY\n      value: /server-certs/server/keys/server-key.pem\n    - name: ISTIO_META_TLS_SERVER_ROOT_CERT\n      value: /server-certs/ca.pem\n    ###\n    # End metadata fields for configuring cert paths.\n    ###\n    imagePullPolicy: {{ .Values.global.imagePullPolicy }}\n    {{ if ne (annotation .ObjectMeta `status.sidecar.istio.io/port` (valueOrDefault .Values.global.proxy.statusPort 0 )) `0` }}\n    readinessProbe:\n      httpGet:\n        path: /healthz/ready\n        port: {{ annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort }}\n      initialDelaySeconds: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/initialDelaySeconds` .Values.global.proxy.readinessInitialDelaySeconds }}\n      periodSeconds: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/periodSeconds` .Values.global.proxy.readinessPeriodSeconds }}\n      failureThreshold: {{ annotation .ObjectMeta `readiness.status.sidecar.istio.io/failureThreshold` .Values.global.proxy.readinessFailureThreshold }}\n    {{ end -}}\n    securityContext:\n      {{- if .Values.global.proxy.privileged }}\n      privileged: true\n      {{- end }}\n      {{- if ne .Values.global.proxy.enableCoreDump true }}\n      readOnlyRootFilesystem: true\n      {{- end }}\n      {{ if eq (annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode) `TPROXY` -}}\n      capabilities:\n        add:\n        - NET_ADMIN\n      runAsGroup: 1337\n      {{ else -}}\n      {{ if .Values.global.sds.enabled }}\n      runAsGroup: 1337\n      {{- end }}\n      runAsUser: 1337\n      {{- end }}\n    resources:\n      {{ if or (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU`) (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory`) -}}\n      requests:\n        {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU`) -}}\n        cpu: \"{{ index .ObjectMeta.Annotations `sidecar.istio.io/proxyCPU` }}\"\n        {{ end}}\n        {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory`) -}}\n        memory: \"{{ index .ObjectMeta.Annotations `sidecar.istio.io/proxyMemory` }}\"\n        {{ end }}\n    {{ else -}}\n  {{- if .Values.global.proxy.resources }}\n      {{ toYaml .Values.global.proxy.resources | indent 4 }}\n  {{- end }}\n    {{  end -}}\n    terminationMessagePolicy: FallbackToLogsOnError\n    volumeMounts:\n    {{ if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}\n    - mountPath: /etc/istio/custom-bootstrap\n      name: custom-bootstrap-volume\n    {{- end }}\n    - mountPath: /etc/istio/proxy\n      name: istio-envoy\n    {{- if .Values.global.sds.enabled }}\n    - mountPath: /var/run/sds\n      name: sds-uds-path\n      readOnly: true\n    - mountPath: /var/run/secrets/tokens\n      name: istio-token\n    {{- if .Values.global.sds.customTokenDirectory }}\n    - mountPath: \"{{ .Values.global.sds.customTokenDirectory -}}\"\n      name: custom-sds-token\n      readOnly: true\n    {{- end }}\n    {{- else }}\n    - mountPath: /client-certs\n      name: tls-client-cert\n    - mountPath: /server-certs\n      name: tls-server-cert\n    {{- end }}\n    {{- if and (eq .Values.global.proxy.tracer \"lightstep\") .Values.global.tracer.lightstep.cacertPath }}\n    - mountPath: {{ directory .ProxyConfig.GetTracing.GetLightstep.GetCacertPath }}\n      name: lightstep-certs\n      readOnly: true\n    {{- end }}\n      {{- if isset .ObjectMeta.Annotations `sidecar.istio.io/userVolumeMount` }}\n      {{ range $index, $value := fromJSON (index .ObjectMeta.Annotations `sidecar.istio.io/userVolumeMount`) }}\n    - name: \"{{  $index }}\"\n      {{ toYaml $value | indent 4 }}\n      {{ end }}\n      {{- end }}\n  volumes:\n  {{- if (isset .ObjectMeta.Annotations `sidecar.istio.io/bootstrapOverride`) }}\n  - name: custom-bootstrap-volume\n    configMap:\n      name: {{ annotation .ObjectMeta `sidecar.istio.io/bootstrapOverride` \"\" }}\n  {{- end }}\n  - emptyDir:\n      medium: Memory\n    name: istio-envoy\n  {{- if .Values.global.sds.enabled }}\n  - name: sds-uds-path\n    hostPath:\n      path: /var/run/sds\n  - name: istio-token\n    projected:\n      sources:\n        - serviceAccountToken:\n            path: istio-token\n            expirationSeconds: 43200\n            audience: {{ .Values.global.sds.token.aud }}\n  {{- if .Values.global.sds.customTokenDirectory }}\n  - name: custom-sds-token\n    secret:\n      secretName: sdstokensecret\n  {{- end }}\n  {{- else }}\n    {{- if isset .ObjectMeta.Annotations `sidecar.istio.io/userVolume` }}\n    {{range $index, $value := fromJSON (index .ObjectMeta.Annotations `sidecar.istio.io/userVolume`) }}\n  - name: \"{{ $index }}\"\n    {{ toYaml $value | indent 2 }}\n    {{ end }}\n    {{ end }}\n  {{- end }}\n  {{- if and (eq .Values.global.proxy.tracer \"lightstep\") .Values.global.tracer.lightstep.cacertPath }}\n  - name: lightstep-certs\n    secret:\n      optional: true\n      secretName: lightstep.cacert\n  {{- end }}\n  {{- if .Values.global.podDNSSearchNamespaces }}\n  dnsConfig:\n    searches:\n      {{- range .Values.global.podDNSSearchNamespaces }}\n      - {{ render . }}\n      {{- end }}\n  {{- end }}\n  podRedirectAnnot:\n     sidecar.istio.io/interceptionMode: \"{{ annotation .ObjectMeta `sidecar.istio.io/interceptionMode` .ProxyConfig.InterceptionMode }}\"\n     traffic.sidecar.istio.io/includeOutboundIPRanges: \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeOutboundIPRanges` .Values.global.proxy.includeIPRanges }}\"\n     traffic.sidecar.istio.io/excludeOutboundIPRanges: \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundIPRanges` .Values.global.proxy.excludeIPRanges }}\"\n     traffic.sidecar.istio.io/includeInboundPorts: \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/includeInboundPorts` (includeInboundPorts .Spec.Containers) }}\"\n     traffic.sidecar.istio.io/excludeInboundPorts: \"{{ excludeInboundPort (annotation .ObjectMeta `status.sidecar.istio.io/port` .Values.global.proxy.statusPort) (annotation .ObjectMeta `traffic.sidecar.istio.io/excludeInboundPorts` .Values.global.proxy.excludeInboundPorts) }}\"\n  {{ if or (isset .ObjectMeta.Annotations `traffic.sidecar.istio.io/excludeOutboundPorts`) (ne .Values.global.proxy.excludeOutboundPorts \"\") }}\n     traffic.sidecar.istio.io/excludeOutboundPorts: \"{{ annotation .ObjectMeta `traffic.sidecar.istio.io/excludeOutboundPorts` .Values.global.proxy.excludeOutboundPorts }}\"\n  {{- end }}\n     traffic.sidecar.istio.io/kubevirtInterfaces: \"{{ index .ObjectMeta.Annotations `traffic.sidecar.istio.io/kubevirtInterfaces` }}\"",
    values: "{\"certmanager\":{\"enabled\":false},\"galley\":{\"enabled\":false},\"gateways\":{\"enabled\":false,\"istio-ingressgateway\":{\"autoscaleEnabled\":false,\"enabled\":true,\"env\":{\"ESTATE\":\"updated_by_firebom\",\"ISTIO_BOOTSTRAP\":\"/var/lib/istio/envoy/envoy_bootstrap_tmpl_sfdc_falcon.json\",\"ISTIO_META_TLS_CLIENT_CERT_CHAIN\":\"/etc/identity/client/certificates/client.pem\",\"ISTIO_META_TLS_CLIENT_KEY\":\"/etc/identity/client/keys/client-key.pem\",\"ISTIO_META_TLS_CLIENT_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"ISTIO_META_TLS_SERVER_CERT_CHAIN\":\"/etc/identity/server/certificates/server.pem\",\"ISTIO_META_TLS_SERVER_KEY\":\"/etc/identity/server/keys/server-key.pem\",\"ISTIO_META_TLS_SERVER_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"SETTINGS_PATH\":\"updated_by_firebom\",\"SETTINGS_SUPERPOD\":\"-\"},\"ports\":[{\"name\":\"https-core-443\",\"port\":443},{\"name\":\"https-core-8443\",\"port\":8443},{\"name\":\"https-core-8085\",\"port\":8085},{\"name\":\"tcp-core-2525\",\"port\":2525}],\"replicaCount\":1,\"secretVolumes\":[],\"serviceAnnotations\":{\"service.beta.kubernetes.io/aws-load-balancer-type\":\"nlb\"}}},\"global\":{\"arch\":{\"amd64\":2,\"ppc64le\":2,\"s390x\":2},\"certificates\":[],\"configValidation\":false,\"controlPlaneSecurityEnabled\":true,\"customCertificates\":{\"ca\":{\"certPath\":\"cacerts.pem\",\"mountPath\":\"/etc/identity/ca\",\"volumeName\":\"ca\"},\"client\":{\"certPath\":\"certificates/client.pem\",\"keyPath\":\"keys/client-key.pem\",\"mountPath\":\"/etc/identity/client\",\"volumeName\":\"clientcert\"},\"enabled\":true,\"server\":{\"certPath\":\"certificates/server.pem\",\"keyPath\":\"keys/server-key.pem\",\"mountPath\":\"/etc/identity/server\",\"volumeName\":\"servercert\"}},\"defaultNodeSelector\":{},\"defaultPodDisruptionBudget\":{\"enabled\":false},\"defaultResources\":{\"requests\":{\"cpu\":\"10m\"}},\"defaultTolerations\":[],\"disablePolicyChecks\":true,\"enableHelmTest\":false,\"enableTracing\":false,\"hub\":\"%(istioHub)s\",\"imagePullPolicy\":\"Always\",\"imagePullSecrets\":null,\"istioNamespace\":\"mesh-control-plane\",\"k8sIngress\":{\"enableHttps\":false,\"enabled\":false,\"gatewayName\":\"ingressgateway\"},\"localityLbSetting\":{\"enabled\":true},\"logging\":{\"level\":\"default:warn\"},\"meshExpansion\":{\"enabled\":false,\"useILB\":false},\"meshID\":\"\",\"meshNetworks\":{},\"metricsScraper\":{\"enabled\":true,\"funnel\":{\"host\":\"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net\",\"port\":7442},\"hub\":\"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"2048Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"512Mi\"}},\"tag\":\"9972d78059cf97f688118c39c739ab1844f8df73\"},\"monitoringPort\":15014,\"mtls\":{\"auto\":true,\"enabled\":false},\"multiCluster\":{\"clusterName\":\"\",\"enabled\":false},\"network\":\"\",\"oneNamespace\":false,\"operatorManageWebhooks\":false,\"outboundTrafficPolicy\":{\"mode\":\"ALLOW_ANY\"},\"policyCheckFailOpen\":false,\"priorityClassName\":\"\",\"proxy\":{\"accessLogEncoding\":\"TEXT\",\"accessLogFile\":\"/dev/stdout\",\"accessLogFormat\":\"\",\"adminPort\":15373,\"autoInject\":\"disabled\",\"clusterDomain\":\"cluster.local\",\"componentLogLevel\":\"\",\"concurrency\":0,\"dnsRefreshRate\":\"300s\",\"enableCoreDump\":false,\"enableCoreDumpImage\":\"ubuntu:xenial\",\"env\":{\"ESTATE\":\"updated_by_firebom\",\"ISTIO_METAJSON_METRICS_INCLUSIONS\":\"{\\\\\\\"sidecar.istio.io/statsInclusionPrefixes\\\\\\\": \\\\\\\"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\\\\\\\"}\",\"ISTIO_META_TLS_CLIENT_CERT_CHAIN\":\"/etc/identity/client/certificates/client.pem\",\"ISTIO_META_TLS_CLIENT_KEY\":\"/etc/identity/client/keys/client-key.pem\",\"ISTIO_META_TLS_CLIENT_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"ISTIO_META_TLS_SERVER_CERT_CHAIN\":\"/etc/identity/server/certificates/server.pem\",\"ISTIO_META_TLS_SERVER_KEY\":\"/etc/identity/server/keys/server-key.pem\",\"ISTIO_META_TLS_SERVER_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"KINGDOM\":\"updated_by_firebom\"},\"envoyAccessLogService\":{\"enabled\":false,\"host\":null,\"port\":null,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":null,\"clientCertificate\":null,\"mode\":\"DISABLE\",\"privateKey\":null,\"sni\":null,\"subjectAltNames\":[]}},\"envoyMetricsService\":{\"enabled\":true,\"host\":\"switchboard.service-mesh\",\"port\":15001,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":\"/client-certs/ca.pem\",\"clientCertificate\":\"/client-certs/client/certificates/client.pem\",\"mode\":\"MUTUAL\",\"privateKey\":\"/client-certs/client/keys/client-key.pem\",\"sni\":null,\"subjectAltNames\":[]}},\"envoyStatsd\":{\"enabled\":false,\"host\":null,\"port\":null},\"excludeIPRanges\":\"\",\"excludeInboundPorts\":\"\",\"excludeOutboundPorts\":\"\",\"image\":\"proxy\",\"inboundClusterStatName\":\"local_service.%%SERVICE_PORT%%\",\"includeIPRanges\":\"127.1.2.3/32\",\"includeInboundPorts\":\"*\",\"init\":{\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"50Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}}},\"kubevirtInterfaces\":\"\",\"listenPort\":15002,\"logLevel\":\"info\",\"outboundClusterStatName\":\"%%SERVICE%%.%%SERVICE_PORT%%\",\"outlierLogPath\":null,\"privileged\":false,\"protocolDetectionTimeout\":\"100ms\",\"readinessFailureThreshold\":30,\"readinessInitialDelaySeconds\":1,\"readinessPeriodSeconds\":2,\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"1024Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"}},\"statusPort\":15020,\"tracer\":\"zipkin\"},\"proxy_init\":{\"image\":\"proxy\"},\"sds\":{\"enabled\":false,\"token\":{\"aud\":\"istio-ca\"},\"udsPath\":\"\",\"useNormalJwt\":false,\"useTrustworthyJwt\":false},\"securityContext\":{\"fsGroup\":7447,\"runAsNonRoot\":true,\"runAsUser\":7447},\"tag\":\"928139e308cc9c5c0b6db84ac0151d8bb857e703\",\"tracer\":{\"datadog\":{\"address\":\"$(HOST_IP):8126\"},\"lightstep\":{\"accessToken\":\"\",\"address\":\"\",\"cacertPath\":\"\",\"secure\":true},\"stackdriver\":{\"debug\":false,\"maxNumberOfAnnotations\":200,\"maxNumberOfAttributes\":200,\"maxNumberOfMessageEvents\":200},\"zipkin\":{\"address\":\"zipkindirecttls.funnel.svc.mesh.sfdc.net:7442\"}},\"trustDomain\":\"\",\"trustDomainAliases\":[],\"useMCP\":false},\"grafana\":{\"enabled\":false},\"istio_cni\":{\"enabled\":false},\"istiocoredns\":{\"enabled\":false},\"kiali\":{\"enabled\":false},\"mixer\":{\"adapters\":{\"kubernetesenv\":{\"enabled\":true},\"prometheus\":{\"enabled\":true,\"metricsExpiryDuration\":\"10m\"},\"stdio\":{\"enabled\":false,\"outputAsJson\":true},\"useAdapterCRDs\":false},\"enabled\":false,\"env\":{\"GOMAXPROCS\":\"6\"},\"global\":{\"arch\":{\"amd64\":2,\"ppc64le\":2,\"s390x\":2},\"certificates\":[],\"configValidation\":false,\"controlPlaneSecurityEnabled\":true,\"customCertificates\":{\"ca\":{\"certPath\":\"cacerts.pem\",\"mountPath\":\"/etc/identity/ca\",\"volumeName\":\"ca\"},\"client\":{\"certPath\":\"certificates/client.pem\",\"keyPath\":\"keys/client-key.pem\",\"mountPath\":\"/etc/identity/client\",\"volumeName\":\"clientcert\"},\"enabled\":true,\"server\":{\"certPath\":\"certificates/server.pem\",\"keyPath\":\"keys/server-key.pem\",\"mountPath\":\"/etc/identity/server\",\"volumeName\":\"servercert\"}},\"defaultNodeSelector\":{},\"defaultPodDisruptionBudget\":{\"enabled\":false},\"defaultResources\":{\"requests\":{\"cpu\":\"10m\"}},\"defaultTolerations\":[],\"disablePolicyChecks\":true,\"enableHelmTest\":false,\"enableTracing\":false,\"hub\":\"%(istioHub)s\",\"imagePullPolicy\":\"Always\",\"imagePullSecrets\":null,\"istioNamespace\":\"mesh-control-plane\",\"k8sIngress\":{\"enableHttps\":false,\"enabled\":false,\"gatewayName\":\"ingressgateway\"},\"localityLbSetting\":{\"enabled\":true},\"logging\":{\"level\":\"default:warn\"},\"meshExpansion\":{\"enabled\":false,\"useILB\":false},\"meshID\":\"\",\"meshNetworks\":{},\"metricsScraper\":{\"enabled\":true,\"funnel\":{\"host\":\"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net\",\"port\":7442},\"hub\":\"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"2048Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"512Mi\"}},\"tag\":\"9972d78059cf97f688118c39c739ab1844f8df73\"},\"monitoringPort\":15014,\"mtls\":{\"auto\":true,\"enabled\":false},\"multiCluster\":{\"clusterName\":\"\",\"enabled\":false},\"network\":\"\",\"oneNamespace\":false,\"operatorManageWebhooks\":false,\"outboundTrafficPolicy\":{\"mode\":\"ALLOW_ANY\"},\"policyCheckFailOpen\":false,\"priorityClassName\":\"\",\"proxy\":{\"accessLogEncoding\":\"TEXT\",\"accessLogFile\":\"/dev/stdout\",\"accessLogFormat\":\"\",\"adminPort\":15373,\"autoInject\":\"disabled\",\"clusterDomain\":\"cluster.local\",\"componentLogLevel\":\"\",\"concurrency\":0,\"dnsRefreshRate\":\"300s\",\"enableCoreDump\":false,\"enableCoreDumpImage\":\"ubuntu:xenial\",\"env\":{\"ESTATE\":\"updated_by_firebom\",\"ISTIO_METAJSON_METRICS_INCLUSIONS\":\"{\\\\\\\"sidecar.istio.io/statsInclusionPrefixes\\\\\\\": \\\\\\\"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\\\\\\\"}\",\"ISTIO_META_TLS_CLIENT_CERT_CHAIN\":\"/etc/identity/client/certificates/client.pem\",\"ISTIO_META_TLS_CLIENT_KEY\":\"/etc/identity/client/keys/client-key.pem\",\"ISTIO_META_TLS_CLIENT_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"ISTIO_META_TLS_SERVER_CERT_CHAIN\":\"/etc/identity/server/certificates/server.pem\",\"ISTIO_META_TLS_SERVER_KEY\":\"/etc/identity/server/keys/server-key.pem\",\"ISTIO_META_TLS_SERVER_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"KINGDOM\":\"updated_by_firebom\"},\"envoyAccessLogService\":{\"enabled\":false,\"host\":null,\"port\":null,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":null,\"clientCertificate\":null,\"mode\":\"DISABLE\",\"privateKey\":null,\"sni\":null,\"subjectAltNames\":[]}},\"envoyMetricsService\":{\"enabled\":true,\"host\":\"switchboard.service-mesh\",\"port\":15001,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":\"/client-certs/ca.pem\",\"clientCertificate\":\"/client-certs/client/certificates/client.pem\",\"mode\":\"MUTUAL\",\"privateKey\":\"/client-certs/client/keys/client-key.pem\",\"sni\":null,\"subjectAltNames\":[]}},\"envoyStatsd\":{\"enabled\":false,\"host\":null,\"port\":null},\"excludeIPRanges\":\"\",\"excludeInboundPorts\":\"\",\"excludeOutboundPorts\":\"\",\"image\":\"proxy\",\"inboundClusterStatName\":\"local_service.%%SERVICE_PORT%%\",\"includeIPRanges\":\"127.1.2.3/32\",\"includeInboundPorts\":\"*\",\"init\":{\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"50Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}}},\"kubevirtInterfaces\":\"\",\"listenPort\":15002,\"logLevel\":\"info\",\"outboundClusterStatName\":\"%%SERVICE%%.%%SERVICE_PORT%%\",\"outlierLogPath\":null,\"privileged\":false,\"protocolDetectionTimeout\":\"100ms\",\"readinessFailureThreshold\":30,\"readinessInitialDelaySeconds\":1,\"readinessPeriodSeconds\":2,\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"1024Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"}},\"statusPort\":15020,\"tracer\":\"zipkin\"},\"proxy_init\":{\"image\":\"proxy\"},\"sds\":{\"enabled\":false,\"token\":{\"aud\":\"istio-ca\"},\"udsPath\":\"\",\"useNormalJwt\":false,\"useTrustworthyJwt\":false},\"securityContext\":{\"fsGroup\":7447,\"runAsNonRoot\":true,\"runAsUser\":7447},\"tag\":\"928139e308cc9c5c0b6db84ac0151d8bb857e703\",\"tracer\":{\"datadog\":{\"address\":\"$(HOST_IP):8126\"},\"lightstep\":{\"accessToken\":\"\",\"address\":\"\",\"cacertPath\":\"\",\"secure\":true},\"stackdriver\":{\"debug\":false,\"maxNumberOfAnnotations\":200,\"maxNumberOfAttributes\":200,\"maxNumberOfMessageEvents\":200},\"zipkin\":{\"address\":\"zipkindirecttls.funnel.svc.mesh.sfdc.net:7442\"}},\"trustDomain\":\"\",\"trustDomainAliases\":[],\"useMCP\":false},\"image\":\"mixer\",\"nodeSelector\":{},\"podAnnotations\":{},\"podAntiAffinityLabelSelector\":[],\"podAntiAffinityTermLabelSelector\":[],\"policy\":{\"autoscaleEnabled\":true,\"autoscaleMax\":5,\"autoscaleMin\":1,\"cpu\":{\"targetAverageUtilization\":80},\"enabled\":false,\"replicaCount\":1,\"rollingMaxSurge\":\"100%%\",\"rollingMaxUnavailable\":\"25%%\"},\"telemetry\":{\"autoscaleEnabled\":true,\"autoscaleMax\":5,\"autoscaleMin\":1,\"cpu\":{\"targetAverageUtilization\":80},\"enabled\":false,\"loadshedding\":{\"latencyThreshold\":\"100ms\",\"mode\":\"enforce\"},\"replicaCount\":1,\"reportBatchMaxEntries\":100,\"reportBatchMaxTime\":\"1s\",\"resources\":{\"limits\":{\"cpu\":\"4800m\",\"memory\":\"4G\"},\"requests\":{\"cpu\":\"1000m\",\"memory\":\"1G\"}},\"rollingMaxSurge\":\"100%%\",\"rollingMaxUnavailable\":\"25%%\",\"sessionAffinityEnabled\":false},\"templates\":{\"useTemplateCRDs\":false},\"tolerations\":[]},\"nodeagent\":{\"enabled\":false},\"pilot\":{\"autoscaleEnabled\":false,\"autoscaleMax\":5,\"autoscaleMin\":1,\"configSource\":{\"subscribedResources\":null},\"cpu\":{\"targetAverageUtilization\":80},\"enableProtocolSniffingForInbound\":false,\"enableProtocolSniffingForOutbound\":false,\"enabled\":true,\"env\":{\"ESTATE\":\"updated_by_firebom\",\"PILOT_ENABLE_CRD_VALIDATION\":\"true\",\"PILOT_ENABLE_REDIS_FILTER\":\"true\",\"PILOT_PUSH_THROTTLE\":100,\"PILOT_SIDECAR_USE_REMOTE_ADDRESS\":\"true\",\"SETTINGS_PATH\":\"updated_by_firebom\",\"SETTINGS_SUPERPOD\":\"-\"},\"global\":{\"arch\":{\"amd64\":2,\"ppc64le\":2,\"s390x\":2},\"certificates\":[],\"configValidation\":false,\"controlPlaneSecurityEnabled\":true,\"customCertificates\":{\"ca\":{\"certPath\":\"cacerts.pem\",\"mountPath\":\"/etc/identity/ca\",\"volumeName\":\"ca\"},\"client\":{\"certPath\":\"certificates/client.pem\",\"keyPath\":\"keys/client-key.pem\",\"mountPath\":\"/etc/identity/client\",\"volumeName\":\"clientcert\"},\"enabled\":true,\"server\":{\"certPath\":\"certificates/server.pem\",\"keyPath\":\"keys/server-key.pem\",\"mountPath\":\"/etc/identity/server\",\"volumeName\":\"servercert\"}},\"defaultNodeSelector\":{},\"defaultPodDisruptionBudget\":{\"enabled\":false},\"defaultResources\":{\"requests\":{\"cpu\":\"10m\"}},\"defaultTolerations\":[],\"disablePolicyChecks\":true,\"enableHelmTest\":false,\"enableTracing\":false,\"hub\":\"%(istioHub)s\",\"imagePullPolicy\":\"Always\",\"imagePullSecrets\":null,\"istioNamespace\":\"mesh-control-plane\",\"k8sIngress\":{\"enableHttps\":false,\"enabled\":false,\"gatewayName\":\"ingressgateway\"},\"localityLbSetting\":{\"enabled\":true},\"logging\":{\"level\":\"default:warn\"},\"meshExpansion\":{\"enabled\":false,\"useILB\":false},\"meshID\":\"\",\"meshNetworks\":{},\"metricsScraper\":{\"enabled\":true,\"funnel\":{\"host\":\"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net\",\"port\":7442},\"hub\":\"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"2048Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"512Mi\"}},\"tag\":\"9972d78059cf97f688118c39c739ab1844f8df73\"},\"monitoringPort\":15014,\"mtls\":{\"auto\":true,\"enabled\":false},\"multiCluster\":{\"clusterName\":\"\",\"enabled\":false},\"network\":\"\",\"oneNamespace\":false,\"operatorManageWebhooks\":false,\"outboundTrafficPolicy\":{\"mode\":\"ALLOW_ANY\"},\"policyCheckFailOpen\":false,\"priorityClassName\":\"\",\"proxy\":{\"accessLogEncoding\":\"TEXT\",\"accessLogFile\":\"/dev/stdout\",\"accessLogFormat\":\"\",\"adminPort\":15373,\"autoInject\":\"disabled\",\"clusterDomain\":\"cluster.local\",\"componentLogLevel\":\"\",\"concurrency\":0,\"dnsRefreshRate\":\"300s\",\"enableCoreDump\":false,\"enableCoreDumpImage\":\"ubuntu:xenial\",\"env\":{\"ESTATE\":\"updated_by_firebom\",\"ISTIO_METAJSON_METRICS_INCLUSIONS\":\"{\\\\\\\"sidecar.istio.io/statsInclusionPrefixes\\\\\\\": \\\\\\\"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\\\\\\\"}\",\"ISTIO_META_TLS_CLIENT_CERT_CHAIN\":\"/etc/identity/client/certificates/client.pem\",\"ISTIO_META_TLS_CLIENT_KEY\":\"/etc/identity/client/keys/client-key.pem\",\"ISTIO_META_TLS_CLIENT_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"ISTIO_META_TLS_SERVER_CERT_CHAIN\":\"/etc/identity/server/certificates/server.pem\",\"ISTIO_META_TLS_SERVER_KEY\":\"/etc/identity/server/keys/server-key.pem\",\"ISTIO_META_TLS_SERVER_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"KINGDOM\":\"updated_by_firebom\"},\"envoyAccessLogService\":{\"enabled\":false,\"host\":null,\"port\":null,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":null,\"clientCertificate\":null,\"mode\":\"DISABLE\",\"privateKey\":null,\"sni\":null,\"subjectAltNames\":[]}},\"envoyMetricsService\":{\"enabled\":true,\"host\":\"switchboard.service-mesh\",\"port\":15001,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":\"/client-certs/ca.pem\",\"clientCertificate\":\"/client-certs/client/certificates/client.pem\",\"mode\":\"MUTUAL\",\"privateKey\":\"/client-certs/client/keys/client-key.pem\",\"sni\":null,\"subjectAltNames\":[]}},\"envoyStatsd\":{\"enabled\":false,\"host\":null,\"port\":null},\"excludeIPRanges\":\"\",\"excludeInboundPorts\":\"\",\"excludeOutboundPorts\":\"\",\"image\":\"proxy\",\"inboundClusterStatName\":\"local_service.%%SERVICE_PORT%%\",\"includeIPRanges\":\"127.1.2.3/32\",\"includeInboundPorts\":\"*\",\"init\":{\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"50Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}}},\"kubevirtInterfaces\":\"\",\"listenPort\":15002,\"logLevel\":\"info\",\"outboundClusterStatName\":\"%%SERVICE%%.%%SERVICE_PORT%%\",\"outlierLogPath\":null,\"privileged\":false,\"protocolDetectionTimeout\":\"100ms\",\"readinessFailureThreshold\":30,\"readinessInitialDelaySeconds\":1,\"readinessPeriodSeconds\":2,\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"1024Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"}},\"statusPort\":15020,\"tracer\":\"zipkin\"},\"proxy_init\":{\"image\":\"proxy\"},\"sds\":{\"enabled\":false,\"token\":{\"aud\":\"istio-ca\"},\"udsPath\":\"\",\"useNormalJwt\":false,\"useTrustworthyJwt\":false},\"securityContext\":{\"fsGroup\":7447,\"runAsNonRoot\":true,\"runAsUser\":7447},\"tag\":\"928139e308cc9c5c0b6db84ac0151d8bb857e703\",\"tracer\":{\"datadog\":{\"address\":\"$(HOST_IP):8126\"},\"lightstep\":{\"accessToken\":\"\",\"address\":\"\",\"cacertPath\":\"\",\"secure\":true},\"stackdriver\":{\"debug\":false,\"maxNumberOfAnnotations\":200,\"maxNumberOfAttributes\":200,\"maxNumberOfMessageEvents\":200},\"zipkin\":{\"address\":\"zipkindirecttls.funnel.svc.mesh.sfdc.net:7442\"}},\"trustDomain\":\"\",\"trustDomainAliases\":[],\"useMCP\":false},\"image\":\"pilot\",\"keepaliveMaxServerConnectionAge\":\"30m\",\"nodeSelector\":{},\"podAnnotations\":{},\"podAntiAffinityLabelSelector\":[],\"podAntiAffinityTermLabelSelector\":[],\"replicaCount\":3,\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"4096Mi\"},\"requests\":{\"cpu\":\"500m\",\"memory\":\"2048Mi\"}},\"rollingMaxSurge\":\"100%%\",\"rollingMaxUnavailable\":\"25%%\",\"sidecar\":true,\"tolerations\":[],\"traceSampling\":1},\"prometheus\":{\"enabled\":false},\"security\":{\"enabled\":false},\"sidecarInjectorWebhook\":{\"alwaysInjectSelector\":[],\"enableNamespacesByDefault\":true,\"enabled\":true,\"env\":{\"ESTATE\":\"updated_by_firebom\",\"SETTINGS_PATH\":\"updated_by_firebom\",\"SETTINGS_SUPERPOD\":\"-\"},\"global\":{\"arch\":{\"amd64\":2,\"ppc64le\":2,\"s390x\":2},\"certificates\":[],\"configValidation\":false,\"controlPlaneSecurityEnabled\":true,\"customCertificates\":{\"ca\":{\"certPath\":\"cacerts.pem\",\"mountPath\":\"/etc/identity/ca\",\"volumeName\":\"ca\"},\"client\":{\"certPath\":\"certificates/client.pem\",\"keyPath\":\"keys/client-key.pem\",\"mountPath\":\"/etc/identity/client\",\"volumeName\":\"clientcert\"},\"enabled\":true,\"server\":{\"certPath\":\"certificates/server.pem\",\"keyPath\":\"keys/server-key.pem\",\"mountPath\":\"/etc/identity/server\",\"volumeName\":\"servercert\"}},\"defaultNodeSelector\":{},\"defaultPodDisruptionBudget\":{\"enabled\":false},\"defaultResources\":{\"requests\":{\"cpu\":\"10m\"}},\"defaultTolerations\":[],\"disablePolicyChecks\":true,\"enableHelmTest\":false,\"enableTracing\":false,\"hub\":\"%(istioHub)s\",\"imagePullPolicy\":\"Always\",\"imagePullSecrets\":null,\"istioNamespace\":\"mesh-control-plane\",\"k8sIngress\":{\"enableHttps\":false,\"enabled\":false,\"gatewayName\":\"ingressgateway\"},\"localityLbSetting\":{\"enabled\":true},\"logging\":{\"level\":\"default:warn\"},\"meshExpansion\":{\"enabled\":false,\"useILB\":false},\"meshID\":\"\",\"meshNetworks\":{},\"metricsScraper\":{\"enabled\":true,\"funnel\":{\"host\":\"ajnafunneldirecttls.funnel.svc.mesh.sfdc.net\",\"port\":7442},\"hub\":\"791719295754.dkr.ecr.us-east-2.amazonaws.com/sfci/servicemesh/servicemesh/metrics-scraper\",\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"2048Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"512Mi\"}},\"tag\":\"9972d78059cf97f688118c39c739ab1844f8df73\"},\"monitoringPort\":15014,\"mtls\":{\"auto\":true,\"enabled\":false},\"multiCluster\":{\"clusterName\":\"\",\"enabled\":false},\"network\":\"\",\"oneNamespace\":false,\"operatorManageWebhooks\":false,\"outboundTrafficPolicy\":{\"mode\":\"ALLOW_ANY\"},\"policyCheckFailOpen\":false,\"priorityClassName\":\"\",\"proxy\":{\"accessLogEncoding\":\"TEXT\",\"accessLogFile\":\"/dev/stdout\",\"accessLogFormat\":\"\",\"adminPort\":15373,\"autoInject\":\"disabled\",\"clusterDomain\":\"cluster.local\",\"componentLogLevel\":\"\",\"concurrency\":0,\"dnsRefreshRate\":\"300s\",\"enableCoreDump\":false,\"enableCoreDumpImage\":\"ubuntu:xenial\",\"env\":{\"ESTATE\":\"updated_by_firebom\",\"ISTIO_METAJSON_METRICS_INCLUSIONS\":\"{\\\\\\\"sidecar.istio.io/statsInclusionPrefixes\\\\\\\": \\\\\\\"access_log_file,cluster,cluster_manager,control_plane,http,http2,http_mixer_filter,listener,listener_manager,redis,runtime,server,stats,tcp,tcp_mixer_filter,tracing\\\\\\\"}\",\"ISTIO_META_TLS_CLIENT_CERT_CHAIN\":\"/etc/identity/client/certificates/client.pem\",\"ISTIO_META_TLS_CLIENT_KEY\":\"/etc/identity/client/keys/client-key.pem\",\"ISTIO_META_TLS_CLIENT_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"ISTIO_META_TLS_SERVER_CERT_CHAIN\":\"/etc/identity/server/certificates/server.pem\",\"ISTIO_META_TLS_SERVER_KEY\":\"/etc/identity/server/keys/server-key.pem\",\"ISTIO_META_TLS_SERVER_ROOT_CERT\":\"/etc/identity/ca/cacerts.pem\",\"KINGDOM\":\"updated_by_firebom\"},\"envoyAccessLogService\":{\"enabled\":false,\"host\":null,\"port\":null,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":null,\"clientCertificate\":null,\"mode\":\"DISABLE\",\"privateKey\":null,\"sni\":null,\"subjectAltNames\":[]}},\"envoyMetricsService\":{\"enabled\":true,\"host\":\"switchboard.service-mesh\",\"port\":15001,\"tcpKeepalive\":{\"interval\":\"10s\",\"probes\":3,\"time\":\"10s\"},\"tlsSettings\":{\"caCertificates\":\"/client-certs/ca.pem\",\"clientCertificate\":\"/client-certs/client/certificates/client.pem\",\"mode\":\"MUTUAL\",\"privateKey\":\"/client-certs/client/keys/client-key.pem\",\"sni\":null,\"subjectAltNames\":[]}},\"envoyStatsd\":{\"enabled\":false,\"host\":null,\"port\":null},\"excludeIPRanges\":\"\",\"excludeInboundPorts\":\"\",\"excludeOutboundPorts\":\"\",\"image\":\"proxy\",\"inboundClusterStatName\":\"local_service.%%SERVICE_PORT%%\",\"includeIPRanges\":\"127.1.2.3/32\",\"includeInboundPorts\":\"*\",\"init\":{\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"50Mi\"},\"requests\":{\"cpu\":\"10m\",\"memory\":\"10Mi\"}}},\"kubevirtInterfaces\":\"\",\"listenPort\":15002,\"logLevel\":\"info\",\"outboundClusterStatName\":\"%%SERVICE%%.%%SERVICE_PORT%%\",\"outlierLogPath\":null,\"privileged\":false,\"protocolDetectionTimeout\":\"100ms\",\"readinessFailureThreshold\":30,\"readinessInitialDelaySeconds\":1,\"readinessPeriodSeconds\":2,\"resources\":{\"limits\":{\"cpu\":\"2000m\",\"memory\":\"1024Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"128Mi\"}},\"statusPort\":15020,\"tracer\":\"zipkin\"},\"proxy_init\":{\"image\":\"proxy\"},\"sds\":{\"enabled\":false,\"token\":{\"aud\":\"istio-ca\"},\"udsPath\":\"\",\"useNormalJwt\":false,\"useTrustworthyJwt\":false},\"securityContext\":{\"fsGroup\":7447,\"runAsNonRoot\":true,\"runAsUser\":7447},\"tag\":\"928139e308cc9c5c0b6db84ac0151d8bb857e703\",\"tracer\":{\"datadog\":{\"address\":\"$(HOST_IP):8126\"},\"lightstep\":{\"accessToken\":\"\",\"address\":\"\",\"cacertPath\":\"\",\"secure\":true},\"stackdriver\":{\"debug\":false,\"maxNumberOfAnnotations\":200,\"maxNumberOfAttributes\":200,\"maxNumberOfMessageEvents\":200},\"zipkin\":{\"address\":\"zipkindirecttls.funnel.svc.mesh.sfdc.net:7442\"}},\"trustDomain\":\"\",\"trustDomainAliases\":[],\"useMCP\":false},\"image\":\"sidecar_injector\",\"injectedAnnotations\":{},\"neverInjectSelector\":[],\"nodeSelector\":{},\"podAnnotations\":{},\"podAntiAffinityLabelSelector\":[],\"podAntiAffinityTermLabelSelector\":[],\"replicaCount\":3,\"rewriteAppHTTPProbe\":false,\"rollingMaxSurge\":\"100%%\",\"rollingMaxUnavailable\":\"25%%\",\"tolerations\":[]},\"tracing\":{\"enabled\":false}}" % mcpIstioConfig,
  },
  kind: "ConfigMap",
  metadata: {
    annotations: {
      "strategy.spinnaker.io/versioned": "false",
    },
    labels: {
      app: "istio",
      istio: "sidecar-injector",
      release: "istio",
    },
    name: "istio-sidecar-injector",
    namespace: "mesh-control-plane",
  },
}

else "SKIP"
