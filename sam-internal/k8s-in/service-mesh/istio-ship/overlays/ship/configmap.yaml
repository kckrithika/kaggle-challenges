# IMPORTANT - To preserve SAM k8s out yaml formatting, 
#   do NOT leave any empty lines or comments in multi-line config values.
# This would be of immense help when comparing the final k8s out directory & 
#   would prevent bugs due to lack of readability in k8s-out for ConfigMap.
apiVersion: v1
data:
  mesh: |-
    disablePolicyChecks: false
    enableTracing: true
    accessLogFile: "/dev/stdout"
    accessLogFormat: ""
    accessLogEncoding: 'TEXT'
    ingressService: istio-ingressgateway
    dnsRefreshRate: 300s
    sdsUdsPath:
    enableSdsTokenMount: false
    sdsUseK8sSaJwt: false
    trustDomain:
    outboundTrafficPolicy:
      mode: ALLOW_ANY
    rootNamespace: mesh-control-plane
    proxyListenPort: 15006
    proxyHttpPort: -1 # Negative value to disable http proxy listener for interceptionMode NONE.
    defaultConfig:
      connectTimeout: 10s
      configPath: "/etc/istio/proxy"
      binaryPath: "/usr/local/bin/envoy"
      serviceCluster: istio-proxy
      drainDuration: 45s
      parentShutdownDuration: 1m0s
      interceptionMode: REDIRECT
      proxyAdminPort: 15373
      concurrency: 2
      tracing:
        zipkin:
          address: zipkin.service-mesh:9411
      envoyMetricsService:
        address: switchboard.service-mesh:15001
      controlPlaneAuthPolicy: MUTUAL_TLS
      discoveryAddress: istio-pilot.mesh-control-plane:15011
  meshNetworks: |-
    networks: {}
kind: ConfigMap
metadata:
  name: istio
  namespace: mesh-control-plane