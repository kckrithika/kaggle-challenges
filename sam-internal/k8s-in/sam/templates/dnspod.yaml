apiVersion: v1
kind: Pod
metadata:
  annotations:
    scheduler.alpha.kubernetes.io/critical-pod: ""
  creationTimestamp: 2018-07-18T21:49:48Z
  generateName: kube-dns-554fb76c85-
  labels:
    k8s-app: kube-dns
    pod-template-hash: "1109632741"
  name: kube-dns-554fb76c85-j6wbg
  namespace: kube-system
  ownerReferences:
  - apiVersion: extensions/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: ReplicaSet
    name: kube-dns-554fb76c85
    uid: 7dbf2f6d-8ad4-11e8-a7c8-1418776a3591
  resourceVersion: "715672589"
  selfLink: /api/v1/namespaces/kube-system/pods/kube-dns-554fb76c85-j6wbg
  uid: 7dc08323-8ad4-11e8-a7c8-1418776a3591
spec:
  containers:
  - args:
    - --domain=prd-samtest.prd.sam.sfdc.net.
    - --dns-port=10053
    - --kubecfg-file=/etc/kubernetes/kubeconfig
    - --v=2
    env:
    - name: PROMETHEUS_PORT
      value: "10055"
    - name: TEST
      value: "2"
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-kube-dns-amd64:1.14.10-2-g71f9bf5-dirty
    imagePullPolicy: IfNotPresent
    livenessProbe:
      failureThreshold: 5
      httpGet:
        path: /healthcheck/kubedns
        port: 10054
        scheme: HTTP
      initialDelaySeconds: 60
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 5
    name: kubedns
    ports:
    - containerPort: 10053
      name: dns-local
      protocol: UDP
    - containerPort: 10053
      name: dns-tcp-local
      protocol: TCP
    - containerPort: 10055
      name: metrics
      protocol: TCP
    readinessProbe:
      failureThreshold: 3
      httpGet:
        path: /readiness
        port: 8081
        scheme: HTTP
      initialDelaySeconds: 3
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 5
    resources:
      limits:
        memory: 170Mi
      requests:
        cpu: 100m
        memory: 70Mi
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
    volumeMounts:
    - mountPath: /etc/kubernetes
      name: kubernetes
    - mountPath: /etc/pki_service
      name: maddog-certs
    - mountPath: /data/certs
      name: certs
  - args:
    - -v=2
    - -logtostderr
    - -configDir=/etc/k8s/dns/dnsmasq-nanny
    - -restartDnsmasq=true
    - --
    - -k
    - --cache-size=1000
    - --log-facility=-
    - --server=/prd-samtest.prd.sam.sfdc.net/127.0.0.1#10053
    - --server=/in-addr.arpa/127.0.0.1#10053
    - --server=/ip6.arpa/127.0.0.1#10053
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-dnsmasq-nanny-amd64:1.14.10-2-g71f9bf5-dirty
    imagePullPolicy: IfNotPresent
    livenessProbe:
      failureThreshold: 5
      httpGet:
        path: /healthcheck/dnsmasq
        port: 10054
        scheme: HTTP
      initialDelaySeconds: 60
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 5
    name: dnsmasq
    ports:
    - containerPort: 53
      name: dns
      protocol: UDP
    - containerPort: 53
      name: dns-tcp
      protocol: TCP
    resources:
      requests:
        cpu: 150m
        memory: 20Mi
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
  - args:
    - --v=2
    - --logtostderr
    - --probe=kubedns,127.0.0.1:10053,kubernetes.default.svc.prd-samtest.prd.sam.sfdc.net,5,A
    - --probe=dnsmasq,127.0.0.1:53,kubernetes.default.svc.prd-samtest.prd.sam.sfdc.net,5,A
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-sidecar-amd64:1.14.10-2-g71f9bf5-dirty
    imagePullPolicy: IfNotPresent
    livenessProbe:
      failureThreshold: 5
      httpGet:
        path: /metrics
        port: 10054
        scheme: HTTP
      initialDelaySeconds: 60
      periodSeconds: 10
      successThreshold: 1
      timeoutSeconds: 5
    name: sidecar
    ports:
    - containerPort: 10054
      name: metrics
      protocol: TCP
    resources:
      requests:
        cpu: 10m
        memory: 20Mi
    terminationMessagePath: /dev/termination-log
    terminationMessagePolicy: File
  dnsPolicy: Default
  nodeName: shared0-samtestkubeapi2-1-prd.eng.sfdc.net
  nodeSelector:
    master: "true"
  restartPolicy: Always
  schedulerName: default-scheduler
  securityContext: {}
  serviceAccount: kube-dns
  serviceAccountName: kube-dns
  terminationGracePeriodSeconds: 30
  tolerations:
  - key: CriticalAddonsOnly
    operator: Exists
  volumes:
  - hostPath:
      path: /etc/kubernetes
      type: ""
    name: kubernetes
  - hostPath:
      path: /etc/pki_service
      type: ""
    name: maddog-certs
  - hostPath:
      path: /data/certs
      type: ""
    name: certs
status:
  conditions:
  - lastProbeTime: null
    lastTransitionTime: 2018-07-18T21:49:48Z
    status: "True"
    type: Initialized
  - lastProbeTime: null
    lastTransitionTime: 2018-07-21T00:11:55Z
    status: "True"
    type: Ready
  - lastProbeTime: null
    lastTransitionTime: 2018-07-18T21:49:48Z
    status: "True"
    type: PodScheduled
  containerStatuses:
  - containerID: docker://b87354e07385753591d969c85a6b99427f9d21cb16ca605adabc82d774e83878
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-dnsmasq-nanny-amd64:1.14.10-2-g71f9bf5-dirty
    imageID: docker-pullable://ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-dnsmasq-nanny-amd64@sha256:3426cef9bd61c73f8e52b2461663cc419ec92fba2fdf606d69e13993a5db9abc
    lastState: {}
    name: dnsmasq
    ready: true
    restartCount: 0
    state:
      running:
        startedAt: 2018-07-18T21:49:49Z
  - containerID: docker://7b6fc65251d4a95f03859daa35247c0d06f7575f93441473be398d346191606c
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-kube-dns-amd64:1.14.10-2-g71f9bf5-dirty
    imageID: docker-pullable://ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-kube-dns-amd64@sha256:2c7cca768d65e18cc294f5909e5e65075aacf57361f735a0619885143acf92ba
    lastState: {}
    name: kubedns
    ready: true
    restartCount: 0
    state:
      running:
        startedAt: 2018-07-18T21:49:49Z
  - containerID: docker://f652c72c841567783a1412074fa2cc33bc5c741f8993d956daf0b2df5fcb555a
    image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-sidecar-amd64:1.14.10-2-g71f9bf5-dirty
    imageID: docker-pullable://ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/k8s-dns-sidecar-amd64@sha256:ae6d9634ed52957876e18bfa6ee9b83822b6d629b50430ca85869d8024cbbd05
    lastState: {}
    name: sidecar
    ready: true
    restartCount: 0
    state:
      running:
        startedAt: 2018-07-18T21:49:50Z
  hostIP: 10.231.100.2
  phase: Running
  podIP: 10.251.158.54
  qosClass: Burstable
  startTime: 2018-07-18T21:49:48Z
