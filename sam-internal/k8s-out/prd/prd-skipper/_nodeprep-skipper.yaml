apiVersion: v1
items:
- apiVersion: v1
  kind: Namespace
  metadata:
    name: sam-system
- apiVersion: v1
  kind: Namespace
  metadata:
    name: storage-foundation
- apiVersion: v1
  kind: Namespace
  metadata:
    name: legostore
- apiVersion: extensions/v1beta1
  kind: DaemonSet
  metadata:
    labels:
      cloud: storage
      team: storage-foundation
    name: node-initializer
    namespace: storage-foundation
  spec:
    template:
      metadata:
        labels:
          app: node-initializer
          cloud: storage
          team: storage-foundation
      spec:
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: storage.salesforce.com/nodeprep
                  operator: DoesNotExist
        containers:
        - env:
          - name: MY_NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          - name: KUBEVAR_POD_NAME
            valueFrom:
              fieldRef:
                fieldPath: metadata.name
          - name: KUBEVAR_POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/nodeprep-skipper:base-0000380-573c92f8
          imagePullPolicy: Always
          name: initializer
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /mnt/parent-node-mnt
            name: parent-node-mnt
        tolerations:
        - effect: NoSchedule
          key: node-role.kubernetes.io/master
          operator: Exists
        volumes:
        - hostPath:
            path: /mnt
          name: parent-node-mnt
        - emptyDir: {}
          name: container-log-vol
kind: List
metadata: {}
