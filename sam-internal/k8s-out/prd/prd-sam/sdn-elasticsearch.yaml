apiVersion: apps/v1beta1
kind: StatefulSet
metadata:
  labels:
    name: sdn-elasticsearch
  name: sdn-elasticsearch
  namespace: sam-system
spec:
  replicas: 1
  serviceName: sdn-elasticsearch
  template:
    metadata:
      labels:
        apptype: monitoring
        name: sdn-elasticsearch
      namespace: sam-system
    spec:
      containers:
      - env:
        - name: RUN
          value: elasticsearch
        - name: http_port
          value: 9123
        image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sdn/hyperelk:v-0000089-cb737976
        name: sdn-elasticsearch
        ports:
        - containerPort: 9123
        volumeMounts:
        - mountPath: /usr/share/elasticsearch/data
          name: sdn-dashboard
      hostNetwork: true
      nodeSelector:
        pool: prd-sam
      securityContext:
        fsGroup: 7447
      terminationGracePeriodSeconds: 30
  volumeClaimTemplates:
  - metadata:
      name: sdn-dashboard
    spec:
      accessModes:
      - ReadWriteOnce
      resources:
        requests:
          storage: 500Gi
      storageClassName: sdn-dashboard-hdd-pool
