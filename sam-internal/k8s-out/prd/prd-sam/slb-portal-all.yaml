apiVersion: v1
items:
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: slb-portal-ord
      sam.data.sfdc.net/owner: slb
    name: slb-portal-ord
    namespace: sam-system
  spec:
    minReadySeconds: 30
    replicas: 1
    selector:
      matchLabels:
        name: slb-portal-ord
        sam.data.sfdc.net/owner: slb
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        annotations:
          madkub.sam.sfdc.net/allcerts: |-
            {
             "certreqs": [
              {
               "cert-type": "client",
               "kingdom": "prd",
               "name": "cert3",
               "role": "slb.internal"
              }
             ]
            }
        labels:
          name: slb-portal-ord
          sam.data.sfdc.net/owner: slb
        namespace: sam-system
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - slb-ipvs
              topologyKey: kubernetes.io/hostname
        containers:
        - command:
          - /sdn/slb-portal
          - --hostname=$(NODE_NAME)
          - --templatePath=/sdn/webfiles
          - --port=9112
          - --client.serverInterface=lo
          - --keyfile=/cert3/client/keys/client-key.pem
          - --certfile=/cert3/client/certificates/client.pem
          - --log_dir=/host/data/slb/logs/slb-portal-ord
          - --cafile=/cert3/ca/cabundle.pem
          - --aggregatedPortal=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-ord
          - --client.dialSocket=true
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /webfiles/
              port: 9112
            initialDelaySeconds: 30
            periodSeconds: 3
            timeoutSeconds: 30
          name: slb-portal-ord
          resources:
            limits:
              sam.sfdc.net/ip-address: "1"
            requests:
              sam.sfdc.net/ip-address: "1"
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /data/certs
            name: certs
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /config
            name: config
          - mountPath: /cert3
            name: cert3
        - command:
          - /sdn/slb-config-processor
          - --configDir=/host/data/slb/config/slb-portal-ord
          - --period=1800s
          - --vipsToAcl=
          - --podPhaseCheck=true
          - --namespace=
          - --podstatus=running
          - --subnet=10.251.196.0/22
          - --k8sapiserver=
          - --serviceList=csrlb,controlplane-ptest
          - --useVipLabelToSelectSvcs=true
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --log_dir=/host/data/slb/logs/slb-portal-ord
          - --sleepTime=100ms
          - --livenessProbePort=9876
          - --shouldRemoveConfig=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --proxySelectorLabelValue=slb-nginx-config-b
          - --hostnameOverride=$(NODE_NAME)
          - --servicesToLbOverride=
          - --servicesNotToLbOverride=illumio-proxy-svc,illumio-dsr-nonhost-svc,illumio-dsr-host-svc
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-ord/slb-config-proc.sentinel
          - --vipdnsoptions.viplocation=ord-sam.ord
          - --k8sapiserver=http://pseudo-kubeapi.csc-sam.prd-sam.prd.slb.sfdc.net:40001/ord-sam
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /liveness-probe
              port: 9876
            initialDelaySeconds: 600
            periodSeconds: 30
            timeoutSeconds: 5
          name: slb-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-ord
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-ord
            name: var-logs-volume
          - mountPath: /data/certs
            name: certs
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /proxyconfig
            name: proxyconfig
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=1h
          - --filesDirToCleanup=/host/data/slb/config/slb-portal-ord
          - --shouldSkipServiceRecords=true
          - --shouldNotDeleteAllFiles=true
          - --log_dir=/host/data/slb/logs/slb-portal-ord
          - --shouldSkipSlbBlock=true
          - --skipFilesWithSuffix=.sock
          - --maxDeleteFileCount=20
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-ord
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-ord
            name: var-logs-volume
        - command:
          - /sdn/slb-node-api
          - --port=9130
          - --configDir=/host/data/slb/config/slb-portal-ord
          - --log_dir=/host/data/slb/logs/slb-portal-ord
          - --netInterface=lo
          - --checkSentinel=true
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-ord/slb-config-proc.sentinel
          - --control.sentinelExpiration=1800s
          - --listenOnSocket=true
          - --readOnly=false
          - --checkMwSentinel=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-ord/slb-manifest-watcher.sentinel
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-node-api
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/logs/slb-portal-ord
            name: var-logs-volume
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=48h
          - --log_dir=/host/data/slb/logs/slb-portal-ord/cleanup
          - --filesDirToCleanup=/host/data/slb/logs/slb-portal-ord
          - --shouldSkipServiceRecords=false
          - --shouldNotDeleteAllFiles=false
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-ord
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-ord
            name: var-logs-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /host/data/slb/logs/slb-portal-ord/cleanup
            name: var-cleanup-logs-volume
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          - --refresher
          - --run-init-for-refresher-mode
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-refresher
          resources: {}
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        - command:
          - /sdn/slb-manifest-watcher
          - --manifestOutputDir=/host/data/slb/manifests/slb-portal-ord
          - --tnrpEndpoint=https://ops0-piperepo1-0-prd.data.sfdc.net/
          - --hostnameOverride=$(NODE_NAME)
          - --log_dir=/host/data/slb/logs/slb-portal-ord
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-ord
          - --client.dialSocket=true
          - --maxDeleteLimit=50
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --vcioptions.strict=true
          - --client.allowStale=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-ord/slb-manifest-watcher.sentinel
          - --vipdnsoptions.viplocation=ord-sam.ord
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-manifest-watcher
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /proxyconfig
            name: proxyconfig
        dnsPolicy: Default
        initContainers:
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-init
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        nodeSelector:
          pool: prd-slb
        terminationGracePeriodSeconds: 5
        volumes:
        - hostPath:
            path: /data/slb
          name: var-slb-volume
        - hostPath:
            path: /etc/pki_service
          name: maddog-certs
        - hostPath:
            path: /data/slb/config/slb-portal-ord
          name: var-config-volume
        - hostPath:
            path: /data/slb/logs/slb-portal-ord
          name: var-logs-volume
        - configMap:
            name: sfdchosts
          name: sfdchosts
        - hostPath:
            path: /data/certs
          name: certs
        - hostPath:
            path: /etc/kubernetes
          name: kubeconfig
        - hostPath:
            path: /data/slb/logs/slb-portal-ord/cleanup
          name: var-cleanup-logs-volume
        - configMap:
            name: slb-proxy-configuration
          name: proxyconfig
        - configMap:
            name: slb-portal-links
          name: config
        - emptyDir:
            medium: Memory
          name: cert3
        - emptyDir:
            medium: Memory
          name: tokens
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: slb-portal-iad
      sam.data.sfdc.net/owner: slb
    name: slb-portal-iad
    namespace: sam-system
  spec:
    minReadySeconds: 30
    replicas: 1
    selector:
      matchLabels:
        name: slb-portal-iad
        sam.data.sfdc.net/owner: slb
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        annotations:
          madkub.sam.sfdc.net/allcerts: |-
            {
             "certreqs": [
              {
               "cert-type": "client",
               "kingdom": "prd",
               "name": "cert3",
               "role": "slb.internal"
              }
             ]
            }
        labels:
          name: slb-portal-iad
          sam.data.sfdc.net/owner: slb
        namespace: sam-system
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - slb-ipvs
              topologyKey: kubernetes.io/hostname
        containers:
        - command:
          - /sdn/slb-portal
          - --hostname=$(NODE_NAME)
          - --templatePath=/sdn/webfiles
          - --port=9112
          - --client.serverInterface=lo
          - --keyfile=/cert3/client/keys/client-key.pem
          - --certfile=/cert3/client/certificates/client.pem
          - --log_dir=/host/data/slb/logs/slb-portal-iad
          - --cafile=/cert3/ca/cabundle.pem
          - --aggregatedPortal=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-iad
          - --client.dialSocket=true
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /webfiles/
              port: 9112
            initialDelaySeconds: 30
            periodSeconds: 3
            timeoutSeconds: 30
          name: slb-portal-iad
          resources:
            limits:
              sam.sfdc.net/ip-address: "1"
            requests:
              sam.sfdc.net/ip-address: "1"
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /data/certs
            name: certs
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /config
            name: config
          - mountPath: /cert3
            name: cert3
        - command:
          - /sdn/slb-config-processor
          - --configDir=/host/data/slb/config/slb-portal-iad
          - --period=1800s
          - --vipsToAcl=
          - --podPhaseCheck=true
          - --namespace=
          - --podstatus=running
          - --subnet=10.251.196.0/22
          - --k8sapiserver=
          - --serviceList=csrlb,controlplane-ptest
          - --useVipLabelToSelectSvcs=true
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --log_dir=/host/data/slb/logs/slb-portal-iad
          - --sleepTime=100ms
          - --livenessProbePort=9876
          - --shouldRemoveConfig=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --proxySelectorLabelValue=slb-nginx-config-b
          - --hostnameOverride=$(NODE_NAME)
          - --servicesToLbOverride=
          - --servicesNotToLbOverride=illumio-proxy-svc,illumio-dsr-nonhost-svc,illumio-dsr-host-svc
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-iad/slb-config-proc.sentinel
          - --vipdnsoptions.viplocation=iad-sam.iad
          - --k8sapiserver=http://pseudo-kubeapi.csc-sam.prd-sam.prd.slb.sfdc.net:40001/iad-sam
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /liveness-probe
              port: 9876
            initialDelaySeconds: 600
            periodSeconds: 30
            timeoutSeconds: 5
          name: slb-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-iad
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-iad
            name: var-logs-volume
          - mountPath: /data/certs
            name: certs
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /proxyconfig
            name: proxyconfig
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=1h
          - --filesDirToCleanup=/host/data/slb/config/slb-portal-iad
          - --shouldSkipServiceRecords=true
          - --shouldNotDeleteAllFiles=true
          - --log_dir=/host/data/slb/logs/slb-portal-iad
          - --shouldSkipSlbBlock=true
          - --skipFilesWithSuffix=.sock
          - --maxDeleteFileCount=20
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-iad
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-iad
            name: var-logs-volume
        - command:
          - /sdn/slb-node-api
          - --port=9130
          - --configDir=/host/data/slb/config/slb-portal-iad
          - --log_dir=/host/data/slb/logs/slb-portal-iad
          - --netInterface=lo
          - --checkSentinel=true
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-iad/slb-config-proc.sentinel
          - --control.sentinelExpiration=1800s
          - --listenOnSocket=true
          - --readOnly=false
          - --checkMwSentinel=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-iad/slb-manifest-watcher.sentinel
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-node-api
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/logs/slb-portal-iad
            name: var-logs-volume
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=48h
          - --log_dir=/host/data/slb/logs/slb-portal-iad/cleanup
          - --filesDirToCleanup=/host/data/slb/logs/slb-portal-iad
          - --shouldSkipServiceRecords=false
          - --shouldNotDeleteAllFiles=false
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-iad
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-iad
            name: var-logs-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /host/data/slb/logs/slb-portal-iad/cleanup
            name: var-cleanup-logs-volume
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          - --refresher
          - --run-init-for-refresher-mode
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-refresher
          resources: {}
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        - command:
          - /sdn/slb-manifest-watcher
          - --manifestOutputDir=/host/data/slb/manifests/slb-portal-iad
          - --tnrpEndpoint=https://ops0-piperepo1-0-prd.data.sfdc.net/
          - --hostnameOverride=$(NODE_NAME)
          - --log_dir=/host/data/slb/logs/slb-portal-iad
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-iad
          - --client.dialSocket=true
          - --maxDeleteLimit=50
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --vcioptions.strict=true
          - --client.allowStale=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-iad/slb-manifest-watcher.sentinel
          - --vipdnsoptions.viplocation=iad-sam.iad
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-manifest-watcher
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /proxyconfig
            name: proxyconfig
        dnsPolicy: Default
        initContainers:
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-init
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        nodeSelector:
          pool: prd-slb
        terminationGracePeriodSeconds: 5
        volumes:
        - hostPath:
            path: /data/slb
          name: var-slb-volume
        - hostPath:
            path: /etc/pki_service
          name: maddog-certs
        - hostPath:
            path: /data/slb/config/slb-portal-iad
          name: var-config-volume
        - hostPath:
            path: /data/slb/logs/slb-portal-iad
          name: var-logs-volume
        - configMap:
            name: sfdchosts
          name: sfdchosts
        - hostPath:
            path: /data/certs
          name: certs
        - hostPath:
            path: /etc/kubernetes
          name: kubeconfig
        - hostPath:
            path: /data/slb/logs/slb-portal-iad/cleanup
          name: var-cleanup-logs-volume
        - configMap:
            name: slb-proxy-configuration
          name: proxyconfig
        - configMap:
            name: slb-portal-links
          name: config
        - emptyDir:
            medium: Memory
          name: cert3
        - emptyDir:
            medium: Memory
          name: tokens
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: slb-portal-phx
      sam.data.sfdc.net/owner: slb
    name: slb-portal-phx
    namespace: sam-system
  spec:
    minReadySeconds: 30
    replicas: 1
    selector:
      matchLabels:
        name: slb-portal-phx
        sam.data.sfdc.net/owner: slb
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        annotations:
          madkub.sam.sfdc.net/allcerts: |-
            {
             "certreqs": [
              {
               "cert-type": "client",
               "kingdom": "prd",
               "name": "cert3",
               "role": "slb.internal"
              }
             ]
            }
        labels:
          name: slb-portal-phx
          sam.data.sfdc.net/owner: slb
        namespace: sam-system
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - slb-ipvs
              topologyKey: kubernetes.io/hostname
        containers:
        - command:
          - /sdn/slb-portal
          - --hostname=$(NODE_NAME)
          - --templatePath=/sdn/webfiles
          - --port=9112
          - --client.serverInterface=lo
          - --keyfile=/cert3/client/keys/client-key.pem
          - --certfile=/cert3/client/certificates/client.pem
          - --log_dir=/host/data/slb/logs/slb-portal-phx
          - --cafile=/cert3/ca/cabundle.pem
          - --aggregatedPortal=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-phx
          - --client.dialSocket=true
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /webfiles/
              port: 9112
            initialDelaySeconds: 30
            periodSeconds: 3
            timeoutSeconds: 30
          name: slb-portal-phx
          resources:
            limits:
              sam.sfdc.net/ip-address: "1"
            requests:
              sam.sfdc.net/ip-address: "1"
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /data/certs
            name: certs
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /config
            name: config
          - mountPath: /cert3
            name: cert3
        - command:
          - /sdn/slb-config-processor
          - --configDir=/host/data/slb/config/slb-portal-phx
          - --period=1800s
          - --vipsToAcl=
          - --podPhaseCheck=true
          - --namespace=
          - --podstatus=running
          - --subnet=10.251.196.0/22
          - --k8sapiserver=
          - --serviceList=csrlb,controlplane-ptest
          - --useVipLabelToSelectSvcs=true
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --log_dir=/host/data/slb/logs/slb-portal-phx
          - --sleepTime=100ms
          - --livenessProbePort=9876
          - --shouldRemoveConfig=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --proxySelectorLabelValue=slb-nginx-config-b
          - --hostnameOverride=$(NODE_NAME)
          - --servicesToLbOverride=
          - --servicesNotToLbOverride=illumio-proxy-svc,illumio-dsr-nonhost-svc,illumio-dsr-host-svc
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-phx/slb-config-proc.sentinel
          - --vipdnsoptions.viplocation=phx-sam.phx
          - --k8sapiserver=http://pseudo-kubeapi.csc-sam.prd-sam.prd.slb.sfdc.net:40001/phx-sam
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /liveness-probe
              port: 9876
            initialDelaySeconds: 600
            periodSeconds: 30
            timeoutSeconds: 5
          name: slb-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-phx
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-phx
            name: var-logs-volume
          - mountPath: /data/certs
            name: certs
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /proxyconfig
            name: proxyconfig
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=1h
          - --filesDirToCleanup=/host/data/slb/config/slb-portal-phx
          - --shouldSkipServiceRecords=true
          - --shouldNotDeleteAllFiles=true
          - --log_dir=/host/data/slb/logs/slb-portal-phx
          - --shouldSkipSlbBlock=true
          - --skipFilesWithSuffix=.sock
          - --maxDeleteFileCount=20
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-phx
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-phx
            name: var-logs-volume
        - command:
          - /sdn/slb-node-api
          - --port=9130
          - --configDir=/host/data/slb/config/slb-portal-phx
          - --log_dir=/host/data/slb/logs/slb-portal-phx
          - --netInterface=lo
          - --checkSentinel=true
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-phx/slb-config-proc.sentinel
          - --control.sentinelExpiration=1800s
          - --listenOnSocket=true
          - --readOnly=false
          - --checkMwSentinel=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-phx/slb-manifest-watcher.sentinel
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-node-api
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/logs/slb-portal-phx
            name: var-logs-volume
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=48h
          - --log_dir=/host/data/slb/logs/slb-portal-phx/cleanup
          - --filesDirToCleanup=/host/data/slb/logs/slb-portal-phx
          - --shouldSkipServiceRecords=false
          - --shouldNotDeleteAllFiles=false
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-phx
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-phx
            name: var-logs-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /host/data/slb/logs/slb-portal-phx/cleanup
            name: var-cleanup-logs-volume
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          - --refresher
          - --run-init-for-refresher-mode
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-refresher
          resources: {}
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        - command:
          - /sdn/slb-manifest-watcher
          - --manifestOutputDir=/host/data/slb/manifests/slb-portal-phx
          - --tnrpEndpoint=https://ops0-piperepo1-0-prd.data.sfdc.net/
          - --hostnameOverride=$(NODE_NAME)
          - --log_dir=/host/data/slb/logs/slb-portal-phx
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-phx
          - --client.dialSocket=true
          - --maxDeleteLimit=50
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --vcioptions.strict=true
          - --client.allowStale=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-phx/slb-manifest-watcher.sentinel
          - --vipdnsoptions.viplocation=phx-sam.phx
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-manifest-watcher
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /proxyconfig
            name: proxyconfig
        dnsPolicy: Default
        initContainers:
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-init
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        nodeSelector:
          pool: prd-slb
        terminationGracePeriodSeconds: 5
        volumes:
        - hostPath:
            path: /data/slb
          name: var-slb-volume
        - hostPath:
            path: /etc/pki_service
          name: maddog-certs
        - hostPath:
            path: /data/slb/config/slb-portal-phx
          name: var-config-volume
        - hostPath:
            path: /data/slb/logs/slb-portal-phx
          name: var-logs-volume
        - configMap:
            name: sfdchosts
          name: sfdchosts
        - hostPath:
            path: /data/certs
          name: certs
        - hostPath:
            path: /etc/kubernetes
          name: kubeconfig
        - hostPath:
            path: /data/slb/logs/slb-portal-phx/cleanup
          name: var-cleanup-logs-volume
        - configMap:
            name: slb-proxy-configuration
          name: proxyconfig
        - configMap:
            name: slb-portal-links
          name: config
        - emptyDir:
            medium: Memory
          name: cert3
        - emptyDir:
            medium: Memory
          name: tokens
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      name: slb-portal-dfw
      sam.data.sfdc.net/owner: slb
    name: slb-portal-dfw
    namespace: sam-system
  spec:
    minReadySeconds: 30
    replicas: 1
    selector:
      matchLabels:
        name: slb-portal-dfw
        sam.data.sfdc.net/owner: slb
    strategy:
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
      type: RollingUpdate
    template:
      metadata:
        annotations:
          madkub.sam.sfdc.net/allcerts: |-
            {
             "certreqs": [
              {
               "cert-type": "client",
               "kingdom": "prd",
               "name": "cert3",
               "role": "slb.internal"
              }
             ]
            }
        labels:
          name: slb-portal-dfw
          sam.data.sfdc.net/owner: slb
        namespace: sam-system
      spec:
        affinity:
          podAntiAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                - key: name
                  operator: In
                  values:
                  - slb-ipvs
              topologyKey: kubernetes.io/hostname
        containers:
        - command:
          - /sdn/slb-portal
          - --hostname=$(NODE_NAME)
          - --templatePath=/sdn/webfiles
          - --port=9112
          - --client.serverInterface=lo
          - --keyfile=/cert3/client/keys/client-key.pem
          - --certfile=/cert3/client/certificates/client.pem
          - --log_dir=/host/data/slb/logs/slb-portal-dfw
          - --cafile=/cert3/ca/cabundle.pem
          - --aggregatedPortal=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-dfw
          - --client.dialSocket=true
          env:
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /webfiles/
              port: 9112
            initialDelaySeconds: 30
            periodSeconds: 3
            timeoutSeconds: 30
          name: slb-portal-dfw
          resources:
            limits:
              sam.sfdc.net/ip-address: "1"
            requests:
              sam.sfdc.net/ip-address: "1"
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /data/certs
            name: certs
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /config
            name: config
          - mountPath: /cert3
            name: cert3
        - command:
          - /sdn/slb-config-processor
          - --configDir=/host/data/slb/config/slb-portal-dfw
          - --period=1800s
          - --vipsToAcl=
          - --podPhaseCheck=true
          - --namespace=
          - --podstatus=running
          - --subnet=10.251.196.0/22
          - --k8sapiserver=
          - --serviceList=csrlb,controlplane-ptest
          - --useVipLabelToSelectSvcs=true
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --log_dir=/host/data/slb/logs/slb-portal-dfw
          - --sleepTime=100ms
          - --livenessProbePort=9876
          - --shouldRemoveConfig=true
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --proxySelectorLabelValue=slb-nginx-config-b
          - --hostnameOverride=$(NODE_NAME)
          - --servicesToLbOverride=
          - --servicesNotToLbOverride=illumio-proxy-svc,illumio-dsr-nonhost-svc,illumio-dsr-host-svc
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-dfw/slb-config-proc.sentinel
          - --vipdnsoptions.viplocation=dfw-sam.dfw
          - --k8sapiserver=http://pseudo-kubeapi.csc-sam.prd-sam.prd.slb.sfdc.net:40001/dfw-sam
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          livenessProbe:
            httpGet:
              path: /liveness-probe
              port: 9876
            initialDelaySeconds: 600
            periodSeconds: 30
            timeoutSeconds: 5
          name: slb-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-dfw
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-dfw
            name: var-logs-volume
          - mountPath: /data/certs
            name: certs
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /proxyconfig
            name: proxyconfig
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=1h
          - --filesDirToCleanup=/host/data/slb/config/slb-portal-dfw
          - --shouldSkipServiceRecords=true
          - --shouldNotDeleteAllFiles=true
          - --log_dir=/host/data/slb/logs/slb-portal-dfw
          - --shouldSkipSlbBlock=true
          - --skipFilesWithSuffix=.sock
          - --maxDeleteFileCount=20
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup-config-processor
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-dfw
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-dfw
            name: var-logs-volume
        - command:
          - /sdn/slb-node-api
          - --port=9130
          - --configDir=/host/data/slb/config/slb-portal-dfw
          - --log_dir=/host/data/slb/logs/slb-portal-dfw
          - --netInterface=lo
          - --checkSentinel=true
          - --control.configProcSentinel=/host/data/slb/config/slb-portal-dfw/slb-config-proc.sentinel
          - --control.sentinelExpiration=1800s
          - --listenOnSocket=true
          - --readOnly=false
          - --checkMwSentinel=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-dfw/slb-manifest-watcher.sentinel
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-node-api
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/logs/slb-portal-dfw
            name: var-logs-volume
        - command:
          - /sdn/slb-cleanup
          - --period=1800s
          - --logsMaxAge=48h
          - --log_dir=/host/data/slb/logs/slb-portal-dfw/cleanup
          - --filesDirToCleanup=/host/data/slb/logs/slb-portal-dfw
          - --shouldSkipServiceRecords=false
          - --shouldNotDeleteAllFiles=false
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-cleanup
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /host/data/slb/config/slb-portal-dfw
            name: var-config-volume
          - mountPath: /host/data/slb/logs/slb-portal-dfw
            name: var-logs-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /host/data/slb/logs/slb-portal-dfw/cleanup
            name: var-cleanup-logs-volume
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          - --refresher
          - --run-init-for-refresher-mode
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-refresher
          resources: {}
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        - command:
          - /sdn/slb-manifest-watcher
          - --manifestOutputDir=/host/data/slb/manifests/slb-portal-dfw
          - --tnrpEndpoint=https://ops0-piperepo1-0-prd.data.sfdc.net/
          - --hostnameOverride=$(NODE_NAME)
          - --log_dir=/host/data/slb/logs/slb-portal-dfw
          - --hostsConfigFile=/sfdchosts/hosts.json
          - --client.socketDir=/host/data/slb/config/slb-portal-dfw
          - --client.dialSocket=true
          - --maxDeleteLimit=50
          - --metricsEndpoint=ajna0-funnel1-0-prd.data.sfdc.net:80
          - --vcioptions.strict=true
          - --client.allowStale=true
          - --control.manifestWatcherSentinel=/host/data/slb/config/slb-portal-dfw/slb-manifest-watcher.sentinel
          - --vipdnsoptions.viplocation=dfw-sam.dfw
          env:
          - name: KUBECONFIG
            value: /kubeconfig/kubeconfig-platform
          - name: NODE_NAME
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-dva-rc/dva/slb/hyperslb:2133-526e0ce9262aa8c54d7c96084bf467e6482aa130
          name: slb-manifest-watcher
          securityContext:
            privileged: true
          volumeMounts:
          - mountPath: /host/data/slb
            name: var-slb-volume
          - mountPath: /sfdchosts
            name: sfdchosts
          - mountPath: /kubeconfig
            name: kubeconfig
          - mountPath: /etc/pki_service
            name: maddog-certs
          - mountPath: /proxyconfig
            name: proxyconfig
        dnsPolicy: Default
        initContainers:
        - args:
          - /sam/madkub-client
          - --madkub-endpoint=https://$(MADKUBSERVER_SERVICE_HOST):32007
          - --maddog-endpoint=https://all.pkicontroller.pki.blank.prd.prod.non-estates.sfdcsd.net:8443
          - --maddog-server-ca=/maddog-certs/ca/security-ca.pem
          - --madkub-server-ca=/maddog-certs/ca/cacerts.pem
          - --cert-folders=cert3:/cert3/
          - --token-folder=/tokens/
          - --requested-cert-type=client
          - --ca-folder=/maddog-certs/ca
          env:
          - name: MADKUB_NODENAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: spec.nodeName
          - name: MADKUB_NAME
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.name
          - name: MADKUB_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/sam/madkub:1.0.0-0000082-3d5c21b4
          imagePullPolicy: IfNotPresent
          name: madkub-init
          volumeMounts:
          - mountPath: /cert3
            name: cert3
          - mountPath: /maddog-certs/
            name: maddog-certs
          - mountPath: /tokens
            name: tokens
        nodeSelector:
          pool: prd-slb
        terminationGracePeriodSeconds: 5
        volumes:
        - hostPath:
            path: /data/slb
          name: var-slb-volume
        - hostPath:
            path: /etc/pki_service
          name: maddog-certs
        - hostPath:
            path: /data/slb/config/slb-portal-dfw
          name: var-config-volume
        - hostPath:
            path: /data/slb/logs/slb-portal-dfw
          name: var-logs-volume
        - configMap:
            name: sfdchosts
          name: sfdchosts
        - hostPath:
            path: /data/certs
          name: certs
        - hostPath:
            path: /etc/kubernetes
          name: kubeconfig
        - hostPath:
            path: /data/slb/logs/slb-portal-dfw/cleanup
          name: var-cleanup-logs-volume
        - configMap:
            name: slb-proxy-configuration
          name: proxyconfig
        - configMap:
            name: slb-portal-links
          name: config
        - emptyDir:
            medium: Memory
          name: cert3
        - emptyDir:
            medium: Memory
          name: tokens
kind: List
metadata: {}
