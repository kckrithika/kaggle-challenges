apiVersion: v1
items:
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      cloud: storage
      team: legostore
    name: ceph-metrics
    namespace: legostore
  spec:
    replicas: 1
    template:
      metadata:
        labels:
          app: ceph-metrics
          cloud: storage
          team: legostore
      spec:
        containers:
        - args:
          - -j
          - ceph_mon
          command:
          - /opt/sfms/bin/sfms
          env:
          - name: SFDC_FUNNEL_VIP
            value: ajna0-funnel1-0-prd.data.sfdc.net:80
          - name: MC_KINGDOM
            value: prd
          - name: MC_ESTATE
            value: prd-sam
          - name: MC_NAME
            value: ceph-metrics
          - name: MC_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: MC_NODE
            valueFrom:
              fieldRef:
                fieldPath: spec.nodeName
          - name: MC_DEVICE
            valueFrom:
              fieldRef:
                fieldPath: metadata.name
          - name: MC_ZK_SERVERS
            value: sfstore-zk.slb.sfdc.net
          - name: MC_PORT
            value: "8001"
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/sfms:latest-0000166-d11c49fe
          imagePullPolicy: IfNotPresent
          name: sfms
          ports:
          - containerPort: 8001
            name: ceph-metrics
            protocol: TCP
          volumeMounts:
          - mountPath: /etc/ceph
            name: ceph-conf
        - args:
          - -ceph-key-config-dir=/etc/ceph-metrics/key-config
          - -ceph-cluster-config-dir=/etc/ceph-metrics/ceph-cluster-config
          - -ceph-config-dir=/etc/ceph
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/configwatcher:base-0000375-b6ea35ee
          imagePullPolicy: IfNotPresent
          name: configwatcher
          volumeMounts:
          - mountPath: /etc/ceph
            name: ceph-conf
          - mountPath: /etc/ceph-metrics/key-config
            name: key-conf
            readOnly: true
          - mountPath: /etc/ceph-metrics/ceph-cluster-config
            name: ceph-cluster-conf
            readOnly: true
          - mountPath: /etc/kubernetes
            name: kubernetes
        nodeSelector:
          pool: prd-sam_ceph
        volumes:
        - hostPath:
            path: /etc/kubernetes
          name: kubernetes
        - emptyDir: {}
          name: ceph-conf
        - name: key-conf
          secret:
            secretName: ceph-client-key
        - configMap:
            name: ceph-cluster
          name: ceph-cluster-conf
kind: List
metadata: {}
