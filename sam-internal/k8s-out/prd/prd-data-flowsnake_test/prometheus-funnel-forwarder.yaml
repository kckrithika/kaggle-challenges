apiVersion: v1
items:
- apiVersion: extensions/v1beta1
  kind: Deployment
  metadata:
    labels:
      apptype: monitoring
      name: prometheus-funnel-forwarder-deployment
      service: prometheus-funnel-forwarder
    name: prometheus-funnel-forwarder-deployment
    namespace: flowsnake
  spec:
    replicas: 2
    selector:
      matchLabels:
        apptype: monitoring
        service: prometheus-funnel-forwarder
    template:
      metadata:
        labels:
          apptype: monitoring
          service: prometheus-funnel-forwarder
      spec:
        containers:
        - args:
          - --serviceName=flowsnake
          - --subserviceName=NONE
          - --tagDefault=superpod:NONE
          - --tagDefault=datacenter:prd
          - --tagDefault=estate:prd-data-flowsnake_test
          - --batchSize=512
          - --funnelUrl=http://ajna0-funnel1-0-prd.data.sfdc.net:80
          image: ops0-artifactrepo2-0-prd.data.sfdc.net/dva/funnel_writer:35
          livenessProbe:
            httpGet:
              path: /
              port: 8000
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 10
          name: forwarder
          ports:
          - containerPort: 8000
        restartPolicy: Always
        serviceAccountName: default
- apiVersion: v1
  kind: Service
  metadata:
    name: prometheus-funnel-forwarder
    namespace: flowsnake
  spec:
    ports:
    - name: http
      port: 80
      targetPort: 8000
    selector:
      service: prometheus-funnel-forwarder
    sessionAffinity: None
    type: ClusterIP
kind: List
metadata: {}
