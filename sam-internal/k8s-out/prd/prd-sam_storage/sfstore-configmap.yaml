apiVersion: v1
data:
  1.10.json: |-
    {
      "persistentVolumeClaim": {
        "metadata": {
          "name": "sfstore"
        },
        "spec": {
          "Resources": {
            "Requests": {
              "storage": "50Gi"
            }
          },
          "StorageClassName": "ssd",
          "accessModes": [
            "ReadWriteOnce"
          ],
          "name": "ssd"
        }
      },
      "podConfig": {
        "DNSPolicy": "ClusterFirstWithHostNet",
        "containers": [
          {
            "Env": [
              {
                "name": "BOOKIE_LOG_DIR",
                "value": "/var/log/sfslogs"
              },
              {
                "name": "sf_zkServers",
                "value": "sfstorezk0-dnds1-1-prd.eng.sfdc.net:2181,sfstorezk0-dnds1-2-prd.eng.sfdc.net:2181,sfstorezk0-dnds2-1-prd.eng.sfdc.net:2181"
              },
              {
                "mountPath": "/sfs",
                "name": "sfstore"
              }
            ],
            "args": [
              "bookie"
            ],
            "command": [
              "/sfs/sfsbuild/bin/k8sstartup.py"
            ],
            "image": "ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/bookie:base-0000089-39319751",
            "imagePullPolicy": "Always",
            "name": "bookie",
            "ports": [
              {
                "containerPort": 3181,
                "name": "bookieport"
              }
            ],
            "volumeMounts": [
              {
                "mountPath": "/var/log",
                "name": "container-log-vol"
              },
              {
                "mountPath": "/var/log-mounted",
                "name": "host-log-vol"
              }
            ]
          },
          {
            "Env": [
              {
                "name": "BOOKIE_LOG_DIR",
                "value": "/var/log/sfslogs"
              },
              {
                "name": "sf_zkServers",
                "value": "sfstorezk0-dnds1-1-prd.eng.sfdc.net:2181,sfstorezk0-dnds1-2-prd.eng.sfdc.net:2181,sfstorezk0-dnds2-1-prd.eng.sfdc.net:2181"
              }
            ],
            "args": [
              "autorecovery"
            ],
            "command": [
              "/sfs/sfsbuild/bin/k8sstartup.py"
            ],
            "image": "ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/bookie:base-0000089-39319751",
            "imagePullPolicy": "Always",
            "name": "autorecovery",
            "volumeMounts": [
              {
                "mountPath": "/var/log",
                "name": "container-log-vol"
              },
              {
                "mountPath": "/var/log-mounted",
                "name": "host-log-vol"
              },
              {
                "mountPath": "/sfs/sfsdata",
                "name": "sfstore"
              }
            ]
          },
          {
            "Env": [
              {
                "name": "SFDC_FUNNEL_VIP",
                "value": "ajna0-funnel1-0-prd.data.sfdc.net:80"
              },
              {
                "name": "MC_KINGDOM",
                "value": "prd"
              },
              {
                "name": "MC_ESTATE",
                "value": "prd-sam_storage"
              },
              {
                "name": "MC_NAME",
                "value": "sfstore"
              },
              {
                "name": "MC_NAMESPACE",
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.namespace"
                  }
                }
              },
              {
                "name": "MC_NODE",
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "spec.nodeName"
                  }
                }
              },
              {
                "name": "MC_DEVICE",
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.name"
                  }
                }
              }
            ],
            "args": [
              "-t",
              "ajna",
              "-s",
              "sfstore",
              "-i",
              "60"
            ],
            "command": [
              "/bin/bash",
              "/opt/sfms/bin/sfms"
            ],
            "image": "ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/sfms:latest-0000182-ebb4867b",
            "imagePullPolicy": "Always",
            "name": "sfms"
          }
        ],
        "hostNetwork": true,
        "initContainers": [
          {
            "command": [
              "sh",
              "-c",
              "/entrypoint.sh -g 7447 -u 7447 -s sfstore -l sfslogs"
            ],
            "env": [
              {
                "name": "KUBEVAR_POD_NAME",
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.name"
                  }
                }
              },
              {
                "name": "KUBEVAR_POD_NAMESPACE",
                "valueFrom": {
                  "fieldRef": {
                    "fieldPath": "metadata.namespace"
                  }
                }
              }
            ],
            "image": "ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/storagecloud/loginitcontainer:base-0000433-1dcfb4aa",
            "name": "log-init",
            "securityContext": {
              "privileged": true
            },
            "volumeMounts": [
              {
                "mountPath": "/var/log",
                "name": "container-log-vol"
              },
              {
                "mountPath": "/var/log-mounted",
                "name": "host-log-vol"
              }
            ]
          }
        ],
        "securityContext": {
          "fsGroup": 7447
        },
        "volumes": [
          {
            "mountPath": "/var/log",
            "name": "container-log-vol"
          },
          {
            "hostPath": {
              "path": "/var/log"
            },
            "name": "host-log-vol"
          }
        ]
      },
      "version": "1.10"
    }
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: sfstore-configmap
  namespace: sam-system
