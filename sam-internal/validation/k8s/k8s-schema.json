{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Validation Schema for k8s resources",
    "$ref": "#/allProperties",

    "allProperties": {

        "if": {
            "properties": { "kind": { "enum": [ "Deployment", "DaemonSet", "Service", "StatefulSet", "ConfigMap" ] } }
        }, 
        "then": {
            "anyOf": [
                { "$ref": "DeploymentSchema#/allProperties" },
                { "$ref": "DaemonSetSchema#/allProperties" },
                { "$ref": "ServicesSchema#/allProperties" },
                { "$ref": "StatefulSetSchema#/allProperties" },
                { "$ref": "ConfigMapSchema#/allProperties" }
            ]
        },

        "properties": {
            "kind": {
                "type": "string"
            }
        }
    }
}