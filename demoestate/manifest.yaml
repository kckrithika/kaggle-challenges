apiVersion: v1

system:
  functions:
  - name: default
    count: 2
    containers:
    - name: web
      # container image/version to run
      image: nginx
      # expose port 80 outside the container
      ports:
      - containerPort: 80
      resources:
        limits: { cpu: "1", memory: "1Gi" }
      logs:
      - directory:  /var/log/nginx

  # expose the function we declared above on the specified load balancer
  loadbalancers:
  - lbname: shared-gowebdemo1-0-phx
    function: default
    ports:
      - port: 80
        targetport: 80

