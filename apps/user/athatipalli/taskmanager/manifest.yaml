apiVersion: v1
system:
   functions:
   - name: acds-tm
     count: 1
     containers:
     - name: acds-tm-cont
       image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mmanthena/griddable-taskmanager:v0.1.51 
       command:
       - /bin/bash
       - -c
       - /acds/bin/start-acds.sh
       livenessProbe:
         exec:
           command:
           - "/acds/bin/tmOk.sh"
         initialDelaySeconds: 10
         timeoutSeconds: 5
       volumeMounts:
         - name: tls-client-cert
           mountPath: /client-certs
         - name: tls-server-cert
           mountPath: /server-certs
         - name: logvolsherpa
           mountPath: /logsherpa
         - name: logvolbeacon
           mountPath: /logbeacon
         - mountPath: /taskmanager-secrets/
           name: taskmanager-secrets-vol
           readOnly: true
       env:
       - name : UP_STRING
         value: "ACDS TaskManager Started. Blocking."
       - name : ACDS_START_TASKMANAGER
         value: "yes"
       - name : TENANT_ADMIN_NAME
         value: "admin@local"
       - name : TENANT_ADMIN_PASSWORD
         value: "synchronize"
       - name : DD_NAME
         value: "Target_1"
       - name : DB_NAME
         value: "ddnprod"
       - name : GRID_CONNECTION_ID
         value: "DS_CONN_DD_1"
       - name : PATH
         value: "/opt/tools/Linux/jdk/openjdk1.8.0_172_x64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
       - name : JAVA_HOME
         value: "/opt/tools/Linux/jdk/openjdk1.8.0_172_x64"
       - name : LANG
         value: "en_US.UTF-8"
       - name : GRID_NAME
         value: "Grid_01"
       - name : GRID_CONNECTION_NAME
         value: "DS_CONN_DD_1"
       - name : SERVICE_USER_EMAIL
         value: "acds_admin@local"
       - name : TOKEN_SECRET
         value: "jJ5mPbFutWIzGIGvehio1onUctIv5yd3"
       - name : SERVICE_USER_NAME
         value: "acds_admin"
       - name : ACDS_APISERVER_HOST
         value: "10.251.161.90"
       - name : ACDS_APISERVER_PORT
         value: "5004"
       - name : ACDS_APISERVER_HTTPS
         value: "false"
       - name : ACDS_APISERVER_ZKCONN
         value: "shared0-discovery1-0-crd.data.sfdc.net:2181"
       - name : SERVICE_USER_EMAIL
         value: "acds_admin@local" 
     volumes:
     - name: taskmanager-secrets-vol
       k4aSecret:
         secretName: taskmanager-secrets
     - name: tls-client-cert
       maddogCert:
         type: client
     - name: tls-server-cert
       maddogCert:
         type: server
     - name: logvolsherpa
       hostPath:
         path: /home/sfdc-scone-hellodiscovery-sherpa/logs
     - name: logvolbeacon
       hostPath:
         path: /home/sfdc-scone-hellodiscovery-beacon/logs 
