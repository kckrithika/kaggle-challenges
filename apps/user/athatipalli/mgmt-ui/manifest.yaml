apiVersion: v1
system:
  functions:
    - name: mgmt-ui
      count: 1
      type: stateful-set
      containers:
        - name: mgmt-ui
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/pchitturi/geocloud.io/mgmt-platform-ui:042219
          livenessProbe:
            exec:
              command: ["curl", "http://127.0.0.1:3000/"]
            initialDelaySeconds: 120
            timeoutSeconds: 10
          args:
          - log.stdout.enabled=true
          - log.stdout.json=false
          ports:
          - containerPort: 3000
          resources:
            requests:
              cpu: 2
              memory: 3Gi
            limits:
              cpu: 3
              memory: 4Gi
          env:
            - name: SHELL
              value: "/bin/bash"
            - name: UP_STRING
              value: "UI Server Blocking."
            - name: SERVERNAME
              value: 127.0.0.1
            - name: ENV_MODE
              value: "production"
      lbname: mgmt-ui-stateful-lb
  loadbalancers:
  - lbname: guiapi-lb
    function: mgmt-ui
    slbEnabled: true
    ports:
      - port: 3000
        targetport: 3000
