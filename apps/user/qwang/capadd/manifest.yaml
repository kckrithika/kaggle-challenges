apiVersion: v1
system:
  functions:
  - name: capadd
    count: 1
    volumes:
    - name: capadd-client-cert
      maddogCert:
        type: client
    - name: capadd-server-cert
      maddogCert:
        type: server
    - name: logvol
      hostPath:
        path: /data/logs
    containers:
    - name: capadd
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/qwang/capadd:test-20200211 #20200127-3
      env:
        - name: CAPADD_LOG_DIR
          value: "/data/logs/capadd-logs.txt"
        - name: GITHUB_HOST
          value: "git.soma.salesforce.com"
        - name: GITHUB_USER
          value: "netqa-git"
      volumeMounts:
        - name: capadd-client-cert
          mountPath: /clientcert
        - name: capadd-server-cert
          mountPath: /servercert
        - name: logvol
          mountPath: /data/logs
      ports:
      - containerPort: 8787
      livenessProbe:
        exec:
          command:
            - /bin/ls