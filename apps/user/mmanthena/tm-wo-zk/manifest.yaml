apiVersion: v1
system:
  functions:
  - name: acds-tm
    count: 1
    containers:
    - name: acds-tm-cont
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mmanthena/griddable-taskmanager:v0.1.1 
      command:
      - /bin/bash
      - -c
      - /acds/bin/start-acds.sh
      livenessProbe:
        exec:
          command:
          - "/acds/bin/tmOk.sh"
        initialDelaySeconds: 10
        timeoutSeconds: 5
      volumeMounts:
        - name: tls-client-cert
          mountPath: /client-certs
        - name: tls-server-cert
          mountPath: /server-certs
        - name: logvolsherpa
          mountPath: /logsherpa
        - name: logvolbeacon
          mountPath: /logbeacon
      env:
      - name : UP_STRING
        value: "ACDS TaskManager Started. Blocking."
      - name : UP_STRING
        value: "yes"
#      - name : ACDS_APISERVER_HOST
#        value: 
#      - name : ACDS_APISERVER_PORT
#        value: 
#      - name : ACDS_APISERVER_HTTPS
#        value:
      - name : ACDS_APISERVER_ZKCONN
        value: "shared0-discovery1-0-crd.data.sfdc.net:2181"
#      - name : SERVICE_USER_EMAIL
#        value:
#      - name : SERVICE_USER_PASSWORD
#        value:
#      - name : TOKEN_SECRET
#        value:
    volumes:
    - name: tls-client-cert
      maddogCert:
        type: client
    - name: tls-server-cert
      maddogCert:
        type: server
    - name: logvolsherpa
      hostPath:
        path: /home/sfdc-scone-hellodiscovery-sherpa/logs
    - name: logvolbeacon
      hostPath:
        path: /home/sfdc-scone-hellodiscovery-beacon/logs 
