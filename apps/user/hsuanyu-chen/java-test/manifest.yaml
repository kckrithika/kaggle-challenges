apiVersion: v1

system:
  functions:
  - name: java-test
    count: 1
    containers:
    - name: java-test
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/hsuanyu-chen/test/test-20191008:latest
      command:
      - "java"
      - "-Duser.home=/tmp"
      - "-jar"
      - "/caiman-watchdog/caiman-watchdog-0.0.15-SNAPSHOT.jar"
      env:
      - name: NODE_NAME
        valueFrom:
          fieldRef:
            fieldPath: spec.nodeName
      - name: DEMO_GREETING
        value: "Hello from the environment"
      - name: DEMO_FAREWELL
        value: "Such a sweet sorrow"
      livenessProbe:
        exec:
          command: ["ls", "/"]
        failureThreshold: 3
        initialDelaySeconds: 5
        periodSeconds: 60
      volumeMounts:
      - mountPath: /clientcert
        name: cert
    volumes:
    - name: cert
      maddogCert:
        type: client