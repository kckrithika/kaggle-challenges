apiVersion: v1
system:
  functions:
    - name: eventbus-client-web-ui
      count: 1
      volumes:
        - name: myservercert
          maddogCert:
            type: server
        - name: secretvol
          k4aSecret:
            secretName: eventbus-client-web-ui-secrets
      containers:
      - name: eventbus-client-web-ui
        image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/user-emilio-kartono/eventbus-client-web-ui:1.2
        imagePullPolicy: Always
        ports:
        - containerPort: 5000
          name: ui-port
        livenessProbe:
          initialDelaySeconds: 6000
          periodSeconds: 60
          timeoutSeconds: 10
          failureThreshold: 5
          httpGet:
            path: /
            port: 5000
            scheme: HTTP
        volumeMounts:
          - name: myservercert
            mountPath: /certs
          - name: secretvol
            mountPath: /secrets
            readOnly: true
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxSurge: 1
          maxUnavailable: 1
  loadbalancers:
  - lbname: eventbus-client-web-ui-lb
    function: eventbus-client-web-ui
    slbenabled: true
    ports:
      - port: 443
        targetPort: 5000
        lbtype: http
        tls: true
