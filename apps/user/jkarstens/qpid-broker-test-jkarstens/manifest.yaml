apiVersion: v1

system:
    notifications:
        email: 
            - jkarstens@salesforce.com
    functions:
        - name: qpid-broker-test-jkarstens
          count: 1
          type: stateful-set
          containers:
              - name: qpid-broker-runtime
                image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/appscale/qpid-broker-runtime:d30c0c2.5
                ports:
                    - name: amqp-port
                      containerPort: 5672
                    - name: http-port
                      containerPort: 7022
                env:
                    - name: AMQP_PORT
                      value: 5672
                    - name: HTTP_PORT
                      value: 7022
                resources:
                    requests:
                        cpu: "24"
                        memory: "20Gi"
                    limits:
                        cpu: "24"
                        memory: "20Gi"
                volumeMounts:
                    - mountPath: /var/log/qpid
                      name: logvol
                livenessProbe:
                    exec:
                        command: ["/bin/true"]
                    initialDelaySeconds: 10
                    periodSeconds: 60
                    timeoutSeconds: 10
                readinessProbe:
                    exec:
                        command: ["/bin/true"]
                    initialDelaySeconds: 10
                    timeoutSeconds: 10
          volumes:
              - name: logvol
                hostpath:
                  path: /var/log/qpid
          lbname: qpid-broker-test-jkarstens-lb
#    loadbalancers:
#        - lbname: qpid-broker-test-jkarstens-lb
#          function: qpid-broker-test-jkarstens
#          slbEnabled: true
#          ports:
#              - port: 7022
#                targetport: 7022
#                lbtype: http
#              - port: 5672
#                targetport: 5672
#                lbtype: tcp
#
