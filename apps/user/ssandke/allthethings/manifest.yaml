apiVersion: v1
 
system:

  # Controls how SAM informs you about the progress of deployments of this manifest.
  notifications:
    email:
      - ssandke@salesforce.com


  functions:

  #  A simple stateless app
  # - name: hello
  #   count: 3
  #   containers:
  #   - name: samhello
  #     image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ssandke/samhello:ssandke-171005
  #     ports:
  #     - containerPort: 9090
  #     livenessProbe:
  #       httpGet:
  #         path: /
  #         port: 9090
  #     volumeMounts:
  #     - mountPath: /certs
  #       name: certs
  #     env:
  #       - name: DUMMYENV
  #         value: "SOMEVALUE"
  #   volumes:
  #   - name: certs
  #     maddogCert:
  #       type: client

 
  - name: redis
    type: stateful-set
    count: 2
    containers:
    - name: stateful-hello
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/mayank.kumar/hypersam:20170723_115938.58ece62.dirty.mayankkuma-ltm3
      command:
        - /sam/sam-test-app
      ports:
      - containerPort: 8000
        name: web
      volumeMounts:
      - name: www
        mountPath: /rbd/html
      env:
        - name: DUMMYENV
          value: "SOMEVALUE"
      livenessProbe:
        httpGet:
          path: /
          port: 8000
    lbname: stateful-lb
    terminationGracePeriodSeconds: 33
    volumeClaimTemplates:
    - name: www
      storageClassName: ssandke-slow
      storageSizeRequest: 1Gi

  # loadbalancers:
  # - lbname: samhellolb
  #   function: hello
  #   slbEnabled: true
  #   ports:
  #     - port: 8080
  #       targetport: 9090

