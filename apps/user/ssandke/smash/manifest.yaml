apiVersion: v1
 
system:
  functions:
  - name: tiller
    count: 1
    containers:
    - name: tiller
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ssandke/tiller:v2.8.0
      ports:
      - containerPort: 44134
        name: tiller
      - containerPort: 44135
        name: http
      livenessProbe:
        httpGet:
          path: /liveness
          port: 44135
        initialDelaySeconds: 1
        timeoutSeconds: 1
      readinessProbe:
        httpGet:
          path: /readiness
          port: 44135
        initialDelaySeconds: 1
        timeoutSeconds: 1
      env:
      - name: TILLER_NAMESPACE
        value: user-ssandke
      - name: TILLER_HISTORY_MAX
        value: "0"

  loadbalancers:
  - lbname: tiller
    function: tiller
    slbEnabled: true
    ports:
    - port: 44134
      targetport: 44134
    - port: 44135
      targetport: 44135

