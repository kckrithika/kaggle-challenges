apiVersion: v1

system:
  functions:
    - name: k4a-secrets
      count: 1
      containers:
        - name: reader
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/hpamukcu/deployerbot:hpamukcu-202002161527
          env:
            - name: GO_PIPELINE_LABEL
              value: 1
            - name: NODE_NAME
              valueFrom:
                fieldRef:
                  fieldPath: spec.nodeName
          command: ["cat", "/secrets/hpam-secret"]
          volumeMounts:
            - mountPath: /secrets
              name: hpam-secret
              readOnly: true
          livenessProbe:
            exec:
              command: ["ls", "/"]
            failureThreshold: 3
            initialDelaySeconds: 5
            periodSeconds: 60
      volumes:
        - name: hpam-secret
          k4aSecret:
            secretName: hpam-secret