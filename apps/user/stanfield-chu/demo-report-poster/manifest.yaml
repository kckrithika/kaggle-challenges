apiVersion: v1

system:
  notifications:
    email:
      - stanfield.chu@salesforce.com
  functions:
  - name: demo-report-poster
    count: 1
    containers:
    - name: demo-report-poller
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/stanfield.chu/demo-report-poster:0.0.0-20171219
      env:
      - name: POST_DELAY_PERIOD
        value: 10
      - name: DUMMY_ID
        value: 1234
      livenessProbe:
        exec:
          command:
          - echo
          - always_healthy
        initialDelaySeconds: 5
        periodSeconds: 30
      command: ["/bin/sh", "-c"]
      args: ["
          while sleep ${POST_DELAY_PERIOD};
          do
              ./${SCRIPT_PATH} $DUMMY_ID;
          done
      "]
