apiVersion: v2

system:
  functions:
  - name: apattan-sfcd-onboarding
    count: 1
    identity:
      serviceName: apattan-sfcd-onboarding
    containers:
    - name: sfcd-onboarding
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/apattan/sfcd-onboarding:latest
      ports:
      - containerPort: 5000
      livenessProbe:
        httpGet:
          path: /api/health
          port: 5000
      volumeMounts:
        - name: client-certs
          mountPath: /certs/client
        - name: lb-certs
          mountPath: /certs/lb-certs
    volumes:
    - name: client-certs
      maddogCert:
        type: client
    - name: lb-certs
      maddogCert:
        type: server
        lbnames:
        - sfcd-onboarding-lb
  loadbalancers:
  - lbname: sfcd-onboarding-lb
    function: apattan-sfcd-onboarding
    slbenabled: true
    ports:
      - port: 443
        targetport: 5000
        lbtype: http
        tls: true
        sticky: 300
