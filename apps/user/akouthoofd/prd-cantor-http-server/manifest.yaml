apiVersion: v1

system:
    notifications:
      email:
        - akouthoofd@salesforce.com
    functions:
    - name: cantor-http-server
      count: 3
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxSurge: 0
          maxUnavailable: 1
      containers:
      - name: prd-cantor-http-server
        image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/akouthoofd/cantor-http-server:latest
        ports:
        - name: cantor-http
          containerPort: 8084
          hostPort: 18084
        livenessProbe:
          httpGet:
            scheme: HTTP
            path: /
            port: 8084
          initialDelaySeconds: 120
        env:
        - name: SUBDOMAIN
          value: "eng"
        - name: STORAGE_TYPE
          value: "grpc"
    loadbalancers:
    - lbname: cantor-service
      function: cantor-http-server
      nodeExposed: true
      slbEnabled: true
      ports:
        - port: 8084
          targetport: 8084
          lbalgorithm: roundrobin
