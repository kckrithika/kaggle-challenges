apiVersion: v1
 
system:
  functions:
  - name: appstore-reviews
    count: 1
    volumes:
    - name: cert
      maddogCert: # Add "ROLE::samapp.user-jschroeder.appstore-reviews" to Secret Service
        type: client
    containers:
    - name: appstorereview
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/jschroeder/appstore_reviews:20180220.0
      env:
      - name: SECRETSERVICE_CERT_PATH
        value: /certs/client/certificates/client.pem
      - name: SECRETSERVICE_PRIVATE_KEY_PATH
        value: /certs/client/keys/client-key.pem
      - name: HTTP_PROXY
        value: public0-proxy1-0-prd.data.sfdc.net:8080
      - name: HTTPS_PROXY
        value: public0-proxy1-0-prd.data.sfdc.net:8080
      - name: NO_PROXY
        value: 127.0.0.1,localhost,.ci.data.com,.sfdc.net,.force.com,.dmz.salesforce.com
      volumeMounts:
      - name: cert
        mountPath: /certs
      livenessProbe:
        exec:
          command:
          - /bin/true
        initialDelaySeconds: 60
        periodSeconds: 600
      readinessProbe:
        exec:
          command:
          - /bin/true
        initialDelaySeconds: 60
        periodSeconds: 600
