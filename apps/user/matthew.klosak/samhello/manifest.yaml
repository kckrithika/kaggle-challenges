apiVersion: v1

system:
  notifications:
    email:
      - matthew.klosak@salesforce.com
  functions:
    - name: default
      count: 1
      annotations:
        "sherpa-injector.service-mesh/inject": "enabled"
      containers:
        - name: samhello
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/matthew.klosak/samhello:bob-20160630 # golang app
          ports:
            - containerPort: 9090
          livenessProbe:
            httpGet:
              path: /
              port: 9090
      volumes:
        - name: tls-client-cert
          maddogCert:
            type: client
        - name: tls-server-cert
          maddogCert:
            type: server
  loadbalancers:
    - lbname: samhellolb
      function: default
      slbenabled: true
      ports:
        - port: 9090
          targetport: 9090
          lbtype: tcp
