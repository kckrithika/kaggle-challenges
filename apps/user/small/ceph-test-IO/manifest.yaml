apiVersion: v1

system:
  functions:
  - name: stateful-func
    type: stateful-set
    count: 2
    containers:
    - name: stateful-hello
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/small/ceph-test:ceph-v1 
      command:
        - /bin/ceph-test
      ports:
      - containerPort: 9090
        name: web
      volumeMounts:
      - name: www
        mountPath: /rbd/html
      livenessProbe:
          httpGet:
            path: /
            port: 9090
    lbname: stateful-lb1
    terminationGracePeriodSeconds: 33
    volumeClaimTemplates:
    - name: www
      storageClassName: test-hdd-pool
      storageSizeRequest: 500Gi
  loadbalancers:
  - lbname: cephlb
    function: stateful-func
    slbenabled: true
    ports:
      - port: 9090
        targetport: 9090
