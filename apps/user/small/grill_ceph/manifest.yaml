apiVersion: v1

system:
  functions:
  - name: stateful-grill-ceph
    type: stateful-set
    count: 2
    containers:
    - name: stateful-small
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/small/grill_ceph:v1 
      command:
        - /bin/grill_ceph
      ports:
      - containerPort: 9099
        name: web
      volumeMounts:
      - name: www
        mountPath: /rbd/html
      livenessProbe:
          httpGet:
            path: /
            port: 9098
    lbname: stateful-lb1
    terminationGracePeriodSeconds: 33
    volumeClaimTemplates:
    - name: www
      storageClassName: small-hdd-pool
      storageSizeRequest: 500Gi
  loadbalancers:
  - lbname: cephlb
    function: stateful-grill-ceph
    slbenabled: true
    ports:
      - port: 9099
        targetport: 9099
