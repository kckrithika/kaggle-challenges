apiVersion: v1

system:
  functions:
  - name: stateful-test-sc
    type: stateful-set
    count: 2
    containers:
    - name: stateful-small
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/small/ceph-test:ceph-v1
      command:
        - /bin/grill_ceph
      ports:
      - containerPort: 9099
        name: web
      volumeMounts:
      - name: www
        mountPath: /rbd/html
      livenessProbe:
          httpGet:
            path: /
            port: 9098
    lbname: test-sc-lb
    terminationGracePeriodSeconds: 33
    volumeClaimTemplates:
    - name: www
      storageClassName: maureen-long-hdd-pool
      storageSizeRequest: 50Gi
    loadbalancers:
    - lbname: test-sc-lb
      function: stateful-test-sc
      slbenabled: true
      ports:
        - port: 9099
          targetport: 9099
