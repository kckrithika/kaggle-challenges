apiVersion: v1
 
system:
  notifications:
    email:
      - emailinfrastructure@salesforce.com
  functions:
  - name: eaas-prd-test 
    count: 3 
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
    containers:
    - name: eaas-prd-test
      image: tnrp/emailinfrastructure/eaas:0.0.1-0000013-d3a5606c 
      ports:
        - containerPort: 8080
        - containerPort: 9507
      livenessProbe:
        httpGet:
          path: /available
          port: 8080
          initialDelaySeconds: 10
        minReadySeconds: 25
  loadbalancers:
  - lbname: eaas-prd-test-lb
    function: eaas-prd-test
    ports:
      - port: 8080 
        targetport: 8080
      - port: 9507 
        targetport: 9507
