apiVersion: v1

system:
    notifications:
      email:
        - dtupper@salesforce.com
    functions:
    - name: dtmaiev-test-func
      count: 20
      containers:
      - name: dt-maiev-test
        image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/dtupper/sfdc-maiev:test-0003
        ports:
        - name: http
          containerPort: 8889
          hostPort: 18889
        - name: https
          containerPort: 8443
        - name: grpc
          containerPort: 7878
        volumeMounts:
        - mountPath: /home/sfdc-casp/pki/client
          name: maievclientcert
        livenessProbe:
          exec:
            command:
            - /usr/bin/true
      volumes:
      - name: maievclientcert
        maddogCert:
          type: client

    loadbalancers:
    - lbname: maievlb
      function: dtmaiev-test-func
      slbEnabled: true
      ports:
        - port: 80
          targetport: 8889
        - port: 443
          targetport: 8443
        - port: 7878
          targetport: 7878
