apiVersion: v1
system:
  functions:
  - name: default
    count: 1
    # Using host networking like CA (no slb)
    hostnetwork: true
    containers:
    - name: pathproxy
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/artifactory/webapp/#/artifacts/browse/tree/General/docker-sam/nginx 
      #TODO Add config for path-based proxying to apps in other containers
      ports:
      - containerPort: 9090
      #TODO Add liveness probe details for proxy
      livenessProbe:

    - name: appone
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ccotofana/samhello:one 
      ports:
      - containerPort: 9091
      livenessProbe:
        httpGet:
          path: /
          port: 9091

    - name: apptwo
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ccotofana/samhello:two 
      ports:
      - containerPort: 9092
      livenessProbe:
        httpGet:
          path: /
          port: 9092


