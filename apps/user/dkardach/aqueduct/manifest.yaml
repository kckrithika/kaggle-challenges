apiVersion: v1

system:
  functions:
  - name: aqueduct
    count: 1
    containers:
    - name: aqueduct
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/iot/aqueduct:2
      ports:
      - containerPort: 5000
      livenessProbe:
        httpGet:
          path: /healthcheck
          port: 5000
        initialDelaySeconds: 120
        timeoutSeconds: 120
    strategy:
      type: Recreate

  loadbalancers:
  - lbname: squeduct-lb
    function: aqueduct
    ports:
      - port: 5000
        targetport: 5000