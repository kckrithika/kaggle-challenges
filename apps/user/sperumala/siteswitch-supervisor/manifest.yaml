# created by scone-gen

apiVersion: v1

system:
  functions:
    - name: siteswitch-supervisor
      count: 1
      containers:
        - name: siteswitch-supervisor-service
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/sperumala/siteswitch-supervisor:1
          # This line makes sure that the last lines of the log on the console gets sent to Splunk on early termination
          terminationMessagePolicy: "FallbackToLogsOnError"
          # If your service doesn't serve HTTP traffic then you can remove the scone-http 8080 port.
          ports:
            - containerPort: 8080
              name: scone-http
            - containerPort: 7020
              name: grpc-svc
            - containerPort: 15372
              name: scone-mgmt
          livenessProbe:
            initialDelaySeconds: 30
            httpGet:
              path: /manage/health
              port: 15372
          readinessProbe:
            timeoutSeconds: 10
            httpGet:
              path: /manage/ready
              port: 15372

      # The volumes to mount for shipping logs to splunk
      # General rule is to use path that satisfies the pattern: /home/sfdc-*/logs/**/*.json
      volumes:
