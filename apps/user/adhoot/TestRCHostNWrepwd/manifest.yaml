apiVersion: v1

system:
  functions:
  - name: rchnwrepcollavailwd
    count: 1
    containers:
    - name: rchnwrepcollavailwd
      image: shared0-samcontrol1-1-prd.eng.sfdc.net:5000/adhoot:rcwd-qualifiednameasdevice
      resources:
        limits: { cpu: "2", memory: "10Gi" }
        requests: { cpu: "2", memory: "10Gi" }
      env:
      - name: REPORT_COLLECTOR_HOST
        value: $(RCHNWREPORTCOLLECTORHALB_SERVICE_HOST)
      - name: REPORT_COLLECTOR_PROVIDER_PORT
        value: $(RCHNWREPORTCOLLECTORHALB_SERVICE_PORT_TCP18443)
      - name: REPORT_COLLECTOR_CONSUMER_PORT
        value: $(RCHNWREPORTCOLLECTORHALB_SERVICE_PORT_TCP18444)
      - name: DEVICE
        value: $(RCHNWREPORTCOLLECTORHALB_SERVICE_HOST)
      #- name: LOG_DIR
      #  value: /var/log/report-collector-availability-watchdog
      - name: DEBUG_ENABLED
        value: true
      command: ["/bin/sh", "-c"]
      args: ["
      export FUNNEL_VIP=http://${SFDC_METRICS_SERVICE_HOST}:${SFDC_METRICS_SERVICE_PORT} ;
      export DATACENTER=${KINGDOM} ;
      node --harmony ${APP_DIR}/lib/watchdog.js
      "]
