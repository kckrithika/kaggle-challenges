apiVersion: v1

system:
  functions:
  - name: default
    count: 2
    containers:
    - name: samhello
      #### Image which fails liveness probes by crashing
      # image: shared0-samcontrol1-1-prd.eng.sfdc.net:5000/samhello:mgrass-20170321

      #### Image which should run fine.
      image: shared0-samcontrol1-1-prd.eng.sfdc.net:5000/samhello:mgrass-20170315
      ports:
      - containerPort: 9090
      livenessProbe:
        httpGet:
          path: /
          port: 9090
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1

  loadbalancers:
  - lbname: samhellolb
    function: default
    ports:
      - port: 9090
        targetport: 9090
