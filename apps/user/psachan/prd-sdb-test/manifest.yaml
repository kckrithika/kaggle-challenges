apiVersion: v1

system:
  notifications:
    email:
      - psachan@salesforce.com
  functions:
    - name: ss-sdb
      count: 1
      identity:
        serviceName: sdb
        pod: ss
      containers:
        - name: sdbgo
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/psachan/mysdb:06Dec19
          env:
          - name: SFDC_ENVIRONMENT
            value: mesh
          # name: PGPORT
          # value: "1521"
          ports:
          # expose sdb port outside the container
          - containerPort: 1521
            name: sdb-port
          livenessProbe:
               exec:
                 command: ["/bin/true"]
               initialDelaySeconds: 10
               timeoutSeconds: 10
               periodSeconds: 60
      volumes:
        - name: sdblogs
          emptyDir: {}

  loadbalancers:
  - lbname: ss-sdb-lb
    function: ss-sdb
    slbenabled: true
    ports:
      - port: 1521
        targetport: 1521
