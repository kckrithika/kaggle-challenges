apiVersion: v1

system:
  notifications:
    email:
      - iceplatformdev@salesforce.com 
  functions:
  - name: gatekeeper-dashboard
    count: 3
    containers:
    - name: gatekeeper-dashboard
      image: tnrp/ice-pd/gatekeeper-dashboard:1.0.0-0000006-6401a6cf
      livenessProbe:
        httpGet:
          path: /manage/health
          port: 15372
        initialDelaySeconds: 60 
        timeoutSeconds: 10
      ports:
      - containerPort: 8080
      - containerPort: 15372

    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1

  loadbalancers:
  - lbname: gatekeeper-dashboardlb
    function: gatekeeper-dashboard
    nodeExposed: true
    slbEnabled: true
    ports:
      - port: 8090
        targetport: 8080
      - port: 15375
        targetport: 15372