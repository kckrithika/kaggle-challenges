apiVersion: v1
system:
  functions:
    - name: default
      count: 1
      containers:
        - name: account-service
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/alunawat/account-service-1.1:alunawat
          ports:
            - name: service-port
              containerPort: 7022
            - name: grpc-port
              containerPort: 7020
          livenessProbe:
            httpGet:
              path: /
              port: 7022
            initialDelaySeconds: 30
            periodSeconds: 60
            timeoutSeconds: 10
        - name: beacon
          image: sfci/servicelibs/beacon:f6445b2b299f232eda1e0be9739b8242153478ea
          args:
            - -endpoint
            - $(FUNCTION):DATACENTER_ALLENV:HTTP2
          livenessProbe:
            exec:
              command:
                - /home/scone/is-alive.sh
            initialDelaySeconds: 5
        - name: sherpa
          image: sfci/servicelibs/sherpa-envoy:1.0.5
          ports:
            - name: grpc
              containerPort: 7011
            - name: sherpa-adm
              containerPort: 15373
          livenessProbe:
            exec:
              command:
                - ./bin/is-alive
            initialDelaySeconds: 60
            periodSeconds: 5
          readinessProbe:
            exec:
              command:
                - ./bin/is-ready
            initialDelaySeconds: 60
            periodSeconds: 5