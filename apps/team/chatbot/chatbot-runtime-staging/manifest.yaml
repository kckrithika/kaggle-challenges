apiVersion: v1

system:
  notifications:
    email:
      - david.ji@salesforce.com
      - d.l.taylor@salesforce.com
      - joslyn.esser@salesforce.com
      - marvin.lam@salesforce.com
  functions:
  - name: default
    count: 2
    hostnetwork: true
    containers:
    - name: chatbot-runtime-staging
      image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/chatbot/chatbot-runtime:210.0-0000034-6608f6a2
      args:
        - --server.port=7022
        - --synctask.modifier=0
      ports:
      - containerPort: 7022
      - containerPort: 15372
      livenessProbe:
        httpGet:
          path: /manage/health  # root directory is 404ing for now so use this endpoint
          port: 15372
        initialDelaySeconds: 30
      volumeMounts:
      - mountPath: /log
        name: logvol
      env:
      - name: SFDC_ENVIRONMENT
        value: blitz

    volumes:
    - name: logvol
      hostPath:
        path: /home/sfdc-sam/logs

  loadbalancers:
  - lbname: chatbot-runtime-lb-staging
    function: default
    ports:
      - port: 7022
        targetport: 7022

