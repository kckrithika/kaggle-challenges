apiVersion: v1

system:
  notifications:
    email:
      - rama.rao@salesforce.com
  functions:
    - name: istio-tcp-stateful
      type: stateful-set
      count: 3
      annotations:
        sidecar.istio.io/inject: "true"
      containers:
        - name: tcp-echo-stateful-server
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/rama.rao/ramaraochavali/tcp-echo-server:latest
          ports:
            - name: tcp-port
              containerPort: 9000
          resources:
            limits: { cpu: "8", memory: "1Gi" }
            requests: { cpu: "8", memory: "1Gi" }
          livenessProbe:
            exec:
              command: ["/bin/true"]
            initialDelaySeconds: 10
            timeoutSeconds: 10
            periodSeconds: 60
          readinessProbe:
            exec:
              command: ["/bin/true"]
            initialDelaySeconds: 10
            timeoutSeconds: 10
      
      lbname: istio-tcp-stateful-lb-rama-rao