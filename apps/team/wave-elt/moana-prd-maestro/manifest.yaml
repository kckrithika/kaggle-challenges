apiVersion: v1

system:
  functions:
    - name: moana-mock-maestro
      count: 1
      containers:
        - name: mock-maestro
          image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/insights/mock-maestro-gateway:master-5-fbb57e3
          ports:
            - containerPort: 15372
              name: manage
            - containerPort: 8080
              name: http
          livenessProbe:
            httpGet: {path: /manage/health, port: 15372}
            initialDelaySeconds: 30
            periodSeconds: 60
            timeoutSeconds: 30

  loadbalancers:
    - lbname: moana-mock-maestro
      function: moana-mock-maestro
      ports:
        - port: 8080
          targetport: 8080