system:
  functions:
  - name: keymaker-dev
    count: 1
    containers:
    - name: keymaker
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ccp/keymaker:ac05598
      env:
          - name: HTTPS_PROXY
            value: public0-proxy1-0-prd.data.sfdc.net:8080
          - name: HTTP_PROXY
            value: public0-proxy1-0-prd.data.sfdc.net:8080
          - name: KEYMAKER_SLEEP_SECONDS
            value: 900
          - name: KEYMAKER_TEST
            value: true
          - name: METRICS_HOST
            value: ajna-api.salesforce.com
          - name: METRICS_SERVICE_NAME
            value: keymaker-dev

      livenessProbe:
        exec:
          command:
            - "true"
        initialDelaySeconds: 120
        periodSeconds: 5

      volumeMounts:
      - mountPath: /client-certs
        name: client-certs
      - mountPath: /server-certs
        name: server-certs

    volumes:
    - name: client-certs
      maddogCert:
        type: client
    - name: server-certs
      maddogCert:
        type: server
