system:
  functions:
  - name: keymaker
    count: 0
    containers:
    - name: keymaker
      image: sfci/ccp/keymaker:1e77338
      env:
          - name: HTTPS_PROXY
            value: public0-proxy1-0-frf.data.sfdc.net:8080
          - name: HTTP_PROXY
            value: public0-proxy1-0-frf.data.sfdc.net:8080
          - name: NO_PROXY
            value: secretservice.dmz.salesforce.com
          - name: KEYMAKER_SLEEP_SECONDS
            value: 180

      livenessProbe:
        exec:
          command:
            - "true"
        initialDelaySeconds: 120
        periodSeconds: 5

      volumeMounts:
      - mountPath: /client-certs
        name: client-certs
      - mountPath: /server-certs
        name: server-certs

    volumes:
    - name: client-certs
      maddogCert:
        type: client
    - name: server-certs
      maddogCert:
        type: server
