system:
  functions:
  - name: keymaker
    count: 1
    containers:
    - name: keymaker
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/ccp/keymaker:8c4337c
      env:
          - name: HTTPS_PROXY
            value: public0-proxy1-0-prd.data.sfdc.net:8080
          - name: HTTP_PROXY
            value: public0-proxy1-0-prd.data.sfdc.net:8080
          - name: KEYMAKER_SLEEP_SECONDS
            value: 300

      livenessProbe:
        exec:
          command:
            - "true"
        initialDelaySeconds: 120
        periodSeconds: 5

      volumeMounts:
      - mountPath: /client-certs
        name: client-certs
      - mountPath: /server-certs
        name: server-certs

    volumes:
    - name: client-certs
      maddogCert:
        type: client
    - name: server-certs
      maddogCert:
        type: server
