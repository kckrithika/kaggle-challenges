apiVersion: v1
system:
  functions:
  - name: kpagent-sam
    type: stateful-set
    count: 1
    volumes:
    - name: kpagentclientcert
      maddogCert:
        type: client
    hostnetwork: true
    containers:
    - name: kpagent-sam-image
      image: ops0-artifactrepo2-0-xrd.slb.sfdc.net/docker-devmvp/sdba/kpagent:0.0.2
      ports:
      - containerPort: 9090
      livenessProbe:
        httpGet:
          path: /
          port: 9090
      volumeMounts:
        - name: kpdata
          mountPath: /kpdata
        - name: sdblog
          mountPath: /sdblog
        - name: kpagentlog
          mountPath: /app
        - name: kpagentclientcert
          mountPath: /clientcert
    lbname: kpagent-sam-lb
    volumeClaimTemplates:
    - name: kpdata
      storageClassName: standard
      storageSizeRequest: 2Gi
    - name: sdblog
      storageClassName: standard
      storageSizeRequest: 2Gi
    - name: kpagentlog
      storageClassName: standard
      storageSizeRequest: 1Gi
