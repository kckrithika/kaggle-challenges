apiVersion: v1
system:
  functions:
  - name: gocd-master
    count: 1
    containers:
    - name: jenkins-master
      image: ops0-artifactrepo2-0-prd.data.sfdc.net/docker-release-candidate/tnrp/testandrelease/gocd_server_docker:1.0-0000020-d42861ea
      ports:
      - name: ui
        containerPort: 8153
      - name: agent
        containerPort: 8154
      livenessProbe:
        httpGet:
          path: /go/auth/login 
          # TODO After upgrade to >v17.11, use this path
          #path: /go/api/v1/health
          port: 8153
        initialDelaySeconds: 60
  loadbalancers:
  - lbname: gocd-lb 
    function: gocd-master
    slbenabled: true
    ports:
    - port: 8153
      targetport: 8153
    - port: 8154
      targetport: 8154
