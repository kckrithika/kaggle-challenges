apiVersion: v1

system:
  functions:
  - name: db-schema-service-api-controller
    count: 1
    containers:
    - name: db-schema-service-api-controller
      image: ops0-artifactrepo2-0-xrd.slb.sfdc.net/docker-gcp/dva/db-schema-service-api-controller:4
      env:
        - name: VAULT_TOKEN
          value: "/secrets/tk.txt"
      ports:
      - containerPort: 11443
      livenessProbe:
        initialDelaySeconds: 30
        httpGet:
          path: /api/v1/roles
          port: 11443
      volumeMounts:
        - mountPath: /secrets/
          name: dbprovision-vaulttoken
          readOnly: true
    volumes:
      - name: dbprovision-vaulttoken
        k4aSecret:
          secretName: dbprovision-vaulttoken
