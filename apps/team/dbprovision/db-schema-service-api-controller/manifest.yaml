apiVersion: v1

system:
  functions:
  - name: db-schema-service-api-controller
    count: 1
    containers:
    - name: db-schema-service-api-controller
      image: gcr.io/gsf-mgmt-devmvp-spinnaker/dva/db-schema-service-api-controller:3
      command: ["java -jar -Dspring.profiles.active=gcp-dev /home/scone/controller/build/libs/controller.jar"]
      env:
        - name: VAULT_TOKEN
          value: "/secrets/tk.txt"
      ports:
      - containerPort: 11443
      livenessProbe:
        httpGet:
          path: /
          port: 11443
      volumeMounts:
        - mountPath: /secrets/
          name: dbprovision-vaulttoken
          readOnly: true
    volumes:
      - name: dbprovision-vaulttoken
        k4aSecret:
          secretName: dbprovision-vaulttoken
