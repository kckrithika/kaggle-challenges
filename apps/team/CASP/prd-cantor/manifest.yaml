apiVersion: v1

system:
    notifications:
      email:
        - paul.howden@salesforce.com
        - pteyer@salesforce.com
        - akouthoofd@salesforce.com
    functions:
    - name: cantor-func
      count: 2
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxSurge: 0
          maxUnavailable: 1
      containers:
      - name: prd-cantor
        image: tnrp/casp/cantor:2.6.1-0000022-e4390cc5
        ports:
        - name: cantor-grpc
          containerPort: 7443
          hostPort: 17443
        - name: cantor-http
          containerPort: 8084
          hostPort: 18084
        volumeMounts:
        - mountPath: /home/sfdc-cantor/mysql/
          name: cantor-vol
        livenessProbe:
          exec:
            command:
            - /usr/bin/true
      volumes:
      - name: cantor-vol
        hostPath:
          path: /data/cantor
    loadbalancers:
    - lbname: cantor
      function: cantor-func
      slbEnabled: true
      ports:
        - port: 11983
          targetport: 7443
        - port: 80
          targetport: 8084
