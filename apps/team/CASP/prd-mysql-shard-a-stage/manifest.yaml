apiVersion: v1

system:
    notifications:
      email:
        - akouthoofd@salesforce.com
    functions:
    - name: mysql-func-shard-a-stage
      count: 1
      strategy:
        type: RollingUpdate
        rollingUpdate:
          maxSurge: 0
          maxUnavailable: 1
      containers:
      - name: prd-mysql-shard-a-stage
        image: dva/casp/mysql_strata:53
        ports:
        - name: mysql-stage
          containerPort: 3306
          hostPort: 7016
        livenessProbe:
          exec:
            command:
            - /usr/bin/true
        env:
        - name: NODENAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
