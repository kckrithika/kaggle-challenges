# Warning: DO NOT EDIT this generated file
# See here on how to generate this file https://git.soma.salesforce.com/casam/casamctl

apiVersion: v1
system:
  functions:
  - containers:
    - env:
      - name: DB_SID
        value: mist61c220utf
      - name: DB_INSTANCE_NAME
        value: mist61c220utf-1
      - name: DB_USER
        value: grumpy
      - name: DB_STATS_USER
        value: snowwhite
      - name: DB_CONN_NUM
        value: 25
      - name: IP_DB
        value: mist61ice1-db1-1-prd.eng.sfdc.net
      - name: DB_PASSWORD
        value: rotate
      - name: DB_STATS_PASSWORD
        value: rotate
      - name: IP_MNDS1
        value: 127.0.0.1
      - name: OFFLINE
        value: true
      - name: SERVER_ID
        value: x
      - name: PUBLIC_PORT
        value: 8443
      - name: PUBLIC_PORT_IS_SECURE
        value: true
      - name: PUBLIC_HOST_NAME
        value: istio-ingressgateway.core-on-sam-sp2.prd-sam.prd.slb.sfdc.net
      - name: SFPROXY_VIP
        value: https://istio-ingressgateway.core-on-sam-sp2.prd-sam.prd.slb.sfdc.net:8085
      - name: HTTP_PORT
        value: 8085
      - name: SPORT
        value: 8443
      - name: S2PORT
        value: 12098
      - name: PLSQL_UPDATE_RUNSTATS
        value: false
      - name: DISABLE_AUTH_RELEASE_CHECK
        value: true
      - name: CASAM_APP_COLOR
        value: blue
      - name: SD_PORT_OVERRIDE
        value: 13065
      - name: CASAM_SETTINGS_PATH
        value: mist.mist61.prd.na7.app
      - name: CLUSTER_NAME
        value: na7
      - name: DEPLOYMENT
        value: B
      - name: ZDT
        value: true
      - name: CASAM_HOST_NAME
        valueFrom:
          fieldRef:
            fieldPath: spec.nodeName
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/coreonsam/casam:release_220-patch_18081735
      livenessProbe:
        exec:
          command:
          - /home/sfdc/salesforce/casam/bin/live_probe.sh
        failureThreshold: 99999
        initialDelaySeconds: 120
        periodSeconds: 5
        timeoutSeconds: 5
      name: coreapp
      ports:
      - containerPort: 8998
      - containerPort: 8085
      - containerPort: 11211
      - containerPort: 12098
      - containerPort: 8443
      readinessProbe:
        exec:
          command:
          - /home/sfdc/salesforce/casam/bin/ready_probe.sh
        failureThreshold: 99999
        initialDelaySeconds: 120
        periodSeconds: 5
        timeoutSeconds: 5
      volumeMounts:
      - mountPath: /home/sfdc/logs/sfdc
        name: log-volume-sfdc
      - mountPath: /home/sfdc/logs/jvm
        name: log-volume-jvm
      - mountPath: /etc/pki_service
        name: tls-client-cert
      - mountPath: /home/sfdc/salesforce/casam
        name: coreapp-casam-volume
      - mountPath: /home/sfdc/salesforce/config/settings/overrides/caas-cluster-casam-sp2
        name: secretvol
        readOnly: true
    - env:
      - name: CASAM_SETTINGS_PATH
        value: mist.mist61.prd.na7.app
      image: ops0-artifactrepo1-0-prd.data.sfdc.net/docker-sam/jbratton/coreapp_overrides:jbratton
      livenessProbe:
        exec:
          command:
          - cat
          - /tmp/live
        initialDelaySeconds: 10
        periodSeconds: 5
      name: casam-sidecar
      readinessProbe:
        exec:
          command:
          - cat
          - /tmp/ready
        initialDelaySeconds: 10
        periodSeconds: 5
      volumeMounts:
      - mountPath: /home/sfdc/salesforce/casam
        name: coreapp-casam-volume
    count: 1
    identity:
      pod: na7
      serviceName: app
    labels:
      app: app
      settings_path: mist.mist61.prd.na7.app
      superpod: sp2
      version: blue
    annotations:
      sidecar.istio.io/inject: "true"
      routing.mesh.sfdc.net/enabled: "true"
    name: na7-mist61app-prd
    progressDeadlineSeconds: 300
    strategy:
      rollingUpdate:
        maxSurge: 200%
        maxUnavailable: 0
      type: RollingUpdate
    terminationGracePeriodSeconds: 120
    volumes:
    - emptyDir: {}
      name: coreapp-casam-volume
    - maddogCert:
        type: client
      name: tls-client-cert
    - maddogCert:
        type: server
      name: tls-server-cert
    - hostPath:
        path: /data/logs/sfdc
      name: log-volume-sfdc
    - hostPath:
        path: /data/logs/jvm
      name: log-volume-jvm
    - k4aSecret:
        secretName: caas-k4a-secret-prd
      name: secretvol
  - containers:
    - env:
      - name: NONCE
        value: 1555807399529744896
      - name: DRY_RUN
        value: 0
      - name: CHATTER_GROUP_NAME
        value: casam-alpha
      - name: SFPROXY_VIP
        value: https://istio-ingressgateway.core-on-sam-sp2.prd-sam.prd.slb.sfdc.net:8085
      - name: SWITCH_BOARD_ADDRESS
        value: switchboard.service-mesh.svc.mesh.sfdc.net:15001
      - name: ROUTE_UPDATE_SERVICE
        value: route-update-service.service-mesh.svc.mesh.sfdc.net:7443
      - name: INSECURE_SKIP_TLS_VERIFY
        value: 1
      - name: RELEASE_VESION
        value: ""
      - name: RELEASE_TYPE
        value: MINOR
      - name: MAJOR_RELEASE_NUMBER
        value: 220
      - name: DB_EDITION
        value: 220
      - name: MINOR_RELEASE_NUMBER
        value: 0
      - name: PATCH_RELEASE_NUMBER
        value: 0
      - name: CURRENT_RELEASE_VERSION
        value: green
      - name: NEW_RELEASE_VERSION
        value: blue
      - name: READY_SERVER_COUNT
        value: 1
      - name: DB_SID
        value: mist61c220utf
      - name: ENABLE_DB_SCHEMA_UPGRADE
        value: 0
      - name: OLD_DWARF
        value: sneezy
      - name: KILL_DWARF
        value: 0
      - name: LOCK_DWARF
        value: 0
      - name: TRIGGER_CAFFEINE
        value: 0
      - name: UNLOCK_DWARF
        value: 0
      - name: SNOWWHITE_PWD
        value: rotate
      - name: MADDOG_CLIENT
        value: /certs
      - name: SFPROXY_SETTINGS_PATH
        value: mist61.-.prd.na7.sfproxy
      - name: CASAM_SUPERPOD
        value: sp2
      - name: HTTP_PROXY
        value: public0-proxy1-0-prd.data.sfdc.net:8080
      - name: SKIP_KAIJU
        value: 1
      - name: ZDT
        value: true
      - name: KAIJU_REFOCUS_GETRESULT_URL
        value: https://refocus.internal.salesforce.com/v1/samples/
      - name: KAIJU_RUNTIME_TIMEOUT_MS
        value: 360000
      image: sfci/casam/sequencer:06c5ff
      livenessProbe:
        exec:
          command:
          - /usr/local/bin/ready_probe.sh
        failureThreshold: 10
        initialDelaySeconds: 60
        periodSeconds: 1
      name: sequencer
      ports:
      - containerPort: 12062
      readinessProbe:
        exec:
          command:
          - /usr/local/bin/ready_probe.sh
        failureThreshold: 10
        initialDelaySeconds: 60
        periodSeconds: 1
      volumeMounts:
      - mountPath: /certs
        name: tls-client-cert
      - mountPath: /secrets/
        name: secretvol
        readOnly: true
      - mountPath: /kaiju-secrets/
        name: kaiju-secret-vol
        readOnly: true
    count: 1
    identity:
      pod: na7
      serviceName: sequencer
    annotations:
      sidecar.istio.io/inject: "true"
      routing.mesh.sfdc.net/enabled: "true"
    name: na7-mist61sequencer-prd
    progressDeadlineSeconds: 300
    terminationGracePeriodSeconds: 60
    volumes:
    - maddogCert:
        type: client
      name: tls-client-cert
    - maddogCert:
        type: server
      name: tls-server-cert
    - k4aSecret:
        secretName: sequencer-gus
      name: secretvol
    - k4aSecret:
        secretName: sequencer-kaiju
      name: kaiju-secret-vol
  loadbalancers:
  - function: na7-mist61app-prd
    lbname: na7-mist61app-prd
    labels:
      app: app
      settings_path: mist.mist61.prd.na7.app
      superpod: sp2
      version: blue
    ports:
    - lbtype: dsr
      port: 8085
      targetport: 8085
      name: http-core
    - lbtype: dsr
      port: 8443
      targetport: 8443
      name: http-coretls
  - function: na7-mist61sequencer-prd
    lbname: na7-mist61sequencer-prd
    ports:
    - lbtype: dsr
      port: 12062
      targetport: 12062
      name: http
