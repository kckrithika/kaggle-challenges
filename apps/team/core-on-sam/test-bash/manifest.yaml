apiVersion: v1
 
system:
  functions:
  - name: bash

    count: 1
    
    volumes:
    - name: cert
      maddogCert:
        type: client
    - name: secretvol
      k4aSecret:
        secretName: na1-secret
    
    containers:
    - name: bashc

      image: tnrp/casam/coreapp:214__15043100-0000094-120c8cb2

      resources:
        limits: { cpu: "2", memory: "2Gi" }
        requests: { cpu: "2", memory: "2Gi" }
         
      livenessProbe:
        exec:
          command:
           - echo
           - HEALTHY
        initialDelaySeconds: 10
        periodSeconds: 30

      readinessProbe:
        exec:
          command:
           - echo
           - HEALTHY
        initialDelaySeconds: 120
        periodSeconds: 30
        failureThreshold: 10


      volumeMounts:
        - name: cert
          mountPath: /certs
        - mountPath: /var/secrets
          name: secretvol
          readOnly: true
    
      command: ["tail", "/home/sfdc/salesforce/build/sam_startup.sh", "-f"]
