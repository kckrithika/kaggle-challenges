# Warning: DO NOT EDIT this generated file
# See here on how to generate this file https://git.soma.salesforce.com/casam/casamctl

apiVersion: v1
system:
  functions:
  - containers:
    - env:
      - name: DB_USER
        value: sleepy
      - name: PUBLIC_PORT
        value: 443
      - name: PUBLIC_PORT_IS_SECURE
        value: true
      - name: PUBLIC_HOST_NAME
        value: cs103.salesforce.com
      - name: SFPROXY_VIP
        value: https://cs103app-lb.core-on-sam-sp1.fra-sam.fra.slb.sfdc.net:8443
      - name: HTTP_PORT
        value: 8085
      - name: SPORT
        value: 8443
      - name: S2PORT
        value: 12098
      - name: PLSQL_UPDATE_RUNSTATS
        value: false
      - name: DISABLE_AUTH_RELEASE_CHECK
        value: true
      - name: CASAM_APP_COLOR
        value: blue
      - name: SD_PORT_OVERRIDE
        value: 13065
      - name: CASAM_SETTINGS_PATH
        value: prod.-.fra.cs103.app
      - name: CLUSTER_NAME
        value: cs103
      - name: DEPLOYMENT
        value: B
      - name: ZDT
        value: false
      - name: CASAM_HOST_NAME
        valueFrom:
          fieldRef:
            fieldPath: spec.nodeName
      image: sfci/casam/coreapp:release_218-patch_17808850
      livenessProbe:
        exec:
          command:
          - /home/sfdc/salesforce/casam/bin/live_probe.sh
        failureThreshold: 99999
        initialDelaySeconds: 120
        periodSeconds: 5
        timeoutSeconds: 5
      name: coreapp
      ports:
      - containerPort: 8998
      - containerPort: 8085
      - containerPort: 11211
      - containerPort: 12098
      - containerPort: 8443
      readinessProbe:
        exec:
          command:
          - /home/sfdc/salesforce/casam/bin/ready_probe.sh
        failureThreshold: 99999
        initialDelaySeconds: 120
        periodSeconds: 5
        timeoutSeconds: 5
      volumeMounts:
      - mountPath: /home/sfdc/logs/sfdc
        name: log-volume-sfdc
      - mountPath: /home/sfdc/logs/jvm
        name: log-volume-jvm
      - mountPath: /etc/pki_service
        name: tls-client-cert
      - mountPath: /home/sfdc/salesforce/casam
        name: coreapp-casam-volume
      - mountPath: /home/sfdc/salesforce/config/settings/overrides/sp-cs103-c1
        name: secretvol-c1
        readOnly: true
      - mountPath: /home/sfdc/salesforce/config/settings/overrides/sp-cs103-pc
        name: secretvol-pc
        readOnly: true
    - env:
      - name: CASAM_SETTINGS_PATH
        value: prod.-.fra.cs103.app
      image: sfci/casam/coreapp_overrides:476eb5
      livenessProbe:
        exec:
          command:
          - cat
          - /tmp/live
        initialDelaySeconds: 10
        periodSeconds: 5
      name: casam-sidecar
      readinessProbe:
        exec:
          command:
          - cat
          - /tmp/ready
        initialDelaySeconds: 10
        periodSeconds: 5
      volumeMounts:
      - mountPath: /home/sfdc/salesforce/casam
        name: coreapp-casam-volume
    - args:
      - --template
      - /cyan-config/tls-terminator-config.yaml.template
      env:
      - name: SFDC_ENVIRONMENT
        value: envoy-sidecar
      image: sfci/servicelibs/sherpa-envoy:1.0.4
      livenessProbe:
        exec:
          command:
          - ./bin/is-alive
        initialDelaySeconds: 20
        periodSeconds: 5
      name: envoy-sidecar
      ports:
      - containerPort: 13065
      - containerPort: 15373
      readinessProbe:
        exec:
          command:
          - ./bin/is-ready
        initialDelaySeconds: 15
        periodSeconds: 5
      volumeMounts:
      - mountPath: /cyan-config
        name: envoy-config-volume
      - mountPath: /certs/cert-client
        name: tls-client-cert
      - mountPath: /certs/cert-server
        name: tls-server-cert
    - env:
      - name: CONFIG_DIR
        value: /home/sfdc-sherpa/sherpa-envoy-config-volume
      image: sfci/casam/cyan-config:208cc2
      livenessProbe:
        exec:
          command:
          - cat
          - /tmp/live
        initialDelaySeconds: 10
        periodSeconds: 5
      name: envoy-sidecar-config
      readinessProbe:
        exec:
          command:
          - cat
          - /tmp/ready
        initialDelaySeconds: 10
        periodSeconds: 5
      volumeMounts:
      - mountPath: /home/sfdc-sherpa/sherpa-envoy-config-volume
        name: envoy-config-volume
    count: 5
    identity:
      pod: cs103
      serviceName: app
    name: cs103-app-fra
    progressDeadlineSeconds: 300
    strategy:
      rollingUpdate:
        maxSurge: 200%
        maxUnavailable: 0
      type: RollingUpdate
    terminationGracePeriodSeconds: 120
    volumes:
    - emptyDir: {}
      name: envoy-config-volume
    - emptyDir: {}
      name: coreapp-casam-volume
    - maddogCert:
        type: client
      name: tls-client-cert
    - maddogCert:
        type: server
      name: tls-server-cert
    - hostPath:
        path: /data/logs/sfdc
      name: log-volume-sfdc
    - hostPath:
        path: /data/logs/jvm
      name: log-volume-jvm
    - k4aSecret:
        secretName: caas-k4a-secret-sp-cs103-c1
      name: secretvol-c1
    - k4aSecret:
        secretName: caas-k4a-secret-sp-cs103-pc
      name: secretvol-pc
      
  