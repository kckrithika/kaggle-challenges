apiVersion: v1

system:
  functions:
  - name: ajnaconsumer
    count: 0
    containers:
    - name: ajnaconsumer
      image: dva/sam/hypersam:2838-bb0b18d18d0cfb389547ae7a3e5df9b23ba51e11
      command:
        - /sam/ajnaconsumer
        - --v=3
        - --databaseHostname=watchdog-mysql.csc-sam.prd-sam.prd.slb.sfdc.net
      volumeMounts:
      - name: certs
        mountPath: /certs
      - name: watchdog-mysqlsecret
        mountPath: /secrets
        readOnly: true

      livenessProbe:
        exec:
          command:
              - ls
        initialDelaySeconds: 5
        periodSeconds: 5

    volumes:
    - name: certs
      maddogCert:
        type: client
    - name: watchdog-mysqlsecret
      k4aSecret:
        secretName: watchdogmysql