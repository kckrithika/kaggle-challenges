apiVersion: v1

system:
  functions:
  - name: samtestfn
    count: 2
    containers:
    - name: samtestapp
      image: hypersam:prahlad.joshi-20161031_144935-fee70c0
      command:
        - /sam/sam-test-app
      env:
        - name: DUMMYENV
          value: "SOMEVALUE00009"
      ports:
      - containerPort: 8000
      livenessProbe:
        httpGet:
          path: /
          port: 8000
      volumeMounts:
      - mountPath: /log
        name: logVol
      - mountPath: /tmp
        name: ephermeralVol
    volumes:
    - name: logVol
      hostPath:
        path: /var/log
    - name: ephermeralVol
      emptyDir: {}
  loadbalancers:
  - lbname: lb124
    nodeExposed: true
    function: samtestfn
    ports:
      - port: 8888
        targetport: 8000
